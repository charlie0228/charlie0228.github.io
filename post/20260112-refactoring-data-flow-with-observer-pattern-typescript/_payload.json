[{"data":1,"prerenderedAt":4015},["Reactive",2],{"content-query-jyOw9Oiu4G":3,"content-query-hdIEDBugT8":2193},{"_path":4,"_dir":5,"_draft":6,"_partial":6,"_locale":7,"title":8,"description":9,"tags":10,"customCreatedAt":11,"createdByAI":12,"readingTime":13,"body":18,"_type":2186,"_id":2187,"_source":2188,"_file":2189,"_extension":2190,"createdAt":2191,"updatedAt":2192},"/post/20260112-refactoring-data-flow-with-observer-pattern-typescript","post",false,"","使用 Observer Pattern 重構複雜的資料上傳流程 - 以 PrimaryAPI 與 BackupService 整合為例","在後端開發中，我們常遇到需求不斷疊加，導致原本單純的類別（Class）變成了「上帝類別（God Class）」，職責混雜且難以測試。最近我在處理一個將資料上傳到 PrimaryAPI（主要資料平台）與 BackupService（備份服務）的功能時，就遇到了「堆疊式複雜度」的問題。本文將分享如何利用 Observer Pattern（觀察者模式）1 與 Mediator Pattern（中介者模式）2 來優化架構，達成高內聚低耦合的設計。","typescript, design-pattern, refactoring, nodejs, backend, observer-pattern","2026-01-12T00:00:00.000Z",true,{"text":14,"minutes":15,"time":16,"words":17},"8 min read",7.07,424200,1414,{"type":19,"children":20,"toc":2175},"root",[21,69,75,89,134,164,542,547,581,587,592,599,625,630,782,795,999,1011,1292,1298,1318,1795,1800,1802,1960,1966,1971,2026,2031,2065,2070,2075,2091,2169],{"type":22,"tag":23,"props":24,"children":25},"element","p",{},[26,29,35,49,51,56,67],{"type":27,"value":28},"text","在後端開發中，我們常遇到需求不斷疊加，導致原本單純的類別（Class）變成了「上帝類別（God Class）」，職責混雜且難以測試。最近我在處理一個將資料上傳到 PrimaryAPI（主要資料平台）與 BackupService（備份服務）的功能時，就遇到了「堆疊式複雜度」的問題。本文將分享如何利用 ",{"type":22,"tag":30,"props":31,"children":32},"strong",{},[33],{"type":27,"value":34},"Observer Pattern（觀察者模式）",{"type":22,"tag":36,"props":37,"children":38},"sup",{},[39],{"type":22,"tag":40,"props":41,"children":46},"a",{"href":42,"ariaDescribedBy":43,"dataFootnoteRef":7,"id":45},"#user-content-fn-1",[44],"footnote-label","user-content-fnref-1",[47],{"type":27,"value":48},"1",{"type":27,"value":50}," 與 ",{"type":22,"tag":30,"props":52,"children":53},{},[54],{"type":27,"value":55},"Mediator Pattern（中介者模式）",{"type":22,"tag":36,"props":57,"children":58},{},[59],{"type":22,"tag":40,"props":60,"children":64},{"href":61,"ariaDescribedBy":62,"dataFootnoteRef":7,"id":63},"#user-content-fn-2",[44],"user-content-fnref-2",[65],{"type":27,"value":66},"2",{"type":27,"value":68}," 來優化架構，達成高內聚低耦合的設計。",{"type":22,"tag":70,"props":71,"children":73},"h2",{"id":72},"問題背景",[74],{"type":27,"value":72},{"type":22,"tag":23,"props":76,"children":77},{},[78,80,87],{"type":27,"value":79},"原本的 ",{"type":22,"tag":81,"props":82,"children":84},"code",{"className":83},[],[85],{"type":27,"value":86},"StreamDataDriver",{"type":27,"value":88}," 類別最初只負責「將資料分批上傳到 PrimaryAPI」。隨著業務需求增加，加入了以下邏輯：",{"type":22,"tag":90,"props":91,"children":92},"ol",{},[93,104,114,124],{"type":22,"tag":94,"props":95,"children":96},"li",{},[97,102],{"type":22,"tag":30,"props":98,"children":99},{},[100],{"type":27,"value":101},"BackupService 資料備份",{"type":27,"value":103},"：上傳 PrimaryAPI 的同時，要判斷資料是否符合 BackupService 格式。",{"type":22,"tag":94,"props":105,"children":106},{},[107,112],{"type":22,"tag":30,"props":108,"children":109},{},[110],{"type":27,"value":111},"寫入暫存檔",{"type":27,"value":113},"：符合 BackupService 格式的資料要寫入暫存檔。",{"type":22,"tag":94,"props":115,"children":116},{},[117,122],{"type":22,"tag":30,"props":118,"children":119},{},[120],{"type":27,"value":121},"上傳 BackupService",{"type":27,"value":123},"：PrimaryAPI 上傳完成後，要把暫存檔上傳到 BackupService 平台。",{"type":22,"tag":94,"props":125,"children":126},{},[127,132],{"type":22,"tag":30,"props":128,"children":129},{},[130],{"type":27,"value":131},"強順序性要求",{"type":27,"value":133},"：如果 PrimaryAPI 上傳失敗，BackupService 流程必須全部中止，避免資料不一致。",{"type":22,"tag":23,"props":135,"children":136},{},[137,139,144,146,151,162],{"type":27,"value":138},"這導致 ",{"type":22,"tag":81,"props":140,"children":142},{"className":141},[],[143],{"type":27,"value":86},{"type":27,"value":145}," 裡充滿了與 PrimaryAPI 無關的程式碼（寫檔、判斷 ID 格式、呼叫其他上傳服務），違反了 ",{"type":22,"tag":30,"props":147,"children":148},{},[149],{"type":27,"value":150},"單一職責原則 (Single Responsibility Principle, SRP)",{"type":22,"tag":36,"props":152,"children":153},{},[154],{"type":22,"tag":40,"props":155,"children":159},{"href":156,"ariaDescribedBy":157,"dataFootnoteRef":7,"id":158},"#user-content-fn-3",[44],"user-content-fnref-3",[160],{"type":27,"value":161},"3",{"type":27,"value":163},"。",{"type":22,"tag":165,"props":166,"children":170},"pre",{"className":167,"code":168,"language":169,"meta":7,"style":7},"language-typescript shiki shiki-themes one-dark-pro","// 重構前的 God Class 示意\nclass StreamDataDriver {\n  execute() {\n    // 1. 讀取資料\n    stream.on('data', row => {\n       // 2. 處理 PrimaryAPI 上傳邏輯\n       buffer.push(row);\n       if (buffer.full) uploadToPrimary(buffer);\n\n       // 3. 處理 BackupService 邏輯 (混雜在一起!)\n       if (isBackupFormat(row)) {\n          writeToTempFile(row);\n       }\n    });\n\n    // 4. 等待所有流程結束，處理 BackupService 上傳\n    await Promise.all([primaryPromise, backupPromise]);\n  }\n}\n","typescript",[171],{"type":22,"tag":81,"props":172,"children":173},{"__ignoreMap":7},[174,186,208,223,232,282,291,323,373,382,391,421,442,451,460,468,477,524,533],{"type":22,"tag":175,"props":176,"children":179},"span",{"class":177,"line":178},"line",1,[180],{"type":22,"tag":175,"props":181,"children":183},{"style":182},"--shiki-default:#7F848E;--shiki-default-font-style:italic",[184],{"type":27,"value":185},"// 重構前的 God Class 示意\n",{"type":22,"tag":175,"props":187,"children":189},{"class":177,"line":188},2,[190,196,202],{"type":22,"tag":175,"props":191,"children":193},{"style":192},"--shiki-default:#C678DD",[194],{"type":27,"value":195},"class",{"type":22,"tag":175,"props":197,"children":199},{"style":198},"--shiki-default:#E5C07B",[200],{"type":27,"value":201}," StreamDataDriver",{"type":22,"tag":175,"props":203,"children":205},{"style":204},"--shiki-default:#ABB2BF",[206],{"type":27,"value":207}," {\n",{"type":22,"tag":175,"props":209,"children":211},{"class":177,"line":210},3,[212,218],{"type":22,"tag":175,"props":213,"children":215},{"style":214},"--shiki-default:#61AFEF",[216],{"type":27,"value":217},"  execute",{"type":22,"tag":175,"props":219,"children":220},{"style":204},[221],{"type":27,"value":222},"() {\n",{"type":22,"tag":175,"props":224,"children":226},{"class":177,"line":225},4,[227],{"type":22,"tag":175,"props":228,"children":229},{"style":182},[230],{"type":27,"value":231},"    // 1. 讀取資料\n",{"type":22,"tag":175,"props":233,"children":235},{"class":177,"line":234},5,[236,241,246,251,256,262,267,273,278],{"type":22,"tag":175,"props":237,"children":238},{"style":198},[239],{"type":27,"value":240},"    stream",{"type":22,"tag":175,"props":242,"children":243},{"style":204},[244],{"type":27,"value":245},".",{"type":22,"tag":175,"props":247,"children":248},{"style":214},[249],{"type":27,"value":250},"on",{"type":22,"tag":175,"props":252,"children":253},{"style":204},[254],{"type":27,"value":255},"(",{"type":22,"tag":175,"props":257,"children":259},{"style":258},"--shiki-default:#98C379",[260],{"type":27,"value":261},"'data'",{"type":22,"tag":175,"props":263,"children":264},{"style":204},[265],{"type":27,"value":266},", ",{"type":22,"tag":175,"props":268,"children":270},{"style":269},"--shiki-default:#E06C75;--shiki-default-font-style:italic",[271],{"type":27,"value":272},"row",{"type":22,"tag":175,"props":274,"children":275},{"style":192},[276],{"type":27,"value":277}," =>",{"type":22,"tag":175,"props":279,"children":280},{"style":204},[281],{"type":27,"value":207},{"type":22,"tag":175,"props":283,"children":285},{"class":177,"line":284},6,[286],{"type":22,"tag":175,"props":287,"children":288},{"style":182},[289],{"type":27,"value":290},"       // 2. 處理 PrimaryAPI 上傳邏輯\n",{"type":22,"tag":175,"props":292,"children":294},{"class":177,"line":293},7,[295,300,304,309,313,318],{"type":22,"tag":175,"props":296,"children":297},{"style":198},[298],{"type":27,"value":299},"       buffer",{"type":22,"tag":175,"props":301,"children":302},{"style":204},[303],{"type":27,"value":245},{"type":22,"tag":175,"props":305,"children":306},{"style":214},[307],{"type":27,"value":308},"push",{"type":22,"tag":175,"props":310,"children":311},{"style":204},[312],{"type":27,"value":255},{"type":22,"tag":175,"props":314,"children":316},{"style":315},"--shiki-default:#E06C75",[317],{"type":27,"value":272},{"type":22,"tag":175,"props":319,"children":320},{"style":204},[321],{"type":27,"value":322},");\n",{"type":22,"tag":175,"props":324,"children":326},{"class":177,"line":325},8,[327,332,337,342,346,351,356,361,365,369],{"type":22,"tag":175,"props":328,"children":329},{"style":192},[330],{"type":27,"value":331},"       if",{"type":22,"tag":175,"props":333,"children":334},{"style":204},[335],{"type":27,"value":336}," (",{"type":22,"tag":175,"props":338,"children":339},{"style":198},[340],{"type":27,"value":341},"buffer",{"type":22,"tag":175,"props":343,"children":344},{"style":204},[345],{"type":27,"value":245},{"type":22,"tag":175,"props":347,"children":348},{"style":315},[349],{"type":27,"value":350},"full",{"type":22,"tag":175,"props":352,"children":353},{"style":204},[354],{"type":27,"value":355},") ",{"type":22,"tag":175,"props":357,"children":358},{"style":214},[359],{"type":27,"value":360},"uploadToPrimary",{"type":22,"tag":175,"props":362,"children":363},{"style":204},[364],{"type":27,"value":255},{"type":22,"tag":175,"props":366,"children":367},{"style":315},[368],{"type":27,"value":341},{"type":22,"tag":175,"props":370,"children":371},{"style":204},[372],{"type":27,"value":322},{"type":22,"tag":175,"props":374,"children":376},{"class":177,"line":375},9,[377],{"type":22,"tag":175,"props":378,"children":379},{"emptyLinePlaceholder":12},[380],{"type":27,"value":381},"\n",{"type":22,"tag":175,"props":383,"children":385},{"class":177,"line":384},10,[386],{"type":22,"tag":175,"props":387,"children":388},{"style":182},[389],{"type":27,"value":390},"       // 3. 處理 BackupService 邏輯 (混雜在一起!)\n",{"type":22,"tag":175,"props":392,"children":394},{"class":177,"line":393},11,[395,399,403,408,412,416],{"type":22,"tag":175,"props":396,"children":397},{"style":192},[398],{"type":27,"value":331},{"type":22,"tag":175,"props":400,"children":401},{"style":204},[402],{"type":27,"value":336},{"type":22,"tag":175,"props":404,"children":405},{"style":214},[406],{"type":27,"value":407},"isBackupFormat",{"type":22,"tag":175,"props":409,"children":410},{"style":204},[411],{"type":27,"value":255},{"type":22,"tag":175,"props":413,"children":414},{"style":315},[415],{"type":27,"value":272},{"type":22,"tag":175,"props":417,"children":418},{"style":204},[419],{"type":27,"value":420},")) {\n",{"type":22,"tag":175,"props":422,"children":424},{"class":177,"line":423},12,[425,430,434,438],{"type":22,"tag":175,"props":426,"children":427},{"style":214},[428],{"type":27,"value":429},"          writeToTempFile",{"type":22,"tag":175,"props":431,"children":432},{"style":204},[433],{"type":27,"value":255},{"type":22,"tag":175,"props":435,"children":436},{"style":315},[437],{"type":27,"value":272},{"type":22,"tag":175,"props":439,"children":440},{"style":204},[441],{"type":27,"value":322},{"type":22,"tag":175,"props":443,"children":445},{"class":177,"line":444},13,[446],{"type":22,"tag":175,"props":447,"children":448},{"style":204},[449],{"type":27,"value":450},"       }\n",{"type":22,"tag":175,"props":452,"children":454},{"class":177,"line":453},14,[455],{"type":22,"tag":175,"props":456,"children":457},{"style":204},[458],{"type":27,"value":459},"    });\n",{"type":22,"tag":175,"props":461,"children":463},{"class":177,"line":462},15,[464],{"type":22,"tag":175,"props":465,"children":466},{"emptyLinePlaceholder":12},[467],{"type":27,"value":381},{"type":22,"tag":175,"props":469,"children":471},{"class":177,"line":470},16,[472],{"type":22,"tag":175,"props":473,"children":474},{"style":182},[475],{"type":27,"value":476},"    // 4. 等待所有流程結束，處理 BackupService 上傳\n",{"type":22,"tag":175,"props":478,"children":480},{"class":177,"line":479},17,[481,486,491,495,500,505,510,514,519],{"type":22,"tag":175,"props":482,"children":483},{"style":192},[484],{"type":27,"value":485},"    await",{"type":22,"tag":175,"props":487,"children":488},{"style":198},[489],{"type":27,"value":490}," Promise",{"type":22,"tag":175,"props":492,"children":493},{"style":204},[494],{"type":27,"value":245},{"type":22,"tag":175,"props":496,"children":497},{"style":214},[498],{"type":27,"value":499},"all",{"type":22,"tag":175,"props":501,"children":502},{"style":204},[503],{"type":27,"value":504},"([",{"type":22,"tag":175,"props":506,"children":507},{"style":315},[508],{"type":27,"value":509},"primaryPromise",{"type":22,"tag":175,"props":511,"children":512},{"style":204},[513],{"type":27,"value":266},{"type":22,"tag":175,"props":515,"children":516},{"style":315},[517],{"type":27,"value":518},"backupPromise",{"type":22,"tag":175,"props":520,"children":521},{"style":204},[522],{"type":27,"value":523},"]);\n",{"type":22,"tag":175,"props":525,"children":527},{"class":177,"line":526},18,[528],{"type":22,"tag":175,"props":529,"children":530},{"style":204},[531],{"type":27,"value":532},"  }\n",{"type":22,"tag":175,"props":534,"children":536},{"class":177,"line":535},19,[537],{"type":22,"tag":175,"props":538,"children":539},{"style":204},[540],{"type":27,"value":541},"}\n",{"type":22,"tag":23,"props":543,"children":544},{},[545],{"type":27,"value":546},"這樣的架構有幾個痛點：",{"type":22,"tag":548,"props":549,"children":550},"ul",{},[551,561,571],{"type":22,"tag":94,"props":552,"children":553},{},[554,559],{"type":22,"tag":30,"props":555,"children":556},{},[557],{"type":27,"value":558},"測試困難",{"type":27,"value":560},"：要測試 PrimaryAPI 上傳邏輯，還得 Mock BackupService 的相關依賴。",{"type":22,"tag":94,"props":562,"children":563},{},[564,569],{"type":22,"tag":30,"props":565,"children":566},{},[567],{"type":27,"value":568},"錯誤處理脆弱",{"type":27,"value":570},"：並行執行下，很難精準控制「PrimaryAPI 失敗則 BackupService 不上傳」。",{"type":22,"tag":94,"props":572,"children":573},{},[574,579],{"type":22,"tag":30,"props":575,"children":576},{},[577],{"type":27,"value":578},"擴充性差",{"type":27,"value":580},"：如果明天要多傳一個 S3，程式碼會變得更亂。",{"type":22,"tag":70,"props":582,"children":584},{"id":583},"解決方案observer-mediator",[585],{"type":27,"value":586},"解決方案：Observer + Mediator",{"type":22,"tag":23,"props":588,"children":589},{},[590],{"type":27,"value":591},"我們決定將架構拆解，引入設計模式來分離職責。",{"type":22,"tag":593,"props":594,"children":596},"h3",{"id":595},"_1-observer-pattern-觀察者模式",[597],{"type":27,"value":598},"1. Observer Pattern (觀察者模式)",{"type":22,"tag":23,"props":600,"children":601},{},[602,604,609,611,616,618,623],{"type":27,"value":603},"首先，我們將 ",{"type":22,"tag":81,"props":605,"children":607},{"className":606},[],[608],{"type":27,"value":86},{"type":27,"value":610}," 降級為單純的 ",{"type":22,"tag":30,"props":612,"children":613},{},[614],{"type":27,"value":615},"Stream Driver",{"type":27,"value":617},"（資料流驅動者）與 ",{"type":22,"tag":30,"props":619,"children":620},{},[621],{"type":27,"value":622},"PrimaryAPI Uploader",{"type":27,"value":624},"。它不再關心「誰要用這些資料」，只負責廣播「我處理到一筆資料囉」。",{"type":22,"tag":23,"props":626,"children":627},{},[628],{"type":27,"value":629},"我們定義了一個明確的介面：",{"type":22,"tag":165,"props":631,"children":633},{"className":167,"code":632,"language":169,"meta":7,"style":7},"// 定義監聽器的合約\nexport interface IDataListener {\n    onSchemaDetermined(schemaInfo: SchemaInfo): void\n    onRowProcessed(row: Record\u003Cstring, any>, transformedItem: IDataItem): void\n}\n",[634],{"type":22,"tag":81,"props":635,"children":636},{"__ignoreMap":7},[637,645,667,704,775],{"type":22,"tag":175,"props":638,"children":639},{"class":177,"line":178},[640],{"type":22,"tag":175,"props":641,"children":642},{"style":182},[643],{"type":27,"value":644},"// 定義監聽器的合約\n",{"type":22,"tag":175,"props":646,"children":647},{"class":177,"line":188},[648,653,658,663],{"type":22,"tag":175,"props":649,"children":650},{"style":192},[651],{"type":27,"value":652},"export",{"type":22,"tag":175,"props":654,"children":655},{"style":192},[656],{"type":27,"value":657}," interface",{"type":22,"tag":175,"props":659,"children":660},{"style":198},[661],{"type":27,"value":662}," IDataListener",{"type":22,"tag":175,"props":664,"children":665},{"style":204},[666],{"type":27,"value":207},{"type":22,"tag":175,"props":668,"children":669},{"class":177,"line":210},[670,675,679,684,689,694,699],{"type":22,"tag":175,"props":671,"children":672},{"style":214},[673],{"type":27,"value":674},"    onSchemaDetermined",{"type":22,"tag":175,"props":676,"children":677},{"style":204},[678],{"type":27,"value":255},{"type":22,"tag":175,"props":680,"children":681},{"style":269},[682],{"type":27,"value":683},"schemaInfo",{"type":22,"tag":175,"props":685,"children":686},{"style":204},[687],{"type":27,"value":688},": ",{"type":22,"tag":175,"props":690,"children":691},{"style":198},[692],{"type":27,"value":693},"SchemaInfo",{"type":22,"tag":175,"props":695,"children":696},{"style":204},[697],{"type":27,"value":698},"): ",{"type":22,"tag":175,"props":700,"children":701},{"style":198},[702],{"type":27,"value":703},"void\n",{"type":22,"tag":175,"props":705,"children":706},{"class":177,"line":225},[707,712,716,720,724,729,734,739,743,748,753,758,762,767,771],{"type":22,"tag":175,"props":708,"children":709},{"style":214},[710],{"type":27,"value":711},"    onRowProcessed",{"type":22,"tag":175,"props":713,"children":714},{"style":204},[715],{"type":27,"value":255},{"type":22,"tag":175,"props":717,"children":718},{"style":269},[719],{"type":27,"value":272},{"type":22,"tag":175,"props":721,"children":722},{"style":204},[723],{"type":27,"value":688},{"type":22,"tag":175,"props":725,"children":726},{"style":198},[727],{"type":27,"value":728},"Record",{"type":22,"tag":175,"props":730,"children":731},{"style":204},[732],{"type":27,"value":733},"\u003C",{"type":22,"tag":175,"props":735,"children":736},{"style":198},[737],{"type":27,"value":738},"string",{"type":22,"tag":175,"props":740,"children":741},{"style":204},[742],{"type":27,"value":266},{"type":22,"tag":175,"props":744,"children":745},{"style":198},[746],{"type":27,"value":747},"any",{"type":22,"tag":175,"props":749,"children":750},{"style":204},[751],{"type":27,"value":752},">, ",{"type":22,"tag":175,"props":754,"children":755},{"style":269},[756],{"type":27,"value":757},"transformedItem",{"type":22,"tag":175,"props":759,"children":760},{"style":204},[761],{"type":27,"value":688},{"type":22,"tag":175,"props":763,"children":764},{"style":198},[765],{"type":27,"value":766},"IDataItem",{"type":22,"tag":175,"props":768,"children":769},{"style":204},[770],{"type":27,"value":698},{"type":22,"tag":175,"props":772,"children":773},{"style":198},[774],{"type":27,"value":703},{"type":22,"tag":175,"props":776,"children":777},{"class":177,"line":234},[778],{"type":22,"tag":175,"props":779,"children":780},{"style":204},[781],{"type":27,"value":541},{"type":22,"tag":23,"props":783,"children":784},{},[785,787,793],{"type":27,"value":786},"接著實作 BackupService 的專屬邏輯 ",{"type":22,"tag":81,"props":788,"children":790},{"className":789},[],[791],{"type":27,"value":792},"BackupFileBuilder",{"type":27,"value":794},"：",{"type":22,"tag":165,"props":796,"children":798},{"className":167,"code":797,"language":169,"meta":7,"style":7},"// 專門負責 BackupService 邏輯的觀察者\nexport class BackupFileBuilder implements IDataListener {\n    onRowProcessed(row: any, item: any) {\n        // 判斷是否符合 BackupService 規格\n        if (this.canWrite(row)) {\n            this.writeBackupFile(row, item);\n        }\n    }\n    // ... 其他寫檔邏輯\n}\n",[799],{"type":22,"tag":81,"props":800,"children":801},{"__ignoreMap":7},[802,810,840,885,893,931,968,976,984,992],{"type":22,"tag":175,"props":803,"children":804},{"class":177,"line":178},[805],{"type":22,"tag":175,"props":806,"children":807},{"style":182},[808],{"type":27,"value":809},"// 專門負責 BackupService 邏輯的觀察者\n",{"type":22,"tag":175,"props":811,"children":812},{"class":177,"line":188},[813,817,822,827,832,836],{"type":22,"tag":175,"props":814,"children":815},{"style":192},[816],{"type":27,"value":652},{"type":22,"tag":175,"props":818,"children":819},{"style":192},[820],{"type":27,"value":821}," class",{"type":22,"tag":175,"props":823,"children":824},{"style":198},[825],{"type":27,"value":826}," BackupFileBuilder",{"type":22,"tag":175,"props":828,"children":829},{"style":192},[830],{"type":27,"value":831}," implements",{"type":22,"tag":175,"props":833,"children":834},{"style":198},[835],{"type":27,"value":662},{"type":22,"tag":175,"props":837,"children":838},{"style":204},[839],{"type":27,"value":207},{"type":22,"tag":175,"props":841,"children":842},{"class":177,"line":210},[843,847,851,855,859,863,867,872,876,880],{"type":22,"tag":175,"props":844,"children":845},{"style":214},[846],{"type":27,"value":711},{"type":22,"tag":175,"props":848,"children":849},{"style":204},[850],{"type":27,"value":255},{"type":22,"tag":175,"props":852,"children":853},{"style":269},[854],{"type":27,"value":272},{"type":22,"tag":175,"props":856,"children":857},{"style":204},[858],{"type":27,"value":688},{"type":22,"tag":175,"props":860,"children":861},{"style":198},[862],{"type":27,"value":747},{"type":22,"tag":175,"props":864,"children":865},{"style":204},[866],{"type":27,"value":266},{"type":22,"tag":175,"props":868,"children":869},{"style":269},[870],{"type":27,"value":871},"item",{"type":22,"tag":175,"props":873,"children":874},{"style":204},[875],{"type":27,"value":688},{"type":22,"tag":175,"props":877,"children":878},{"style":198},[879],{"type":27,"value":747},{"type":22,"tag":175,"props":881,"children":882},{"style":204},[883],{"type":27,"value":884},") {\n",{"type":22,"tag":175,"props":886,"children":887},{"class":177,"line":225},[888],{"type":22,"tag":175,"props":889,"children":890},{"style":182},[891],{"type":27,"value":892},"        // 判斷是否符合 BackupService 規格\n",{"type":22,"tag":175,"props":894,"children":895},{"class":177,"line":234},[896,901,905,910,914,919,923,927],{"type":22,"tag":175,"props":897,"children":898},{"style":192},[899],{"type":27,"value":900},"        if",{"type":22,"tag":175,"props":902,"children":903},{"style":204},[904],{"type":27,"value":336},{"type":22,"tag":175,"props":906,"children":907},{"style":198},[908],{"type":27,"value":909},"this",{"type":22,"tag":175,"props":911,"children":912},{"style":204},[913],{"type":27,"value":245},{"type":22,"tag":175,"props":915,"children":916},{"style":214},[917],{"type":27,"value":918},"canWrite",{"type":22,"tag":175,"props":920,"children":921},{"style":204},[922],{"type":27,"value":255},{"type":22,"tag":175,"props":924,"children":925},{"style":315},[926],{"type":27,"value":272},{"type":22,"tag":175,"props":928,"children":929},{"style":204},[930],{"type":27,"value":420},{"type":22,"tag":175,"props":932,"children":933},{"class":177,"line":284},[934,939,943,948,952,956,960,964],{"type":22,"tag":175,"props":935,"children":936},{"style":198},[937],{"type":27,"value":938},"            this",{"type":22,"tag":175,"props":940,"children":941},{"style":204},[942],{"type":27,"value":245},{"type":22,"tag":175,"props":944,"children":945},{"style":214},[946],{"type":27,"value":947},"writeBackupFile",{"type":22,"tag":175,"props":949,"children":950},{"style":204},[951],{"type":27,"value":255},{"type":22,"tag":175,"props":953,"children":954},{"style":315},[955],{"type":27,"value":272},{"type":22,"tag":175,"props":957,"children":958},{"style":204},[959],{"type":27,"value":266},{"type":22,"tag":175,"props":961,"children":962},{"style":315},[963],{"type":27,"value":871},{"type":22,"tag":175,"props":965,"children":966},{"style":204},[967],{"type":27,"value":322},{"type":22,"tag":175,"props":969,"children":970},{"class":177,"line":293},[971],{"type":22,"tag":175,"props":972,"children":973},{"style":204},[974],{"type":27,"value":975},"        }\n",{"type":22,"tag":175,"props":977,"children":978},{"class":177,"line":325},[979],{"type":22,"tag":175,"props":980,"children":981},{"style":204},[982],{"type":27,"value":983},"    }\n",{"type":22,"tag":175,"props":985,"children":986},{"class":177,"line":375},[987],{"type":22,"tag":175,"props":988,"children":989},{"style":182},[990],{"type":27,"value":991},"    // ... 其他寫檔邏輯\n",{"type":22,"tag":175,"props":993,"children":994},{"class":177,"line":384},[995],{"type":22,"tag":175,"props":996,"children":997},{"style":204},[998],{"type":27,"value":541},{"type":22,"tag":23,"props":1000,"children":1001},{},[1002,1004,1009],{"type":27,"value":1003},"在 ",{"type":22,"tag":81,"props":1005,"children":1007},{"className":1006},[],[1008],{"type":27,"value":86},{"type":27,"value":1010}," 中，只需要一行程式碼通知大家：",{"type":22,"tag":165,"props":1012,"children":1014},{"className":167,"code":1013,"language":169,"meta":7,"style":7},"class StreamDataDriver {\n    private listeners: IDataListener[] = [];\n\n    addListener(listener: IDataListener) {\n        this.listeners.push(listener);\n    }\n\n    private handleRow(row) {\n        // ... PrimaryAPI 處理邏輯 ...\n        \n        // 通知所有聽眾，完全不管他們要做什麼\n        this.listeners.forEach(l => l.onRowProcessed(row, item));\n    }\n}\n",[1015],{"type":22,"tag":81,"props":1016,"children":1017},{"__ignoreMap":7},[1018,1033,1071,1078,1107,1144,1151,1158,1182,1190,1198,1206,1278,1285],{"type":22,"tag":175,"props":1019,"children":1020},{"class":177,"line":178},[1021,1025,1029],{"type":22,"tag":175,"props":1022,"children":1023},{"style":192},[1024],{"type":27,"value":195},{"type":22,"tag":175,"props":1026,"children":1027},{"style":198},[1028],{"type":27,"value":201},{"type":22,"tag":175,"props":1030,"children":1031},{"style":204},[1032],{"type":27,"value":207},{"type":22,"tag":175,"props":1034,"children":1035},{"class":177,"line":188},[1036,1041,1046,1050,1055,1060,1066],{"type":22,"tag":175,"props":1037,"children":1038},{"style":192},[1039],{"type":27,"value":1040},"    private",{"type":22,"tag":175,"props":1042,"children":1043},{"style":315},[1044],{"type":27,"value":1045}," listeners",{"type":22,"tag":175,"props":1047,"children":1048},{"style":204},[1049],{"type":27,"value":688},{"type":22,"tag":175,"props":1051,"children":1052},{"style":198},[1053],{"type":27,"value":1054},"IDataListener",{"type":22,"tag":175,"props":1056,"children":1057},{"style":204},[1058],{"type":27,"value":1059},"[] ",{"type":22,"tag":175,"props":1061,"children":1063},{"style":1062},"--shiki-default:#56B6C2",[1064],{"type":27,"value":1065},"=",{"type":22,"tag":175,"props":1067,"children":1068},{"style":204},[1069],{"type":27,"value":1070}," [];\n",{"type":22,"tag":175,"props":1072,"children":1073},{"class":177,"line":210},[1074],{"type":22,"tag":175,"props":1075,"children":1076},{"emptyLinePlaceholder":12},[1077],{"type":27,"value":381},{"type":22,"tag":175,"props":1079,"children":1080},{"class":177,"line":225},[1081,1086,1090,1095,1099,1103],{"type":22,"tag":175,"props":1082,"children":1083},{"style":214},[1084],{"type":27,"value":1085},"    addListener",{"type":22,"tag":175,"props":1087,"children":1088},{"style":204},[1089],{"type":27,"value":255},{"type":22,"tag":175,"props":1091,"children":1092},{"style":269},[1093],{"type":27,"value":1094},"listener",{"type":22,"tag":175,"props":1096,"children":1097},{"style":204},[1098],{"type":27,"value":688},{"type":22,"tag":175,"props":1100,"children":1101},{"style":198},[1102],{"type":27,"value":1054},{"type":22,"tag":175,"props":1104,"children":1105},{"style":204},[1106],{"type":27,"value":884},{"type":22,"tag":175,"props":1108,"children":1109},{"class":177,"line":234},[1110,1115,1119,1124,1128,1132,1136,1140],{"type":22,"tag":175,"props":1111,"children":1112},{"style":198},[1113],{"type":27,"value":1114},"        this",{"type":22,"tag":175,"props":1116,"children":1117},{"style":204},[1118],{"type":27,"value":245},{"type":22,"tag":175,"props":1120,"children":1121},{"style":198},[1122],{"type":27,"value":1123},"listeners",{"type":22,"tag":175,"props":1125,"children":1126},{"style":204},[1127],{"type":27,"value":245},{"type":22,"tag":175,"props":1129,"children":1130},{"style":214},[1131],{"type":27,"value":308},{"type":22,"tag":175,"props":1133,"children":1134},{"style":204},[1135],{"type":27,"value":255},{"type":22,"tag":175,"props":1137,"children":1138},{"style":315},[1139],{"type":27,"value":1094},{"type":22,"tag":175,"props":1141,"children":1142},{"style":204},[1143],{"type":27,"value":322},{"type":22,"tag":175,"props":1145,"children":1146},{"class":177,"line":284},[1147],{"type":22,"tag":175,"props":1148,"children":1149},{"style":204},[1150],{"type":27,"value":983},{"type":22,"tag":175,"props":1152,"children":1153},{"class":177,"line":293},[1154],{"type":22,"tag":175,"props":1155,"children":1156},{"emptyLinePlaceholder":12},[1157],{"type":27,"value":381},{"type":22,"tag":175,"props":1159,"children":1160},{"class":177,"line":325},[1161,1165,1170,1174,1178],{"type":22,"tag":175,"props":1162,"children":1163},{"style":192},[1164],{"type":27,"value":1040},{"type":22,"tag":175,"props":1166,"children":1167},{"style":214},[1168],{"type":27,"value":1169}," handleRow",{"type":22,"tag":175,"props":1171,"children":1172},{"style":204},[1173],{"type":27,"value":255},{"type":22,"tag":175,"props":1175,"children":1176},{"style":269},[1177],{"type":27,"value":272},{"type":22,"tag":175,"props":1179,"children":1180},{"style":204},[1181],{"type":27,"value":884},{"type":22,"tag":175,"props":1183,"children":1184},{"class":177,"line":375},[1185],{"type":22,"tag":175,"props":1186,"children":1187},{"style":182},[1188],{"type":27,"value":1189},"        // ... PrimaryAPI 處理邏輯 ...\n",{"type":22,"tag":175,"props":1191,"children":1192},{"class":177,"line":384},[1193],{"type":22,"tag":175,"props":1194,"children":1195},{"style":204},[1196],{"type":27,"value":1197},"        \n",{"type":22,"tag":175,"props":1199,"children":1200},{"class":177,"line":393},[1201],{"type":22,"tag":175,"props":1202,"children":1203},{"style":182},[1204],{"type":27,"value":1205},"        // 通知所有聽眾，完全不管他們要做什麼\n",{"type":22,"tag":175,"props":1207,"children":1208},{"class":177,"line":423},[1209,1213,1217,1221,1225,1230,1234,1239,1243,1248,1252,1257,1261,1265,1269,1273],{"type":22,"tag":175,"props":1210,"children":1211},{"style":198},[1212],{"type":27,"value":1114},{"type":22,"tag":175,"props":1214,"children":1215},{"style":204},[1216],{"type":27,"value":245},{"type":22,"tag":175,"props":1218,"children":1219},{"style":198},[1220],{"type":27,"value":1123},{"type":22,"tag":175,"props":1222,"children":1223},{"style":204},[1224],{"type":27,"value":245},{"type":22,"tag":175,"props":1226,"children":1227},{"style":214},[1228],{"type":27,"value":1229},"forEach",{"type":22,"tag":175,"props":1231,"children":1232},{"style":204},[1233],{"type":27,"value":255},{"type":22,"tag":175,"props":1235,"children":1236},{"style":269},[1237],{"type":27,"value":1238},"l",{"type":22,"tag":175,"props":1240,"children":1241},{"style":192},[1242],{"type":27,"value":277},{"type":22,"tag":175,"props":1244,"children":1245},{"style":198},[1246],{"type":27,"value":1247}," l",{"type":22,"tag":175,"props":1249,"children":1250},{"style":204},[1251],{"type":27,"value":245},{"type":22,"tag":175,"props":1253,"children":1254},{"style":214},[1255],{"type":27,"value":1256},"onRowProcessed",{"type":22,"tag":175,"props":1258,"children":1259},{"style":204},[1260],{"type":27,"value":255},{"type":22,"tag":175,"props":1262,"children":1263},{"style":315},[1264],{"type":27,"value":272},{"type":22,"tag":175,"props":1266,"children":1267},{"style":204},[1268],{"type":27,"value":266},{"type":22,"tag":175,"props":1270,"children":1271},{"style":315},[1272],{"type":27,"value":871},{"type":22,"tag":175,"props":1274,"children":1275},{"style":204},[1276],{"type":27,"value":1277},"));\n",{"type":22,"tag":175,"props":1279,"children":1280},{"class":177,"line":444},[1281],{"type":22,"tag":175,"props":1282,"children":1283},{"style":204},[1284],{"type":27,"value":983},{"type":22,"tag":175,"props":1286,"children":1287},{"class":177,"line":453},[1288],{"type":22,"tag":175,"props":1289,"children":1290},{"style":204},[1291],{"type":27,"value":541},{"type":22,"tag":593,"props":1293,"children":1295},{"id":1294},"_2-mediator-pattern-中介者模式",[1296],{"type":27,"value":1297},"2. Mediator Pattern (中介者模式)",{"type":22,"tag":23,"props":1299,"children":1300},{},[1301,1303,1308,1310,1316],{"type":27,"value":1302},"雖然解耦了，但業務需求中的「強順序性（PrimaryAPI 成功 -> 才做 BackupService）」該由誰負責？這時候就需要一個 ",{"type":22,"tag":30,"props":1304,"children":1305},{},[1306],{"type":27,"value":1307},"Mediator（中介者）",{"type":27,"value":1309},"。在我們的案例中，由最外層的 Action Class (",{"type":22,"tag":81,"props":1311,"children":1313},{"className":1312},[],[1314],{"type":27,"value":1315},"TaskOrchestrator",{"type":27,"value":1317},") 擔任。",{"type":22,"tag":165,"props":1319,"children":1321},{"className":167,"code":1320,"language":169,"meta":7,"style":7},"class TaskOrchestrator {\n    async execute() {\n        // 1. 建立元件\n        const uploader = new StreamDataDriver();\n        const backupBuilder = new BackupFileBuilder();\n\n        // 2. 組裝 (註冊觀察者)\n        uploader.addListener(backupBuilder);\n\n        try {\n            // 3. 執行主流程 (PrimaryAPI 上傳)\n            await uploader.execute(); \n\n            // 4. 控制流程：只有 PrimaryAPI 成功，才繼續 BackupService\n            // 從 Builder 取得準備好的暫存檔路徑\n            const result = await backupBuilder.finish();\n            \n            if (result.count > 0) {\n                 await backupUploader.execute(result.filePath);\n            }\n\n        } catch (err) {\n            // 5. 統一錯誤處理與資源清理\n            backupBuilder.cleanup();\n            throw err;\n        }\n    }\n}\n",[1322],{"type":22,"tag":81,"props":1323,"children":1324},{"__ignoreMap":7},[1325,1341,1358,1366,1398,1426,1433,1441,1471,1478,1490,1498,1524,1531,1539,1547,1586,1594,1635,1677,1686,1694,1721,1730,1752,1771,1779,1787],{"type":22,"tag":175,"props":1326,"children":1327},{"class":177,"line":178},[1328,1332,1337],{"type":22,"tag":175,"props":1329,"children":1330},{"style":192},[1331],{"type":27,"value":195},{"type":22,"tag":175,"props":1333,"children":1334},{"style":198},[1335],{"type":27,"value":1336}," TaskOrchestrator",{"type":22,"tag":175,"props":1338,"children":1339},{"style":204},[1340],{"type":27,"value":207},{"type":22,"tag":175,"props":1342,"children":1343},{"class":177,"line":188},[1344,1349,1354],{"type":22,"tag":175,"props":1345,"children":1346},{"style":192},[1347],{"type":27,"value":1348},"    async",{"type":22,"tag":175,"props":1350,"children":1351},{"style":214},[1352],{"type":27,"value":1353}," execute",{"type":22,"tag":175,"props":1355,"children":1356},{"style":204},[1357],{"type":27,"value":222},{"type":22,"tag":175,"props":1359,"children":1360},{"class":177,"line":210},[1361],{"type":22,"tag":175,"props":1362,"children":1363},{"style":182},[1364],{"type":27,"value":1365},"        // 1. 建立元件\n",{"type":22,"tag":175,"props":1367,"children":1368},{"class":177,"line":225},[1369,1374,1379,1384,1389,1393],{"type":22,"tag":175,"props":1370,"children":1371},{"style":192},[1372],{"type":27,"value":1373},"        const",{"type":22,"tag":175,"props":1375,"children":1376},{"style":198},[1377],{"type":27,"value":1378}," uploader",{"type":22,"tag":175,"props":1380,"children":1381},{"style":1062},[1382],{"type":27,"value":1383}," =",{"type":22,"tag":175,"props":1385,"children":1386},{"style":192},[1387],{"type":27,"value":1388}," new",{"type":22,"tag":175,"props":1390,"children":1391},{"style":214},[1392],{"type":27,"value":201},{"type":22,"tag":175,"props":1394,"children":1395},{"style":204},[1396],{"type":27,"value":1397},"();\n",{"type":22,"tag":175,"props":1399,"children":1400},{"class":177,"line":234},[1401,1405,1410,1414,1418,1422],{"type":22,"tag":175,"props":1402,"children":1403},{"style":192},[1404],{"type":27,"value":1373},{"type":22,"tag":175,"props":1406,"children":1407},{"style":198},[1408],{"type":27,"value":1409}," backupBuilder",{"type":22,"tag":175,"props":1411,"children":1412},{"style":1062},[1413],{"type":27,"value":1383},{"type":22,"tag":175,"props":1415,"children":1416},{"style":192},[1417],{"type":27,"value":1388},{"type":22,"tag":175,"props":1419,"children":1420},{"style":214},[1421],{"type":27,"value":826},{"type":22,"tag":175,"props":1423,"children":1424},{"style":204},[1425],{"type":27,"value":1397},{"type":22,"tag":175,"props":1427,"children":1428},{"class":177,"line":284},[1429],{"type":22,"tag":175,"props":1430,"children":1431},{"emptyLinePlaceholder":12},[1432],{"type":27,"value":381},{"type":22,"tag":175,"props":1434,"children":1435},{"class":177,"line":293},[1436],{"type":22,"tag":175,"props":1437,"children":1438},{"style":182},[1439],{"type":27,"value":1440},"        // 2. 組裝 (註冊觀察者)\n",{"type":22,"tag":175,"props":1442,"children":1443},{"class":177,"line":325},[1444,1449,1453,1458,1462,1467],{"type":22,"tag":175,"props":1445,"children":1446},{"style":198},[1447],{"type":27,"value":1448},"        uploader",{"type":22,"tag":175,"props":1450,"children":1451},{"style":204},[1452],{"type":27,"value":245},{"type":22,"tag":175,"props":1454,"children":1455},{"style":214},[1456],{"type":27,"value":1457},"addListener",{"type":22,"tag":175,"props":1459,"children":1460},{"style":204},[1461],{"type":27,"value":255},{"type":22,"tag":175,"props":1463,"children":1464},{"style":315},[1465],{"type":27,"value":1466},"backupBuilder",{"type":22,"tag":175,"props":1468,"children":1469},{"style":204},[1470],{"type":27,"value":322},{"type":22,"tag":175,"props":1472,"children":1473},{"class":177,"line":375},[1474],{"type":22,"tag":175,"props":1475,"children":1476},{"emptyLinePlaceholder":12},[1477],{"type":27,"value":381},{"type":22,"tag":175,"props":1479,"children":1480},{"class":177,"line":384},[1481,1486],{"type":22,"tag":175,"props":1482,"children":1483},{"style":192},[1484],{"type":27,"value":1485},"        try",{"type":22,"tag":175,"props":1487,"children":1488},{"style":204},[1489],{"type":27,"value":207},{"type":22,"tag":175,"props":1491,"children":1492},{"class":177,"line":393},[1493],{"type":22,"tag":175,"props":1494,"children":1495},{"style":182},[1496],{"type":27,"value":1497},"            // 3. 執行主流程 (PrimaryAPI 上傳)\n",{"type":22,"tag":175,"props":1499,"children":1500},{"class":177,"line":423},[1501,1506,1510,1514,1519],{"type":22,"tag":175,"props":1502,"children":1503},{"style":192},[1504],{"type":27,"value":1505},"            await",{"type":22,"tag":175,"props":1507,"children":1508},{"style":198},[1509],{"type":27,"value":1378},{"type":22,"tag":175,"props":1511,"children":1512},{"style":204},[1513],{"type":27,"value":245},{"type":22,"tag":175,"props":1515,"children":1516},{"style":214},[1517],{"type":27,"value":1518},"execute",{"type":22,"tag":175,"props":1520,"children":1521},{"style":204},[1522],{"type":27,"value":1523},"(); \n",{"type":22,"tag":175,"props":1525,"children":1526},{"class":177,"line":444},[1527],{"type":22,"tag":175,"props":1528,"children":1529},{"emptyLinePlaceholder":12},[1530],{"type":27,"value":381},{"type":22,"tag":175,"props":1532,"children":1533},{"class":177,"line":453},[1534],{"type":22,"tag":175,"props":1535,"children":1536},{"style":182},[1537],{"type":27,"value":1538},"            // 4. 控制流程：只有 PrimaryAPI 成功，才繼續 BackupService\n",{"type":22,"tag":175,"props":1540,"children":1541},{"class":177,"line":462},[1542],{"type":22,"tag":175,"props":1543,"children":1544},{"style":182},[1545],{"type":27,"value":1546},"            // 從 Builder 取得準備好的暫存檔路徑\n",{"type":22,"tag":175,"props":1548,"children":1549},{"class":177,"line":470},[1550,1555,1560,1564,1569,1573,1577,1582],{"type":22,"tag":175,"props":1551,"children":1552},{"style":192},[1553],{"type":27,"value":1554},"            const",{"type":22,"tag":175,"props":1556,"children":1557},{"style":198},[1558],{"type":27,"value":1559}," result",{"type":22,"tag":175,"props":1561,"children":1562},{"style":1062},[1563],{"type":27,"value":1383},{"type":22,"tag":175,"props":1565,"children":1566},{"style":192},[1567],{"type":27,"value":1568}," await",{"type":22,"tag":175,"props":1570,"children":1571},{"style":198},[1572],{"type":27,"value":1409},{"type":22,"tag":175,"props":1574,"children":1575},{"style":204},[1576],{"type":27,"value":245},{"type":22,"tag":175,"props":1578,"children":1579},{"style":214},[1580],{"type":27,"value":1581},"finish",{"type":22,"tag":175,"props":1583,"children":1584},{"style":204},[1585],{"type":27,"value":1397},{"type":22,"tag":175,"props":1587,"children":1588},{"class":177,"line":479},[1589],{"type":22,"tag":175,"props":1590,"children":1591},{"style":204},[1592],{"type":27,"value":1593},"            \n",{"type":22,"tag":175,"props":1595,"children":1596},{"class":177,"line":526},[1597,1602,1606,1611,1615,1620,1625,1631],{"type":22,"tag":175,"props":1598,"children":1599},{"style":192},[1600],{"type":27,"value":1601},"            if",{"type":22,"tag":175,"props":1603,"children":1604},{"style":204},[1605],{"type":27,"value":336},{"type":22,"tag":175,"props":1607,"children":1608},{"style":198},[1609],{"type":27,"value":1610},"result",{"type":22,"tag":175,"props":1612,"children":1613},{"style":204},[1614],{"type":27,"value":245},{"type":22,"tag":175,"props":1616,"children":1617},{"style":315},[1618],{"type":27,"value":1619},"count",{"type":22,"tag":175,"props":1621,"children":1622},{"style":1062},[1623],{"type":27,"value":1624}," >",{"type":22,"tag":175,"props":1626,"children":1628},{"style":1627},"--shiki-default:#D19A66",[1629],{"type":27,"value":1630}," 0",{"type":22,"tag":175,"props":1632,"children":1633},{"style":204},[1634],{"type":27,"value":884},{"type":22,"tag":175,"props":1636,"children":1637},{"class":177,"line":535},[1638,1643,1648,1652,1656,1660,1664,1668,1673],{"type":22,"tag":175,"props":1639,"children":1640},{"style":192},[1641],{"type":27,"value":1642},"                 await",{"type":22,"tag":175,"props":1644,"children":1645},{"style":198},[1646],{"type":27,"value":1647}," backupUploader",{"type":22,"tag":175,"props":1649,"children":1650},{"style":204},[1651],{"type":27,"value":245},{"type":22,"tag":175,"props":1653,"children":1654},{"style":214},[1655],{"type":27,"value":1518},{"type":22,"tag":175,"props":1657,"children":1658},{"style":204},[1659],{"type":27,"value":255},{"type":22,"tag":175,"props":1661,"children":1662},{"style":198},[1663],{"type":27,"value":1610},{"type":22,"tag":175,"props":1665,"children":1666},{"style":204},[1667],{"type":27,"value":245},{"type":22,"tag":175,"props":1669,"children":1670},{"style":315},[1671],{"type":27,"value":1672},"filePath",{"type":22,"tag":175,"props":1674,"children":1675},{"style":204},[1676],{"type":27,"value":322},{"type":22,"tag":175,"props":1678,"children":1680},{"class":177,"line":1679},20,[1681],{"type":22,"tag":175,"props":1682,"children":1683},{"style":204},[1684],{"type":27,"value":1685},"            }\n",{"type":22,"tag":175,"props":1687,"children":1689},{"class":177,"line":1688},21,[1690],{"type":22,"tag":175,"props":1691,"children":1692},{"emptyLinePlaceholder":12},[1693],{"type":27,"value":381},{"type":22,"tag":175,"props":1695,"children":1697},{"class":177,"line":1696},22,[1698,1703,1708,1712,1717],{"type":22,"tag":175,"props":1699,"children":1700},{"style":204},[1701],{"type":27,"value":1702},"        } ",{"type":22,"tag":175,"props":1704,"children":1705},{"style":192},[1706],{"type":27,"value":1707},"catch",{"type":22,"tag":175,"props":1709,"children":1710},{"style":204},[1711],{"type":27,"value":336},{"type":22,"tag":175,"props":1713,"children":1714},{"style":315},[1715],{"type":27,"value":1716},"err",{"type":22,"tag":175,"props":1718,"children":1719},{"style":204},[1720],{"type":27,"value":884},{"type":22,"tag":175,"props":1722,"children":1724},{"class":177,"line":1723},23,[1725],{"type":22,"tag":175,"props":1726,"children":1727},{"style":182},[1728],{"type":27,"value":1729},"            // 5. 統一錯誤處理與資源清理\n",{"type":22,"tag":175,"props":1731,"children":1733},{"class":177,"line":1732},24,[1734,1739,1743,1748],{"type":22,"tag":175,"props":1735,"children":1736},{"style":198},[1737],{"type":27,"value":1738},"            backupBuilder",{"type":22,"tag":175,"props":1740,"children":1741},{"style":204},[1742],{"type":27,"value":245},{"type":22,"tag":175,"props":1744,"children":1745},{"style":214},[1746],{"type":27,"value":1747},"cleanup",{"type":22,"tag":175,"props":1749,"children":1750},{"style":204},[1751],{"type":27,"value":1397},{"type":22,"tag":175,"props":1753,"children":1755},{"class":177,"line":1754},25,[1756,1761,1766],{"type":22,"tag":175,"props":1757,"children":1758},{"style":192},[1759],{"type":27,"value":1760},"            throw",{"type":22,"tag":175,"props":1762,"children":1763},{"style":315},[1764],{"type":27,"value":1765}," err",{"type":22,"tag":175,"props":1767,"children":1768},{"style":204},[1769],{"type":27,"value":1770},";\n",{"type":22,"tag":175,"props":1772,"children":1774},{"class":177,"line":1773},26,[1775],{"type":22,"tag":175,"props":1776,"children":1777},{"style":204},[1778],{"type":27,"value":975},{"type":22,"tag":175,"props":1780,"children":1782},{"class":177,"line":1781},27,[1783],{"type":22,"tag":175,"props":1784,"children":1785},{"style":204},[1786],{"type":27,"value":983},{"type":22,"tag":175,"props":1788,"children":1790},{"class":177,"line":1789},28,[1791],{"type":22,"tag":175,"props":1792,"children":1793},{"style":204},[1794],{"type":27,"value":541},{"type":22,"tag":70,"props":1796,"children":1798},{"id":1797},"新舊架構比較",[1799],{"type":27,"value":1797},{"type":27,"value":1801},"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",{"type":22,"tag":1803,"props":1804,"children":1805},"table",{},[1806,1831],{"type":22,"tag":1807,"props":1808,"children":1809},"thead",{},[1810],{"type":22,"tag":1811,"props":1812,"children":1813},"tr",{},[1814,1821,1826],{"type":22,"tag":1815,"props":1816,"children":1818},"th",{"align":1817},"left",[1819],{"type":27,"value":1820},"比較項目",{"type":22,"tag":1815,"props":1822,"children":1823},{"align":1817},[1824],{"type":27,"value":1825},"舊架構 (Coupled / Parallel)",{"type":22,"tag":1815,"props":1827,"children":1828},{"align":1817},[1829],{"type":27,"value":1830},"新架構 (Decoupled / Sequential)",{"type":22,"tag":1832,"props":1833,"children":1834},"tbody",{},[1835,1867,1898,1929],{"type":22,"tag":1811,"props":1836,"children":1837},{},[1838,1847,1857],{"type":22,"tag":1839,"props":1840,"children":1841},"td",{"align":1817},[1842],{"type":22,"tag":30,"props":1843,"children":1844},{},[1845],{"type":27,"value":1846},"責任歸屬",{"type":22,"tag":1839,"props":1848,"children":1849},{"align":1817},[1850,1855],{"type":22,"tag":30,"props":1851,"children":1852},{},[1853],{"type":27,"value":1854},"混亂",{"type":27,"value":1856},"。Class 同時負責上傳、邏輯判斷、寫檔。",{"type":22,"tag":1839,"props":1858,"children":1859},{"align":1817},[1860,1865],{"type":22,"tag":30,"props":1861,"children":1862},{},[1863],{"type":27,"value":1864},"單一職責",{"type":27,"value":1866},"。Uploader 管上傳；Builder 管資料準備；Action 管流程。",{"type":22,"tag":1811,"props":1868,"children":1869},{},[1870,1878,1888],{"type":22,"tag":1839,"props":1871,"children":1872},{"align":1817},[1873],{"type":22,"tag":30,"props":1874,"children":1875},{},[1876],{"type":27,"value":1877},"錯誤處理",{"type":22,"tag":1839,"props":1879,"children":1880},{"align":1817},[1881,1886],{"type":22,"tag":30,"props":1882,"children":1883},{},[1884],{"type":27,"value":1885},"脆弱",{"type":27,"value":1887},"。PrimaryAPI 失敗時難以中斷 BackupService 流程。",{"type":22,"tag":1839,"props":1889,"children":1890},{"align":1817},[1891,1896],{"type":22,"tag":30,"props":1892,"children":1893},{},[1894],{"type":27,"value":1895},"強健",{"type":27,"value":1897},"。由 Mediator 統一控制，失敗直接跳過後續步驟。",{"type":22,"tag":1811,"props":1899,"children":1900},{},[1901,1909,1919],{"type":22,"tag":1839,"props":1902,"children":1903},{"align":1817},[1904],{"type":22,"tag":30,"props":1905,"children":1906},{},[1907],{"type":27,"value":1908},"擴充性",{"type":22,"tag":1839,"props":1910,"children":1911},{"align":1817},[1912,1917],{"type":22,"tag":30,"props":1913,"children":1914},{},[1915],{"type":27,"value":1916},"低",{"type":27,"value":1918},"。新增功能需修改核心程式碼。",{"type":22,"tag":1839,"props":1920,"children":1921},{"align":1817},[1922,1927],{"type":22,"tag":30,"props":1923,"children":1924},{},[1925],{"type":27,"value":1926},"高",{"type":27,"value":1928},"。只需新增 Listener 即可。",{"type":22,"tag":1811,"props":1930,"children":1931},{},[1932,1940,1950],{"type":22,"tag":1839,"props":1933,"children":1934},{"align":1817},[1935],{"type":22,"tag":30,"props":1936,"children":1937},{},[1938],{"type":27,"value":1939},"測試難易度",{"type":22,"tag":1839,"props":1941,"children":1942},{"align":1817},[1943,1948],{"type":22,"tag":30,"props":1944,"children":1945},{},[1946],{"type":27,"value":1947},"難",{"type":27,"value":1949},"。依賴過多，Mock 困難。",{"type":22,"tag":1839,"props":1951,"children":1952},{"align":1817},[1953,1958],{"type":22,"tag":30,"props":1954,"children":1955},{},[1956],{"type":27,"value":1957},"易",{"type":27,"value":1959},"。各個元件可獨立單元測試。",{"type":22,"tag":70,"props":1961,"children":1963},{"id":1962},"技術反思前端-vs-後端思維",[1964],{"type":27,"value":1965},"技術反思：前端 vs 後端思維",{"type":22,"tag":23,"props":1967,"children":1968},{},[1969],{"type":27,"value":1970},"身為前端開發者轉戰後端，可能會覺得這種設計「參數傳來傳去很麻煩」或是「為什麼不直接寫在裡面就好」。但這正是後端開發與前端元件化思維的異曲同工之妙：",{"type":22,"tag":548,"props":1972,"children":1973},{},[1974,2000],{"type":22,"tag":94,"props":1975,"children":1976},{},[1977,1982,1984,1990,1992,1998],{"type":22,"tag":30,"props":1978,"children":1979},{},[1980],{"type":27,"value":1981},"Listener",{"type":27,"value":1983}," 其實就像 React 的 ",{"type":22,"tag":81,"props":1985,"children":1987},{"className":1986},[],[1988],{"type":27,"value":1989},"props.onEvent",{"type":27,"value":1991}," 或 Vue 的 ",{"type":22,"tag":81,"props":1993,"children":1995},{"className":1994},[],[1996],{"type":27,"value":1997},"$emit",{"type":27,"value":1999},"。讓元件只負責發出訊號，而不負責處理後續。",{"type":22,"tag":94,"props":2001,"children":2002},{},[2003,2008,2010,2016,2018,2024],{"type":22,"tag":30,"props":2004,"children":2005},{},[2006],{"type":27,"value":2007},"Dependency Injection (DI)",{"type":27,"value":2009}," 就像是把 ",{"type":22,"tag":81,"props":2011,"children":2013},{"className":2012},[],[2014],{"type":27,"value":2015},"logger",{"type":27,"value":2017}," 或 ",{"type":22,"tag":81,"props":2019,"children":2021},{"className":2020},[],[2022],{"type":27,"value":2023},"config",{"type":27,"value":2025}," 當作 props 傳進元件，讓元件保持純粹，方便測試。",{"type":22,"tag":70,"props":2027,"children":2029},{"id":2028},"總結",[2030],{"type":27,"value":2028},{"type":22,"tag":23,"props":2032,"children":2033},{},[2034,2036,2041,2043,2048,2050,2055,2057,2063],{"type":27,"value":2035},"這次重構展示了即使在業務邏輯強相依（Sequential constraint）的情況下，依然可以透過 ",{"type":22,"tag":30,"props":2037,"children":2038},{},[2039],{"type":27,"value":2040},"Observer Pattern",{"type":27,"value":2042}," 實現程式碼層級的解耦。我們保留了 ",{"type":22,"tag":81,"props":2044,"children":2046},{"className":2045},[],[2047],{"type":27,"value":86},{"type":27,"value":2049}," 作為資料流驅動者，利用 ",{"type":22,"tag":81,"props":2051,"children":2053},{"className":2052},[],[2054],{"type":27,"value":1123},{"type":27,"value":2056}," 陣列保留擴充性，最後透過外層的 ",{"type":22,"tag":81,"props":2058,"children":2060},{"className":2059},[],[2061],{"type":27,"value":2062},"Mediator",{"type":27,"value":2064}," 來確保業務邏輯的執行順序。",{"type":22,"tag":23,"props":2066,"children":2067},{},[2068],{"type":27,"value":2069},"這樣的架構不僅讓目前的程式碼更乾淨，也為未來可能新增的「S3 備份」、「Log 監控」等功能預留了極佳的擴充空間。",{"type":22,"tag":23,"props":2071,"children":2072},{},[2073],{"type":27,"value":2074},"延伸閱讀：",{"type":22,"tag":548,"props":2076,"children":2077},{},[2078],{"type":22,"tag":94,"props":2079,"children":2080},{},[2081,2089],{"type":22,"tag":40,"props":2082,"children":2086},{"href":2083,"rel":2084},"https://www.amazon.com/Design-Patterns-Elements-Reusable-Object-Oriented/dp/0201633612",[2085],"nofollow",[2087],{"type":27,"value":2088},"Design Patterns: Elements of Reusable Object-Oriented Software",{"type":27,"value":2090}," - Gang of Four (Erich Gamma, Richard Helm, Ralph Johnson, John Vlissides) 於 1994 年出版的經典著作，定義了 23 種設計模式。",{"type":22,"tag":2092,"props":2093,"children":2096},"section",{"className":2094,"dataFootnotes":7},[2095],"footnotes",[2097,2104],{"type":22,"tag":70,"props":2098,"children":2101},{"className":2099,"id":44},[2100],"sr-only",[2102],{"type":27,"value":2103},"Reference",{"type":22,"tag":90,"props":2105,"children":2106},{},[2107,2129,2149],{"type":22,"tag":94,"props":2108,"children":2110},{"id":2109},"user-content-fn-1",[2111,2118,2120],{"type":22,"tag":40,"props":2112,"children":2115},{"href":2113,"rel":2114},"https://gameprogrammingpatterns.com/observer.html",[2085],[2116],{"type":27,"value":2117},"Observer Pattern - Game Programming Patterns",{"type":27,"value":2119}," - Observer Pattern 是 Gang of Four 定義的 23 種設計模式之一，屬於行為型模式，定義物件間的一對多依賴關係。 ",{"type":22,"tag":40,"props":2121,"children":2126},{"href":2122,"ariaLabel":2123,"className":2124,"dataFootnoteBackref":7},"#user-content-fnref-1","Back to reference 1",[2125],"data-footnote-backref",[2127],{"type":27,"value":2128},"↩",{"type":22,"tag":94,"props":2130,"children":2132},{"id":2131},"user-content-fn-2",[2133,2140,2142],{"type":22,"tag":40,"props":2134,"children":2137},{"href":2135,"rel":2136},"https://springframework.guru/gang-of-four-design-patterns/mediator-pattern/",[2085],[2138],{"type":27,"value":2139},"Mediator Pattern - Spring Framework Guru",{"type":27,"value":2141}," - Mediator Pattern 透過中介者物件封裝物件間的互動，促進鬆耦合設計。 ",{"type":22,"tag":40,"props":2143,"children":2147},{"href":2144,"ariaLabel":2145,"className":2146,"dataFootnoteBackref":7},"#user-content-fnref-2","Back to reference 2",[2125],[2148],{"type":27,"value":2128},{"type":22,"tag":94,"props":2150,"children":2152},{"id":2151},"user-content-fn-3",[2153,2160,2162],{"type":22,"tag":40,"props":2154,"children":2157},{"href":2155,"rel":2156},"https://en.wikipedia.org/wiki/Single-responsibility_principle",[2085],[2158],{"type":27,"value":2159},"Single-responsibility principle - Wikipedia",{"type":27,"value":2161}," - Robert C. Martin 提出的 SOLID 原則之一，主張一個類別應該只有一個改變的理由。 ",{"type":22,"tag":40,"props":2163,"children":2167},{"href":2164,"ariaLabel":2165,"className":2166,"dataFootnoteBackref":7},"#user-content-fnref-3","Back to reference 3",[2125],[2168],{"type":27,"value":2128},{"type":22,"tag":2170,"props":2171,"children":2172},"style",{},[2173],{"type":27,"value":2174},"html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}",{"title":7,"searchDepth":188,"depth":188,"links":2176},[2177,2178,2182,2183,2184,2185],{"id":72,"depth":188,"text":72},{"id":583,"depth":188,"text":586,"children":2179},[2180,2181],{"id":595,"depth":210,"text":598},{"id":1294,"depth":210,"text":1297},{"id":1797,"depth":188,"text":1797},{"id":1962,"depth":188,"text":1965},{"id":2028,"depth":188,"text":2028},{"id":44,"depth":188,"text":2103},"markdown","content:post:20260112-refactoring-data-flow-with-observer-pattern-typescript.md","content","post/20260112-refactoring-data-flow-with-observer-pattern-typescript.md","md","2026-01-12T08:23:38.000Z","2026-01-14T03:06:11.000Z",{"_path":4,"_dir":5,"_draft":6,"_partial":6,"_locale":7,"title":8,"description":9,"tags":10,"customCreatedAt":11,"createdByAI":12,"readingTime":2194,"body":2195,"_type":2186,"_id":2187,"_source":2188,"_file":2189,"_extension":2190,"createdAt":2191,"updatedAt":2192},{"text":14,"minutes":15,"time":16,"words":17},{"type":19,"children":2196,"toc":4004},[2197,2227,2231,2241,2276,2299,2602,2606,2633,2637,2641,2645,2665,2669,2802,2812,3000,3010,3270,3274,3289,3711,3715,3716,3844,3848,3852,3895,3899,3926,3930,3934,3946,4000],{"type":22,"tag":23,"props":2198,"children":2199},{},[2200,2201,2205,2213,2214,2218,2226],{"type":27,"value":28},{"type":22,"tag":30,"props":2202,"children":2203},{},[2204],{"type":27,"value":34},{"type":22,"tag":36,"props":2206,"children":2207},{},[2208],{"type":22,"tag":40,"props":2209,"children":2211},{"href":42,"ariaDescribedBy":2210,"dataFootnoteRef":7,"id":45},[44],[2212],{"type":27,"value":48},{"type":27,"value":50},{"type":22,"tag":30,"props":2215,"children":2216},{},[2217],{"type":27,"value":55},{"type":22,"tag":36,"props":2219,"children":2220},{},[2221],{"type":22,"tag":40,"props":2222,"children":2224},{"href":61,"ariaDescribedBy":2223,"dataFootnoteRef":7,"id":63},[44],[2225],{"type":27,"value":66},{"type":27,"value":68},{"type":22,"tag":70,"props":2228,"children":2229},{"id":72},[2230],{"type":27,"value":72},{"type":22,"tag":23,"props":2232,"children":2233},{},[2234,2235,2240],{"type":27,"value":79},{"type":22,"tag":81,"props":2236,"children":2238},{"className":2237},[],[2239],{"type":27,"value":86},{"type":27,"value":88},{"type":22,"tag":90,"props":2242,"children":2243},{},[2244,2252,2260,2268],{"type":22,"tag":94,"props":2245,"children":2246},{},[2247,2251],{"type":22,"tag":30,"props":2248,"children":2249},{},[2250],{"type":27,"value":101},{"type":27,"value":103},{"type":22,"tag":94,"props":2253,"children":2254},{},[2255,2259],{"type":22,"tag":30,"props":2256,"children":2257},{},[2258],{"type":27,"value":111},{"type":27,"value":113},{"type":22,"tag":94,"props":2261,"children":2262},{},[2263,2267],{"type":22,"tag":30,"props":2264,"children":2265},{},[2266],{"type":27,"value":121},{"type":27,"value":123},{"type":22,"tag":94,"props":2269,"children":2270},{},[2271,2275],{"type":22,"tag":30,"props":2272,"children":2273},{},[2274],{"type":27,"value":131},{"type":27,"value":133},{"type":22,"tag":23,"props":2277,"children":2278},{},[2279,2280,2285,2286,2290,2298],{"type":27,"value":138},{"type":22,"tag":81,"props":2281,"children":2283},{"className":2282},[],[2284],{"type":27,"value":86},{"type":27,"value":145},{"type":22,"tag":30,"props":2287,"children":2288},{},[2289],{"type":27,"value":150},{"type":22,"tag":36,"props":2291,"children":2292},{},[2293],{"type":22,"tag":40,"props":2294,"children":2296},{"href":156,"ariaDescribedBy":2295,"dataFootnoteRef":7,"id":158},[44],[2297],{"type":27,"value":161},{"type":27,"value":163},{"type":22,"tag":165,"props":2300,"children":2301},{"className":167,"code":168,"language":169,"meta":7,"style":7},[2302],{"type":22,"tag":81,"props":2303,"children":2304},{"__ignoreMap":7},[2305,2312,2327,2338,2345,2384,2391,2418,2461,2468,2475,2502,2521,2528,2535,2542,2549,2588,2595],{"type":22,"tag":175,"props":2306,"children":2307},{"class":177,"line":178},[2308],{"type":22,"tag":175,"props":2309,"children":2310},{"style":182},[2311],{"type":27,"value":185},{"type":22,"tag":175,"props":2313,"children":2314},{"class":177,"line":188},[2315,2319,2323],{"type":22,"tag":175,"props":2316,"children":2317},{"style":192},[2318],{"type":27,"value":195},{"type":22,"tag":175,"props":2320,"children":2321},{"style":198},[2322],{"type":27,"value":201},{"type":22,"tag":175,"props":2324,"children":2325},{"style":204},[2326],{"type":27,"value":207},{"type":22,"tag":175,"props":2328,"children":2329},{"class":177,"line":210},[2330,2334],{"type":22,"tag":175,"props":2331,"children":2332},{"style":214},[2333],{"type":27,"value":217},{"type":22,"tag":175,"props":2335,"children":2336},{"style":204},[2337],{"type":27,"value":222},{"type":22,"tag":175,"props":2339,"children":2340},{"class":177,"line":225},[2341],{"type":22,"tag":175,"props":2342,"children":2343},{"style":182},[2344],{"type":27,"value":231},{"type":22,"tag":175,"props":2346,"children":2347},{"class":177,"line":234},[2348,2352,2356,2360,2364,2368,2372,2376,2380],{"type":22,"tag":175,"props":2349,"children":2350},{"style":198},[2351],{"type":27,"value":240},{"type":22,"tag":175,"props":2353,"children":2354},{"style":204},[2355],{"type":27,"value":245},{"type":22,"tag":175,"props":2357,"children":2358},{"style":214},[2359],{"type":27,"value":250},{"type":22,"tag":175,"props":2361,"children":2362},{"style":204},[2363],{"type":27,"value":255},{"type":22,"tag":175,"props":2365,"children":2366},{"style":258},[2367],{"type":27,"value":261},{"type":22,"tag":175,"props":2369,"children":2370},{"style":204},[2371],{"type":27,"value":266},{"type":22,"tag":175,"props":2373,"children":2374},{"style":269},[2375],{"type":27,"value":272},{"type":22,"tag":175,"props":2377,"children":2378},{"style":192},[2379],{"type":27,"value":277},{"type":22,"tag":175,"props":2381,"children":2382},{"style":204},[2383],{"type":27,"value":207},{"type":22,"tag":175,"props":2385,"children":2386},{"class":177,"line":284},[2387],{"type":22,"tag":175,"props":2388,"children":2389},{"style":182},[2390],{"type":27,"value":290},{"type":22,"tag":175,"props":2392,"children":2393},{"class":177,"line":293},[2394,2398,2402,2406,2410,2414],{"type":22,"tag":175,"props":2395,"children":2396},{"style":198},[2397],{"type":27,"value":299},{"type":22,"tag":175,"props":2399,"children":2400},{"style":204},[2401],{"type":27,"value":245},{"type":22,"tag":175,"props":2403,"children":2404},{"style":214},[2405],{"type":27,"value":308},{"type":22,"tag":175,"props":2407,"children":2408},{"style":204},[2409],{"type":27,"value":255},{"type":22,"tag":175,"props":2411,"children":2412},{"style":315},[2413],{"type":27,"value":272},{"type":22,"tag":175,"props":2415,"children":2416},{"style":204},[2417],{"type":27,"value":322},{"type":22,"tag":175,"props":2419,"children":2420},{"class":177,"line":325},[2421,2425,2429,2433,2437,2441,2445,2449,2453,2457],{"type":22,"tag":175,"props":2422,"children":2423},{"style":192},[2424],{"type":27,"value":331},{"type":22,"tag":175,"props":2426,"children":2427},{"style":204},[2428],{"type":27,"value":336},{"type":22,"tag":175,"props":2430,"children":2431},{"style":198},[2432],{"type":27,"value":341},{"type":22,"tag":175,"props":2434,"children":2435},{"style":204},[2436],{"type":27,"value":245},{"type":22,"tag":175,"props":2438,"children":2439},{"style":315},[2440],{"type":27,"value":350},{"type":22,"tag":175,"props":2442,"children":2443},{"style":204},[2444],{"type":27,"value":355},{"type":22,"tag":175,"props":2446,"children":2447},{"style":214},[2448],{"type":27,"value":360},{"type":22,"tag":175,"props":2450,"children":2451},{"style":204},[2452],{"type":27,"value":255},{"type":22,"tag":175,"props":2454,"children":2455},{"style":315},[2456],{"type":27,"value":341},{"type":22,"tag":175,"props":2458,"children":2459},{"style":204},[2460],{"type":27,"value":322},{"type":22,"tag":175,"props":2462,"children":2463},{"class":177,"line":375},[2464],{"type":22,"tag":175,"props":2465,"children":2466},{"emptyLinePlaceholder":12},[2467],{"type":27,"value":381},{"type":22,"tag":175,"props":2469,"children":2470},{"class":177,"line":384},[2471],{"type":22,"tag":175,"props":2472,"children":2473},{"style":182},[2474],{"type":27,"value":390},{"type":22,"tag":175,"props":2476,"children":2477},{"class":177,"line":393},[2478,2482,2486,2490,2494,2498],{"type":22,"tag":175,"props":2479,"children":2480},{"style":192},[2481],{"type":27,"value":331},{"type":22,"tag":175,"props":2483,"children":2484},{"style":204},[2485],{"type":27,"value":336},{"type":22,"tag":175,"props":2487,"children":2488},{"style":214},[2489],{"type":27,"value":407},{"type":22,"tag":175,"props":2491,"children":2492},{"style":204},[2493],{"type":27,"value":255},{"type":22,"tag":175,"props":2495,"children":2496},{"style":315},[2497],{"type":27,"value":272},{"type":22,"tag":175,"props":2499,"children":2500},{"style":204},[2501],{"type":27,"value":420},{"type":22,"tag":175,"props":2503,"children":2504},{"class":177,"line":423},[2505,2509,2513,2517],{"type":22,"tag":175,"props":2506,"children":2507},{"style":214},[2508],{"type":27,"value":429},{"type":22,"tag":175,"props":2510,"children":2511},{"style":204},[2512],{"type":27,"value":255},{"type":22,"tag":175,"props":2514,"children":2515},{"style":315},[2516],{"type":27,"value":272},{"type":22,"tag":175,"props":2518,"children":2519},{"style":204},[2520],{"type":27,"value":322},{"type":22,"tag":175,"props":2522,"children":2523},{"class":177,"line":444},[2524],{"type":22,"tag":175,"props":2525,"children":2526},{"style":204},[2527],{"type":27,"value":450},{"type":22,"tag":175,"props":2529,"children":2530},{"class":177,"line":453},[2531],{"type":22,"tag":175,"props":2532,"children":2533},{"style":204},[2534],{"type":27,"value":459},{"type":22,"tag":175,"props":2536,"children":2537},{"class":177,"line":462},[2538],{"type":22,"tag":175,"props":2539,"children":2540},{"emptyLinePlaceholder":12},[2541],{"type":27,"value":381},{"type":22,"tag":175,"props":2543,"children":2544},{"class":177,"line":470},[2545],{"type":22,"tag":175,"props":2546,"children":2547},{"style":182},[2548],{"type":27,"value":476},{"type":22,"tag":175,"props":2550,"children":2551},{"class":177,"line":479},[2552,2556,2560,2564,2568,2572,2576,2580,2584],{"type":22,"tag":175,"props":2553,"children":2554},{"style":192},[2555],{"type":27,"value":485},{"type":22,"tag":175,"props":2557,"children":2558},{"style":198},[2559],{"type":27,"value":490},{"type":22,"tag":175,"props":2561,"children":2562},{"style":204},[2563],{"type":27,"value":245},{"type":22,"tag":175,"props":2565,"children":2566},{"style":214},[2567],{"type":27,"value":499},{"type":22,"tag":175,"props":2569,"children":2570},{"style":204},[2571],{"type":27,"value":504},{"type":22,"tag":175,"props":2573,"children":2574},{"style":315},[2575],{"type":27,"value":509},{"type":22,"tag":175,"props":2577,"children":2578},{"style":204},[2579],{"type":27,"value":266},{"type":22,"tag":175,"props":2581,"children":2582},{"style":315},[2583],{"type":27,"value":518},{"type":22,"tag":175,"props":2585,"children":2586},{"style":204},[2587],{"type":27,"value":523},{"type":22,"tag":175,"props":2589,"children":2590},{"class":177,"line":526},[2591],{"type":22,"tag":175,"props":2592,"children":2593},{"style":204},[2594],{"type":27,"value":532},{"type":22,"tag":175,"props":2596,"children":2597},{"class":177,"line":535},[2598],{"type":22,"tag":175,"props":2599,"children":2600},{"style":204},[2601],{"type":27,"value":541},{"type":22,"tag":23,"props":2603,"children":2604},{},[2605],{"type":27,"value":546},{"type":22,"tag":548,"props":2607,"children":2608},{},[2609,2617,2625],{"type":22,"tag":94,"props":2610,"children":2611},{},[2612,2616],{"type":22,"tag":30,"props":2613,"children":2614},{},[2615],{"type":27,"value":558},{"type":27,"value":560},{"type":22,"tag":94,"props":2618,"children":2619},{},[2620,2624],{"type":22,"tag":30,"props":2621,"children":2622},{},[2623],{"type":27,"value":568},{"type":27,"value":570},{"type":22,"tag":94,"props":2626,"children":2627},{},[2628,2632],{"type":22,"tag":30,"props":2629,"children":2630},{},[2631],{"type":27,"value":578},{"type":27,"value":580},{"type":22,"tag":70,"props":2634,"children":2635},{"id":583},[2636],{"type":27,"value":586},{"type":22,"tag":23,"props":2638,"children":2639},{},[2640],{"type":27,"value":591},{"type":22,"tag":593,"props":2642,"children":2643},{"id":595},[2644],{"type":27,"value":598},{"type":22,"tag":23,"props":2646,"children":2647},{},[2648,2649,2654,2655,2659,2660,2664],{"type":27,"value":603},{"type":22,"tag":81,"props":2650,"children":2652},{"className":2651},[],[2653],{"type":27,"value":86},{"type":27,"value":610},{"type":22,"tag":30,"props":2656,"children":2657},{},[2658],{"type":27,"value":615},{"type":27,"value":617},{"type":22,"tag":30,"props":2661,"children":2662},{},[2663],{"type":27,"value":622},{"type":27,"value":624},{"type":22,"tag":23,"props":2666,"children":2667},{},[2668],{"type":27,"value":629},{"type":22,"tag":165,"props":2670,"children":2671},{"className":167,"code":632,"language":169,"meta":7,"style":7},[2672],{"type":22,"tag":81,"props":2673,"children":2674},{"__ignoreMap":7},[2675,2682,2701,2732,2795],{"type":22,"tag":175,"props":2676,"children":2677},{"class":177,"line":178},[2678],{"type":22,"tag":175,"props":2679,"children":2680},{"style":182},[2681],{"type":27,"value":644},{"type":22,"tag":175,"props":2683,"children":2684},{"class":177,"line":188},[2685,2689,2693,2697],{"type":22,"tag":175,"props":2686,"children":2687},{"style":192},[2688],{"type":27,"value":652},{"type":22,"tag":175,"props":2690,"children":2691},{"style":192},[2692],{"type":27,"value":657},{"type":22,"tag":175,"props":2694,"children":2695},{"style":198},[2696],{"type":27,"value":662},{"type":22,"tag":175,"props":2698,"children":2699},{"style":204},[2700],{"type":27,"value":207},{"type":22,"tag":175,"props":2702,"children":2703},{"class":177,"line":210},[2704,2708,2712,2716,2720,2724,2728],{"type":22,"tag":175,"props":2705,"children":2706},{"style":214},[2707],{"type":27,"value":674},{"type":22,"tag":175,"props":2709,"children":2710},{"style":204},[2711],{"type":27,"value":255},{"type":22,"tag":175,"props":2713,"children":2714},{"style":269},[2715],{"type":27,"value":683},{"type":22,"tag":175,"props":2717,"children":2718},{"style":204},[2719],{"type":27,"value":688},{"type":22,"tag":175,"props":2721,"children":2722},{"style":198},[2723],{"type":27,"value":693},{"type":22,"tag":175,"props":2725,"children":2726},{"style":204},[2727],{"type":27,"value":698},{"type":22,"tag":175,"props":2729,"children":2730},{"style":198},[2731],{"type":27,"value":703},{"type":22,"tag":175,"props":2733,"children":2734},{"class":177,"line":225},[2735,2739,2743,2747,2751,2755,2759,2763,2767,2771,2775,2779,2783,2787,2791],{"type":22,"tag":175,"props":2736,"children":2737},{"style":214},[2738],{"type":27,"value":711},{"type":22,"tag":175,"props":2740,"children":2741},{"style":204},[2742],{"type":27,"value":255},{"type":22,"tag":175,"props":2744,"children":2745},{"style":269},[2746],{"type":27,"value":272},{"type":22,"tag":175,"props":2748,"children":2749},{"style":204},[2750],{"type":27,"value":688},{"type":22,"tag":175,"props":2752,"children":2753},{"style":198},[2754],{"type":27,"value":728},{"type":22,"tag":175,"props":2756,"children":2757},{"style":204},[2758],{"type":27,"value":733},{"type":22,"tag":175,"props":2760,"children":2761},{"style":198},[2762],{"type":27,"value":738},{"type":22,"tag":175,"props":2764,"children":2765},{"style":204},[2766],{"type":27,"value":266},{"type":22,"tag":175,"props":2768,"children":2769},{"style":198},[2770],{"type":27,"value":747},{"type":22,"tag":175,"props":2772,"children":2773},{"style":204},[2774],{"type":27,"value":752},{"type":22,"tag":175,"props":2776,"children":2777},{"style":269},[2778],{"type":27,"value":757},{"type":22,"tag":175,"props":2780,"children":2781},{"style":204},[2782],{"type":27,"value":688},{"type":22,"tag":175,"props":2784,"children":2785},{"style":198},[2786],{"type":27,"value":766},{"type":22,"tag":175,"props":2788,"children":2789},{"style":204},[2790],{"type":27,"value":698},{"type":22,"tag":175,"props":2792,"children":2793},{"style":198},[2794],{"type":27,"value":703},{"type":22,"tag":175,"props":2796,"children":2797},{"class":177,"line":234},[2798],{"type":22,"tag":175,"props":2799,"children":2800},{"style":204},[2801],{"type":27,"value":541},{"type":22,"tag":23,"props":2803,"children":2804},{},[2805,2806,2811],{"type":27,"value":786},{"type":22,"tag":81,"props":2807,"children":2809},{"className":2808},[],[2810],{"type":27,"value":792},{"type":27,"value":794},{"type":22,"tag":165,"props":2813,"children":2814},{"className":167,"code":797,"language":169,"meta":7,"style":7},[2815],{"type":22,"tag":81,"props":2816,"children":2817},{"__ignoreMap":7},[2818,2825,2852,2895,2902,2937,2972,2979,2986,2993],{"type":22,"tag":175,"props":2819,"children":2820},{"class":177,"line":178},[2821],{"type":22,"tag":175,"props":2822,"children":2823},{"style":182},[2824],{"type":27,"value":809},{"type":22,"tag":175,"props":2826,"children":2827},{"class":177,"line":188},[2828,2832,2836,2840,2844,2848],{"type":22,"tag":175,"props":2829,"children":2830},{"style":192},[2831],{"type":27,"value":652},{"type":22,"tag":175,"props":2833,"children":2834},{"style":192},[2835],{"type":27,"value":821},{"type":22,"tag":175,"props":2837,"children":2838},{"style":198},[2839],{"type":27,"value":826},{"type":22,"tag":175,"props":2841,"children":2842},{"style":192},[2843],{"type":27,"value":831},{"type":22,"tag":175,"props":2845,"children":2846},{"style":198},[2847],{"type":27,"value":662},{"type":22,"tag":175,"props":2849,"children":2850},{"style":204},[2851],{"type":27,"value":207},{"type":22,"tag":175,"props":2853,"children":2854},{"class":177,"line":210},[2855,2859,2863,2867,2871,2875,2879,2883,2887,2891],{"type":22,"tag":175,"props":2856,"children":2857},{"style":214},[2858],{"type":27,"value":711},{"type":22,"tag":175,"props":2860,"children":2861},{"style":204},[2862],{"type":27,"value":255},{"type":22,"tag":175,"props":2864,"children":2865},{"style":269},[2866],{"type":27,"value":272},{"type":22,"tag":175,"props":2868,"children":2869},{"style":204},[2870],{"type":27,"value":688},{"type":22,"tag":175,"props":2872,"children":2873},{"style":198},[2874],{"type":27,"value":747},{"type":22,"tag":175,"props":2876,"children":2877},{"style":204},[2878],{"type":27,"value":266},{"type":22,"tag":175,"props":2880,"children":2881},{"style":269},[2882],{"type":27,"value":871},{"type":22,"tag":175,"props":2884,"children":2885},{"style":204},[2886],{"type":27,"value":688},{"type":22,"tag":175,"props":2888,"children":2889},{"style":198},[2890],{"type":27,"value":747},{"type":22,"tag":175,"props":2892,"children":2893},{"style":204},[2894],{"type":27,"value":884},{"type":22,"tag":175,"props":2896,"children":2897},{"class":177,"line":225},[2898],{"type":22,"tag":175,"props":2899,"children":2900},{"style":182},[2901],{"type":27,"value":892},{"type":22,"tag":175,"props":2903,"children":2904},{"class":177,"line":234},[2905,2909,2913,2917,2921,2925,2929,2933],{"type":22,"tag":175,"props":2906,"children":2907},{"style":192},[2908],{"type":27,"value":900},{"type":22,"tag":175,"props":2910,"children":2911},{"style":204},[2912],{"type":27,"value":336},{"type":22,"tag":175,"props":2914,"children":2915},{"style":198},[2916],{"type":27,"value":909},{"type":22,"tag":175,"props":2918,"children":2919},{"style":204},[2920],{"type":27,"value":245},{"type":22,"tag":175,"props":2922,"children":2923},{"style":214},[2924],{"type":27,"value":918},{"type":22,"tag":175,"props":2926,"children":2927},{"style":204},[2928],{"type":27,"value":255},{"type":22,"tag":175,"props":2930,"children":2931},{"style":315},[2932],{"type":27,"value":272},{"type":22,"tag":175,"props":2934,"children":2935},{"style":204},[2936],{"type":27,"value":420},{"type":22,"tag":175,"props":2938,"children":2939},{"class":177,"line":284},[2940,2944,2948,2952,2956,2960,2964,2968],{"type":22,"tag":175,"props":2941,"children":2942},{"style":198},[2943],{"type":27,"value":938},{"type":22,"tag":175,"props":2945,"children":2946},{"style":204},[2947],{"type":27,"value":245},{"type":22,"tag":175,"props":2949,"children":2950},{"style":214},[2951],{"type":27,"value":947},{"type":22,"tag":175,"props":2953,"children":2954},{"style":204},[2955],{"type":27,"value":255},{"type":22,"tag":175,"props":2957,"children":2958},{"style":315},[2959],{"type":27,"value":272},{"type":22,"tag":175,"props":2961,"children":2962},{"style":204},[2963],{"type":27,"value":266},{"type":22,"tag":175,"props":2965,"children":2966},{"style":315},[2967],{"type":27,"value":871},{"type":22,"tag":175,"props":2969,"children":2970},{"style":204},[2971],{"type":27,"value":322},{"type":22,"tag":175,"props":2973,"children":2974},{"class":177,"line":293},[2975],{"type":22,"tag":175,"props":2976,"children":2977},{"style":204},[2978],{"type":27,"value":975},{"type":22,"tag":175,"props":2980,"children":2981},{"class":177,"line":325},[2982],{"type":22,"tag":175,"props":2983,"children":2984},{"style":204},[2985],{"type":27,"value":983},{"type":22,"tag":175,"props":2987,"children":2988},{"class":177,"line":375},[2989],{"type":22,"tag":175,"props":2990,"children":2991},{"style":182},[2992],{"type":27,"value":991},{"type":22,"tag":175,"props":2994,"children":2995},{"class":177,"line":384},[2996],{"type":22,"tag":175,"props":2997,"children":2998},{"style":204},[2999],{"type":27,"value":541},{"type":22,"tag":23,"props":3001,"children":3002},{},[3003,3004,3009],{"type":27,"value":1003},{"type":22,"tag":81,"props":3005,"children":3007},{"className":3006},[],[3008],{"type":27,"value":86},{"type":27,"value":1010},{"type":22,"tag":165,"props":3011,"children":3012},{"className":167,"code":1013,"language":169,"meta":7,"style":7},[3013],{"type":22,"tag":81,"props":3014,"children":3015},{"__ignoreMap":7},[3016,3031,3062,3069,3096,3131,3138,3145,3168,3175,3182,3189,3256,3263],{"type":22,"tag":175,"props":3017,"children":3018},{"class":177,"line":178},[3019,3023,3027],{"type":22,"tag":175,"props":3020,"children":3021},{"style":192},[3022],{"type":27,"value":195},{"type":22,"tag":175,"props":3024,"children":3025},{"style":198},[3026],{"type":27,"value":201},{"type":22,"tag":175,"props":3028,"children":3029},{"style":204},[3030],{"type":27,"value":207},{"type":22,"tag":175,"props":3032,"children":3033},{"class":177,"line":188},[3034,3038,3042,3046,3050,3054,3058],{"type":22,"tag":175,"props":3035,"children":3036},{"style":192},[3037],{"type":27,"value":1040},{"type":22,"tag":175,"props":3039,"children":3040},{"style":315},[3041],{"type":27,"value":1045},{"type":22,"tag":175,"props":3043,"children":3044},{"style":204},[3045],{"type":27,"value":688},{"type":22,"tag":175,"props":3047,"children":3048},{"style":198},[3049],{"type":27,"value":1054},{"type":22,"tag":175,"props":3051,"children":3052},{"style":204},[3053],{"type":27,"value":1059},{"type":22,"tag":175,"props":3055,"children":3056},{"style":1062},[3057],{"type":27,"value":1065},{"type":22,"tag":175,"props":3059,"children":3060},{"style":204},[3061],{"type":27,"value":1070},{"type":22,"tag":175,"props":3063,"children":3064},{"class":177,"line":210},[3065],{"type":22,"tag":175,"props":3066,"children":3067},{"emptyLinePlaceholder":12},[3068],{"type":27,"value":381},{"type":22,"tag":175,"props":3070,"children":3071},{"class":177,"line":225},[3072,3076,3080,3084,3088,3092],{"type":22,"tag":175,"props":3073,"children":3074},{"style":214},[3075],{"type":27,"value":1085},{"type":22,"tag":175,"props":3077,"children":3078},{"style":204},[3079],{"type":27,"value":255},{"type":22,"tag":175,"props":3081,"children":3082},{"style":269},[3083],{"type":27,"value":1094},{"type":22,"tag":175,"props":3085,"children":3086},{"style":204},[3087],{"type":27,"value":688},{"type":22,"tag":175,"props":3089,"children":3090},{"style":198},[3091],{"type":27,"value":1054},{"type":22,"tag":175,"props":3093,"children":3094},{"style":204},[3095],{"type":27,"value":884},{"type":22,"tag":175,"props":3097,"children":3098},{"class":177,"line":234},[3099,3103,3107,3111,3115,3119,3123,3127],{"type":22,"tag":175,"props":3100,"children":3101},{"style":198},[3102],{"type":27,"value":1114},{"type":22,"tag":175,"props":3104,"children":3105},{"style":204},[3106],{"type":27,"value":245},{"type":22,"tag":175,"props":3108,"children":3109},{"style":198},[3110],{"type":27,"value":1123},{"type":22,"tag":175,"props":3112,"children":3113},{"style":204},[3114],{"type":27,"value":245},{"type":22,"tag":175,"props":3116,"children":3117},{"style":214},[3118],{"type":27,"value":308},{"type":22,"tag":175,"props":3120,"children":3121},{"style":204},[3122],{"type":27,"value":255},{"type":22,"tag":175,"props":3124,"children":3125},{"style":315},[3126],{"type":27,"value":1094},{"type":22,"tag":175,"props":3128,"children":3129},{"style":204},[3130],{"type":27,"value":322},{"type":22,"tag":175,"props":3132,"children":3133},{"class":177,"line":284},[3134],{"type":22,"tag":175,"props":3135,"children":3136},{"style":204},[3137],{"type":27,"value":983},{"type":22,"tag":175,"props":3139,"children":3140},{"class":177,"line":293},[3141],{"type":22,"tag":175,"props":3142,"children":3143},{"emptyLinePlaceholder":12},[3144],{"type":27,"value":381},{"type":22,"tag":175,"props":3146,"children":3147},{"class":177,"line":325},[3148,3152,3156,3160,3164],{"type":22,"tag":175,"props":3149,"children":3150},{"style":192},[3151],{"type":27,"value":1040},{"type":22,"tag":175,"props":3153,"children":3154},{"style":214},[3155],{"type":27,"value":1169},{"type":22,"tag":175,"props":3157,"children":3158},{"style":204},[3159],{"type":27,"value":255},{"type":22,"tag":175,"props":3161,"children":3162},{"style":269},[3163],{"type":27,"value":272},{"type":22,"tag":175,"props":3165,"children":3166},{"style":204},[3167],{"type":27,"value":884},{"type":22,"tag":175,"props":3169,"children":3170},{"class":177,"line":375},[3171],{"type":22,"tag":175,"props":3172,"children":3173},{"style":182},[3174],{"type":27,"value":1189},{"type":22,"tag":175,"props":3176,"children":3177},{"class":177,"line":384},[3178],{"type":22,"tag":175,"props":3179,"children":3180},{"style":204},[3181],{"type":27,"value":1197},{"type":22,"tag":175,"props":3183,"children":3184},{"class":177,"line":393},[3185],{"type":22,"tag":175,"props":3186,"children":3187},{"style":182},[3188],{"type":27,"value":1205},{"type":22,"tag":175,"props":3190,"children":3191},{"class":177,"line":423},[3192,3196,3200,3204,3208,3212,3216,3220,3224,3228,3232,3236,3240,3244,3248,3252],{"type":22,"tag":175,"props":3193,"children":3194},{"style":198},[3195],{"type":27,"value":1114},{"type":22,"tag":175,"props":3197,"children":3198},{"style":204},[3199],{"type":27,"value":245},{"type":22,"tag":175,"props":3201,"children":3202},{"style":198},[3203],{"type":27,"value":1123},{"type":22,"tag":175,"props":3205,"children":3206},{"style":204},[3207],{"type":27,"value":245},{"type":22,"tag":175,"props":3209,"children":3210},{"style":214},[3211],{"type":27,"value":1229},{"type":22,"tag":175,"props":3213,"children":3214},{"style":204},[3215],{"type":27,"value":255},{"type":22,"tag":175,"props":3217,"children":3218},{"style":269},[3219],{"type":27,"value":1238},{"type":22,"tag":175,"props":3221,"children":3222},{"style":192},[3223],{"type":27,"value":277},{"type":22,"tag":175,"props":3225,"children":3226},{"style":198},[3227],{"type":27,"value":1247},{"type":22,"tag":175,"props":3229,"children":3230},{"style":204},[3231],{"type":27,"value":245},{"type":22,"tag":175,"props":3233,"children":3234},{"style":214},[3235],{"type":27,"value":1256},{"type":22,"tag":175,"props":3237,"children":3238},{"style":204},[3239],{"type":27,"value":255},{"type":22,"tag":175,"props":3241,"children":3242},{"style":315},[3243],{"type":27,"value":272},{"type":22,"tag":175,"props":3245,"children":3246},{"style":204},[3247],{"type":27,"value":266},{"type":22,"tag":175,"props":3249,"children":3250},{"style":315},[3251],{"type":27,"value":871},{"type":22,"tag":175,"props":3253,"children":3254},{"style":204},[3255],{"type":27,"value":1277},{"type":22,"tag":175,"props":3257,"children":3258},{"class":177,"line":444},[3259],{"type":22,"tag":175,"props":3260,"children":3261},{"style":204},[3262],{"type":27,"value":983},{"type":22,"tag":175,"props":3264,"children":3265},{"class":177,"line":453},[3266],{"type":22,"tag":175,"props":3267,"children":3268},{"style":204},[3269],{"type":27,"value":541},{"type":22,"tag":593,"props":3271,"children":3272},{"id":1294},[3273],{"type":27,"value":1297},{"type":22,"tag":23,"props":3275,"children":3276},{},[3277,3278,3282,3283,3288],{"type":27,"value":1302},{"type":22,"tag":30,"props":3279,"children":3280},{},[3281],{"type":27,"value":1307},{"type":27,"value":1309},{"type":22,"tag":81,"props":3284,"children":3286},{"className":3285},[],[3287],{"type":27,"value":1315},{"type":27,"value":1317},{"type":22,"tag":165,"props":3290,"children":3291},{"className":167,"code":1320,"language":169,"meta":7,"style":7},[3292],{"type":22,"tag":81,"props":3293,"children":3294},{"__ignoreMap":7},[3295,3310,3325,3332,3359,3386,3393,3400,3427,3434,3445,3452,3475,3482,3489,3496,3531,3538,3573,3612,3619,3626,3649,3656,3675,3690,3697,3704],{"type":22,"tag":175,"props":3296,"children":3297},{"class":177,"line":178},[3298,3302,3306],{"type":22,"tag":175,"props":3299,"children":3300},{"style":192},[3301],{"type":27,"value":195},{"type":22,"tag":175,"props":3303,"children":3304},{"style":198},[3305],{"type":27,"value":1336},{"type":22,"tag":175,"props":3307,"children":3308},{"style":204},[3309],{"type":27,"value":207},{"type":22,"tag":175,"props":3311,"children":3312},{"class":177,"line":188},[3313,3317,3321],{"type":22,"tag":175,"props":3314,"children":3315},{"style":192},[3316],{"type":27,"value":1348},{"type":22,"tag":175,"props":3318,"children":3319},{"style":214},[3320],{"type":27,"value":1353},{"type":22,"tag":175,"props":3322,"children":3323},{"style":204},[3324],{"type":27,"value":222},{"type":22,"tag":175,"props":3326,"children":3327},{"class":177,"line":210},[3328],{"type":22,"tag":175,"props":3329,"children":3330},{"style":182},[3331],{"type":27,"value":1365},{"type":22,"tag":175,"props":3333,"children":3334},{"class":177,"line":225},[3335,3339,3343,3347,3351,3355],{"type":22,"tag":175,"props":3336,"children":3337},{"style":192},[3338],{"type":27,"value":1373},{"type":22,"tag":175,"props":3340,"children":3341},{"style":198},[3342],{"type":27,"value":1378},{"type":22,"tag":175,"props":3344,"children":3345},{"style":1062},[3346],{"type":27,"value":1383},{"type":22,"tag":175,"props":3348,"children":3349},{"style":192},[3350],{"type":27,"value":1388},{"type":22,"tag":175,"props":3352,"children":3353},{"style":214},[3354],{"type":27,"value":201},{"type":22,"tag":175,"props":3356,"children":3357},{"style":204},[3358],{"type":27,"value":1397},{"type":22,"tag":175,"props":3360,"children":3361},{"class":177,"line":234},[3362,3366,3370,3374,3378,3382],{"type":22,"tag":175,"props":3363,"children":3364},{"style":192},[3365],{"type":27,"value":1373},{"type":22,"tag":175,"props":3367,"children":3368},{"style":198},[3369],{"type":27,"value":1409},{"type":22,"tag":175,"props":3371,"children":3372},{"style":1062},[3373],{"type":27,"value":1383},{"type":22,"tag":175,"props":3375,"children":3376},{"style":192},[3377],{"type":27,"value":1388},{"type":22,"tag":175,"props":3379,"children":3380},{"style":214},[3381],{"type":27,"value":826},{"type":22,"tag":175,"props":3383,"children":3384},{"style":204},[3385],{"type":27,"value":1397},{"type":22,"tag":175,"props":3387,"children":3388},{"class":177,"line":284},[3389],{"type":22,"tag":175,"props":3390,"children":3391},{"emptyLinePlaceholder":12},[3392],{"type":27,"value":381},{"type":22,"tag":175,"props":3394,"children":3395},{"class":177,"line":293},[3396],{"type":22,"tag":175,"props":3397,"children":3398},{"style":182},[3399],{"type":27,"value":1440},{"type":22,"tag":175,"props":3401,"children":3402},{"class":177,"line":325},[3403,3407,3411,3415,3419,3423],{"type":22,"tag":175,"props":3404,"children":3405},{"style":198},[3406],{"type":27,"value":1448},{"type":22,"tag":175,"props":3408,"children":3409},{"style":204},[3410],{"type":27,"value":245},{"type":22,"tag":175,"props":3412,"children":3413},{"style":214},[3414],{"type":27,"value":1457},{"type":22,"tag":175,"props":3416,"children":3417},{"style":204},[3418],{"type":27,"value":255},{"type":22,"tag":175,"props":3420,"children":3421},{"style":315},[3422],{"type":27,"value":1466},{"type":22,"tag":175,"props":3424,"children":3425},{"style":204},[3426],{"type":27,"value":322},{"type":22,"tag":175,"props":3428,"children":3429},{"class":177,"line":375},[3430],{"type":22,"tag":175,"props":3431,"children":3432},{"emptyLinePlaceholder":12},[3433],{"type":27,"value":381},{"type":22,"tag":175,"props":3435,"children":3436},{"class":177,"line":384},[3437,3441],{"type":22,"tag":175,"props":3438,"children":3439},{"style":192},[3440],{"type":27,"value":1485},{"type":22,"tag":175,"props":3442,"children":3443},{"style":204},[3444],{"type":27,"value":207},{"type":22,"tag":175,"props":3446,"children":3447},{"class":177,"line":393},[3448],{"type":22,"tag":175,"props":3449,"children":3450},{"style":182},[3451],{"type":27,"value":1497},{"type":22,"tag":175,"props":3453,"children":3454},{"class":177,"line":423},[3455,3459,3463,3467,3471],{"type":22,"tag":175,"props":3456,"children":3457},{"style":192},[3458],{"type":27,"value":1505},{"type":22,"tag":175,"props":3460,"children":3461},{"style":198},[3462],{"type":27,"value":1378},{"type":22,"tag":175,"props":3464,"children":3465},{"style":204},[3466],{"type":27,"value":245},{"type":22,"tag":175,"props":3468,"children":3469},{"style":214},[3470],{"type":27,"value":1518},{"type":22,"tag":175,"props":3472,"children":3473},{"style":204},[3474],{"type":27,"value":1523},{"type":22,"tag":175,"props":3476,"children":3477},{"class":177,"line":444},[3478],{"type":22,"tag":175,"props":3479,"children":3480},{"emptyLinePlaceholder":12},[3481],{"type":27,"value":381},{"type":22,"tag":175,"props":3483,"children":3484},{"class":177,"line":453},[3485],{"type":22,"tag":175,"props":3486,"children":3487},{"style":182},[3488],{"type":27,"value":1538},{"type":22,"tag":175,"props":3490,"children":3491},{"class":177,"line":462},[3492],{"type":22,"tag":175,"props":3493,"children":3494},{"style":182},[3495],{"type":27,"value":1546},{"type":22,"tag":175,"props":3497,"children":3498},{"class":177,"line":470},[3499,3503,3507,3511,3515,3519,3523,3527],{"type":22,"tag":175,"props":3500,"children":3501},{"style":192},[3502],{"type":27,"value":1554},{"type":22,"tag":175,"props":3504,"children":3505},{"style":198},[3506],{"type":27,"value":1559},{"type":22,"tag":175,"props":3508,"children":3509},{"style":1062},[3510],{"type":27,"value":1383},{"type":22,"tag":175,"props":3512,"children":3513},{"style":192},[3514],{"type":27,"value":1568},{"type":22,"tag":175,"props":3516,"children":3517},{"style":198},[3518],{"type":27,"value":1409},{"type":22,"tag":175,"props":3520,"children":3521},{"style":204},[3522],{"type":27,"value":245},{"type":22,"tag":175,"props":3524,"children":3525},{"style":214},[3526],{"type":27,"value":1581},{"type":22,"tag":175,"props":3528,"children":3529},{"style":204},[3530],{"type":27,"value":1397},{"type":22,"tag":175,"props":3532,"children":3533},{"class":177,"line":479},[3534],{"type":22,"tag":175,"props":3535,"children":3536},{"style":204},[3537],{"type":27,"value":1593},{"type":22,"tag":175,"props":3539,"children":3540},{"class":177,"line":526},[3541,3545,3549,3553,3557,3561,3565,3569],{"type":22,"tag":175,"props":3542,"children":3543},{"style":192},[3544],{"type":27,"value":1601},{"type":22,"tag":175,"props":3546,"children":3547},{"style":204},[3548],{"type":27,"value":336},{"type":22,"tag":175,"props":3550,"children":3551},{"style":198},[3552],{"type":27,"value":1610},{"type":22,"tag":175,"props":3554,"children":3555},{"style":204},[3556],{"type":27,"value":245},{"type":22,"tag":175,"props":3558,"children":3559},{"style":315},[3560],{"type":27,"value":1619},{"type":22,"tag":175,"props":3562,"children":3563},{"style":1062},[3564],{"type":27,"value":1624},{"type":22,"tag":175,"props":3566,"children":3567},{"style":1627},[3568],{"type":27,"value":1630},{"type":22,"tag":175,"props":3570,"children":3571},{"style":204},[3572],{"type":27,"value":884},{"type":22,"tag":175,"props":3574,"children":3575},{"class":177,"line":535},[3576,3580,3584,3588,3592,3596,3600,3604,3608],{"type":22,"tag":175,"props":3577,"children":3578},{"style":192},[3579],{"type":27,"value":1642},{"type":22,"tag":175,"props":3581,"children":3582},{"style":198},[3583],{"type":27,"value":1647},{"type":22,"tag":175,"props":3585,"children":3586},{"style":204},[3587],{"type":27,"value":245},{"type":22,"tag":175,"props":3589,"children":3590},{"style":214},[3591],{"type":27,"value":1518},{"type":22,"tag":175,"props":3593,"children":3594},{"style":204},[3595],{"type":27,"value":255},{"type":22,"tag":175,"props":3597,"children":3598},{"style":198},[3599],{"type":27,"value":1610},{"type":22,"tag":175,"props":3601,"children":3602},{"style":204},[3603],{"type":27,"value":245},{"type":22,"tag":175,"props":3605,"children":3606},{"style":315},[3607],{"type":27,"value":1672},{"type":22,"tag":175,"props":3609,"children":3610},{"style":204},[3611],{"type":27,"value":322},{"type":22,"tag":175,"props":3613,"children":3614},{"class":177,"line":1679},[3615],{"type":22,"tag":175,"props":3616,"children":3617},{"style":204},[3618],{"type":27,"value":1685},{"type":22,"tag":175,"props":3620,"children":3621},{"class":177,"line":1688},[3622],{"type":22,"tag":175,"props":3623,"children":3624},{"emptyLinePlaceholder":12},[3625],{"type":27,"value":381},{"type":22,"tag":175,"props":3627,"children":3628},{"class":177,"line":1696},[3629,3633,3637,3641,3645],{"type":22,"tag":175,"props":3630,"children":3631},{"style":204},[3632],{"type":27,"value":1702},{"type":22,"tag":175,"props":3634,"children":3635},{"style":192},[3636],{"type":27,"value":1707},{"type":22,"tag":175,"props":3638,"children":3639},{"style":204},[3640],{"type":27,"value":336},{"type":22,"tag":175,"props":3642,"children":3643},{"style":315},[3644],{"type":27,"value":1716},{"type":22,"tag":175,"props":3646,"children":3647},{"style":204},[3648],{"type":27,"value":884},{"type":22,"tag":175,"props":3650,"children":3651},{"class":177,"line":1723},[3652],{"type":22,"tag":175,"props":3653,"children":3654},{"style":182},[3655],{"type":27,"value":1729},{"type":22,"tag":175,"props":3657,"children":3658},{"class":177,"line":1732},[3659,3663,3667,3671],{"type":22,"tag":175,"props":3660,"children":3661},{"style":198},[3662],{"type":27,"value":1738},{"type":22,"tag":175,"props":3664,"children":3665},{"style":204},[3666],{"type":27,"value":245},{"type":22,"tag":175,"props":3668,"children":3669},{"style":214},[3670],{"type":27,"value":1747},{"type":22,"tag":175,"props":3672,"children":3673},{"style":204},[3674],{"type":27,"value":1397},{"type":22,"tag":175,"props":3676,"children":3677},{"class":177,"line":1754},[3678,3682,3686],{"type":22,"tag":175,"props":3679,"children":3680},{"style":192},[3681],{"type":27,"value":1760},{"type":22,"tag":175,"props":3683,"children":3684},{"style":315},[3685],{"type":27,"value":1765},{"type":22,"tag":175,"props":3687,"children":3688},{"style":204},[3689],{"type":27,"value":1770},{"type":22,"tag":175,"props":3691,"children":3692},{"class":177,"line":1773},[3693],{"type":22,"tag":175,"props":3694,"children":3695},{"style":204},[3696],{"type":27,"value":975},{"type":22,"tag":175,"props":3698,"children":3699},{"class":177,"line":1781},[3700],{"type":22,"tag":175,"props":3701,"children":3702},{"style":204},[3703],{"type":27,"value":983},{"type":22,"tag":175,"props":3705,"children":3706},{"class":177,"line":1789},[3707],{"type":22,"tag":175,"props":3708,"children":3709},{"style":204},[3710],{"type":27,"value":541},{"type":22,"tag":70,"props":3712,"children":3713},{"id":1797},[3714],{"type":27,"value":1797},{"type":27,"value":1801},{"type":22,"tag":1803,"props":3717,"children":3718},{},[3719,3737],{"type":22,"tag":1807,"props":3720,"children":3721},{},[3722],{"type":22,"tag":1811,"props":3723,"children":3724},{},[3725,3729,3733],{"type":22,"tag":1815,"props":3726,"children":3727},{"align":1817},[3728],{"type":27,"value":1820},{"type":22,"tag":1815,"props":3730,"children":3731},{"align":1817},[3732],{"type":27,"value":1825},{"type":22,"tag":1815,"props":3734,"children":3735},{"align":1817},[3736],{"type":27,"value":1830},{"type":22,"tag":1832,"props":3738,"children":3739},{},[3740,3766,3792,3818],{"type":22,"tag":1811,"props":3741,"children":3742},{},[3743,3750,3758],{"type":22,"tag":1839,"props":3744,"children":3745},{"align":1817},[3746],{"type":22,"tag":30,"props":3747,"children":3748},{},[3749],{"type":27,"value":1846},{"type":22,"tag":1839,"props":3751,"children":3752},{"align":1817},[3753,3757],{"type":22,"tag":30,"props":3754,"children":3755},{},[3756],{"type":27,"value":1854},{"type":27,"value":1856},{"type":22,"tag":1839,"props":3759,"children":3760},{"align":1817},[3761,3765],{"type":22,"tag":30,"props":3762,"children":3763},{},[3764],{"type":27,"value":1864},{"type":27,"value":1866},{"type":22,"tag":1811,"props":3767,"children":3768},{},[3769,3776,3784],{"type":22,"tag":1839,"props":3770,"children":3771},{"align":1817},[3772],{"type":22,"tag":30,"props":3773,"children":3774},{},[3775],{"type":27,"value":1877},{"type":22,"tag":1839,"props":3777,"children":3778},{"align":1817},[3779,3783],{"type":22,"tag":30,"props":3780,"children":3781},{},[3782],{"type":27,"value":1885},{"type":27,"value":1887},{"type":22,"tag":1839,"props":3785,"children":3786},{"align":1817},[3787,3791],{"type":22,"tag":30,"props":3788,"children":3789},{},[3790],{"type":27,"value":1895},{"type":27,"value":1897},{"type":22,"tag":1811,"props":3793,"children":3794},{},[3795,3802,3810],{"type":22,"tag":1839,"props":3796,"children":3797},{"align":1817},[3798],{"type":22,"tag":30,"props":3799,"children":3800},{},[3801],{"type":27,"value":1908},{"type":22,"tag":1839,"props":3803,"children":3804},{"align":1817},[3805,3809],{"type":22,"tag":30,"props":3806,"children":3807},{},[3808],{"type":27,"value":1916},{"type":27,"value":1918},{"type":22,"tag":1839,"props":3811,"children":3812},{"align":1817},[3813,3817],{"type":22,"tag":30,"props":3814,"children":3815},{},[3816],{"type":27,"value":1926},{"type":27,"value":1928},{"type":22,"tag":1811,"props":3819,"children":3820},{},[3821,3828,3836],{"type":22,"tag":1839,"props":3822,"children":3823},{"align":1817},[3824],{"type":22,"tag":30,"props":3825,"children":3826},{},[3827],{"type":27,"value":1939},{"type":22,"tag":1839,"props":3829,"children":3830},{"align":1817},[3831,3835],{"type":22,"tag":30,"props":3832,"children":3833},{},[3834],{"type":27,"value":1947},{"type":27,"value":1949},{"type":22,"tag":1839,"props":3837,"children":3838},{"align":1817},[3839,3843],{"type":22,"tag":30,"props":3840,"children":3841},{},[3842],{"type":27,"value":1957},{"type":27,"value":1959},{"type":22,"tag":70,"props":3845,"children":3846},{"id":1962},[3847],{"type":27,"value":1965},{"type":22,"tag":23,"props":3849,"children":3850},{},[3851],{"type":27,"value":1970},{"type":22,"tag":548,"props":3853,"children":3854},{},[3855,3875],{"type":22,"tag":94,"props":3856,"children":3857},{},[3858,3862,3863,3868,3869,3874],{"type":22,"tag":30,"props":3859,"children":3860},{},[3861],{"type":27,"value":1981},{"type":27,"value":1983},{"type":22,"tag":81,"props":3864,"children":3866},{"className":3865},[],[3867],{"type":27,"value":1989},{"type":27,"value":1991},{"type":22,"tag":81,"props":3870,"children":3872},{"className":3871},[],[3873],{"type":27,"value":1997},{"type":27,"value":1999},{"type":22,"tag":94,"props":3876,"children":3877},{},[3878,3882,3883,3888,3889,3894],{"type":22,"tag":30,"props":3879,"children":3880},{},[3881],{"type":27,"value":2007},{"type":27,"value":2009},{"type":22,"tag":81,"props":3884,"children":3886},{"className":3885},[],[3887],{"type":27,"value":2015},{"type":27,"value":2017},{"type":22,"tag":81,"props":3890,"children":3892},{"className":3891},[],[3893],{"type":27,"value":2023},{"type":27,"value":2025},{"type":22,"tag":70,"props":3896,"children":3897},{"id":2028},[3898],{"type":27,"value":2028},{"type":22,"tag":23,"props":3900,"children":3901},{},[3902,3903,3907,3908,3913,3914,3919,3920,3925],{"type":27,"value":2035},{"type":22,"tag":30,"props":3904,"children":3905},{},[3906],{"type":27,"value":2040},{"type":27,"value":2042},{"type":22,"tag":81,"props":3909,"children":3911},{"className":3910},[],[3912],{"type":27,"value":86},{"type":27,"value":2049},{"type":22,"tag":81,"props":3915,"children":3917},{"className":3916},[],[3918],{"type":27,"value":1123},{"type":27,"value":2056},{"type":22,"tag":81,"props":3921,"children":3923},{"className":3922},[],[3924],{"type":27,"value":2062},{"type":27,"value":2064},{"type":22,"tag":23,"props":3927,"children":3928},{},[3929],{"type":27,"value":2069},{"type":22,"tag":23,"props":3931,"children":3932},{},[3933],{"type":27,"value":2074},{"type":22,"tag":548,"props":3935,"children":3936},{},[3937],{"type":22,"tag":94,"props":3938,"children":3939},{},[3940,3945],{"type":22,"tag":40,"props":3941,"children":3943},{"href":2083,"rel":3942},[2085],[3944],{"type":27,"value":2088},{"type":27,"value":2090},{"type":22,"tag":2092,"props":3947,"children":3949},{"className":3948,"dataFootnotes":7},[2095],[3950,3955],{"type":22,"tag":70,"props":3951,"children":3953},{"className":3952,"id":44},[2100],[3954],{"type":27,"value":2103},{"type":22,"tag":90,"props":3956,"children":3957},{},[3958,3972,3986],{"type":22,"tag":94,"props":3959,"children":3960},{"id":2109},[3961,3966,3967],{"type":22,"tag":40,"props":3962,"children":3964},{"href":2113,"rel":3963},[2085],[3965],{"type":27,"value":2117},{"type":27,"value":2119},{"type":22,"tag":40,"props":3968,"children":3970},{"href":2122,"ariaLabel":2123,"className":3969,"dataFootnoteBackref":7},[2125],[3971],{"type":27,"value":2128},{"type":22,"tag":94,"props":3973,"children":3974},{"id":2131},[3975,3980,3981],{"type":22,"tag":40,"props":3976,"children":3978},{"href":2135,"rel":3977},[2085],[3979],{"type":27,"value":2139},{"type":27,"value":2141},{"type":22,"tag":40,"props":3982,"children":3984},{"href":2144,"ariaLabel":2145,"className":3983,"dataFootnoteBackref":7},[2125],[3985],{"type":27,"value":2128},{"type":22,"tag":94,"props":3987,"children":3988},{"id":2151},[3989,3994,3995],{"type":22,"tag":40,"props":3990,"children":3992},{"href":2155,"rel":3991},[2085],[3993],{"type":27,"value":2159},{"type":27,"value":2161},{"type":22,"tag":40,"props":3996,"children":3998},{"href":2164,"ariaLabel":2165,"className":3997,"dataFootnoteBackref":7},[2125],[3999],{"type":27,"value":2128},{"type":22,"tag":2170,"props":4001,"children":4002},{},[4003],{"type":27,"value":2174},{"title":7,"searchDepth":188,"depth":188,"links":4005},[4006,4007,4011,4012,4013,4014],{"id":72,"depth":188,"text":72},{"id":583,"depth":188,"text":586,"children":4008},[4009,4010],{"id":595,"depth":210,"text":598},{"id":1294,"depth":210,"text":1297},{"id":1797,"depth":188,"text":1797},{"id":1962,"depth":188,"text":1965},{"id":2028,"depth":188,"text":2028},{"id":44,"depth":188,"text":2103},1768360056205]