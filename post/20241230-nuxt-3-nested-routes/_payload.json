[{"data":1,"prerenderedAt":768},["Reactive",2],{"content-query-lgkBcI210R":3,"content-query-BaDhweNoVc":449},{"_path":4,"_dir":5,"_draft":6,"_partial":6,"_locale":7,"title":8,"description":9,"tags":10,"readingTime":11,"body":16,"_type":442,"_id":443,"_source":444,"_file":445,"_extension":446,"createdAt":447,"updatedAt":448},"/post/20241230-nuxt-3-nested-routes","post",false,"","Nuxt3 Nested Routes 與 active class","今天在處理公司專案的時候，遇到一個 Nuxt3 nested routes 小問題，剛好把它記錄下來，就當作這個 blog 2024 年最後一篇文章了 (遮臉)。","vue, nuxt, vue3, nuxt3, vue-router, 隨筆",{"text":12,"minutes":13,"time":14,"words":15},"2 min read",1.81,108600,362,{"type":17,"children":18,"toc":433},"root",[19,26,32,37,47,68,144,172,184,189,194,242,250,307,312,338,345,354,360,368,427],{"type":20,"tag":21,"props":22,"children":23},"element","p",{},[24],{"type":25,"value":9},"text",{"type":20,"tag":27,"props":28,"children":30},"h2",{"id":29},"問題描述",[31],{"type":25,"value":29},{"type":20,"tag":21,"props":33,"children":34},{},[35],{"type":25,"value":36},"公司的 Nuxt3 專案有以下的 Page 資料夾結構：",{"type":20,"tag":38,"props":39,"children":41},"pre",{"code":40},".\n└── pages/\n    ├── campaign/\n    │   └── [id]/\n    │       └── settings.vue\n    └── index.vue\n",[42],{"type":20,"tag":43,"props":44,"children":45},"code",{"__ignoreMap":7},[46],{"type":25,"value":40},{"type":20,"tag":21,"props":48,"children":49},{},[50,52,58,60,66],{"type":25,"value":51},"我在 ",{"type":20,"tag":43,"props":53,"children":55},{"className":54},[],[56],{"type":25,"value":57},"index.vue",{"type":25,"value":59}," 這一頁使用了 ",{"type":20,"tag":43,"props":61,"children":63},{"className":62},[],[64],{"type":25,"value":65},"\u003CNuxtLink>",{"type":25,"value":67},"，使用的 html 結構如下：",{"type":20,"tag":38,"props":69,"children":74},{"code":70,"filename":71,"language":72,"meta":7,"className":73,"style":7},"\u003CNuxtLink to=\"/campaign\">\n  Campaign\n\u003C/NuxtLink>\n","page/index.vue","vue","language-vue shiki shiki-themes one-dark-pro",[75],{"type":20,"tag":43,"props":76,"children":77},{"__ignoreMap":7},[78,118,127],{"type":20,"tag":79,"props":80,"children":83},"span",{"class":81,"line":82},"line",1,[84,90,96,102,107,113],{"type":20,"tag":79,"props":85,"children":87},{"style":86},"--shiki-default:#ABB2BF",[88],{"type":25,"value":89},"\u003C",{"type":20,"tag":79,"props":91,"children":93},{"style":92},"--shiki-default:#E06C75",[94],{"type":25,"value":95},"NuxtLink",{"type":20,"tag":79,"props":97,"children":99},{"style":98},"--shiki-default:#D19A66",[100],{"type":25,"value":101}," to",{"type":20,"tag":79,"props":103,"children":104},{"style":86},[105],{"type":25,"value":106},"=",{"type":20,"tag":79,"props":108,"children":110},{"style":109},"--shiki-default:#98C379",[111],{"type":25,"value":112},"\"/campaign\"",{"type":20,"tag":79,"props":114,"children":115},{"style":86},[116],{"type":25,"value":117},">\n",{"type":20,"tag":79,"props":119,"children":121},{"class":81,"line":120},2,[122],{"type":20,"tag":79,"props":123,"children":124},{"style":86},[125],{"type":25,"value":126},"  Campaign\n",{"type":20,"tag":79,"props":128,"children":130},{"class":81,"line":129},3,[131,136,140],{"type":20,"tag":79,"props":132,"children":133},{"style":86},[134],{"type":25,"value":135},"\u003C/",{"type":20,"tag":79,"props":137,"children":138},{"style":92},[139],{"type":25,"value":95},{"type":20,"tag":79,"props":141,"children":142},{"style":86},[143],{"type":25,"value":117},{"type":20,"tag":21,"props":145,"children":146},{},[147,149,155,157,162,164,170],{"type":25,"value":148},"並希望在頁面路由是 ",{"type":20,"tag":43,"props":150,"children":152},{"className":151},[],[153],{"type":25,"value":154},"/campaign/:id/settings",{"type":25,"value":156}," 的時候，",{"type":20,"tag":43,"props":158,"children":160},{"className":159},[],[161],{"type":25,"value":65},{"type":25,"value":163}," 的 ",{"type":20,"tag":43,"props":165,"children":167},{"className":166},[],[168],{"type":25,"value":169},"active class",{"type":25,"value":171}," 要顯示出來。",{"type":20,"tag":21,"props":173,"children":174},{},[175,177,182],{"type":25,"value":176},"但是，很顯然的，當我發了這邊文章就表示，他並沒有正常顯示 ",{"type":20,"tag":43,"props":178,"children":180},{"className":179},[],[181],{"type":25,"value":169},{"type":25,"value":183},"。",{"type":20,"tag":21,"props":185,"children":186},{},[187],{"type":25,"value":188},"很顯然，我一定是遺漏了什麼......。",{"type":20,"tag":27,"props":190,"children":192},{"id":191},"解決方法",[193],{"type":25,"value":191},{"type":20,"tag":21,"props":195,"children":196},{},[197,199,208,210,217,219,232,234,240],{"type":25,"value":198},"經過我各種 Google 搜尋 (我想說這個問題應該不用去勞煩 ",{"type":20,"tag":200,"props":201,"children":205},"a",{"href":202,"rel":203},"https://chat.openai.com",[204],"nofollow",[206],{"type":25,"value":207},"ChatGPT",{"type":25,"value":209}," 或是 ",{"type":20,"tag":200,"props":211,"children":214},{"href":212,"rel":213},"https://www.claude.ai",[204],[215],{"type":25,"value":216},"Claude",{"type":25,"value":218}," 了)，在 Stack Overflow 上查到了這篇文章",{"type":20,"tag":220,"props":221,"children":222},"sup",{},[223],{"type":20,"tag":200,"props":224,"children":229},{"href":225,"ariaDescribedBy":226,"dataFootnoteRef":7,"id":228},"#user-content-fn-1",[227],"footnote-label","user-content-fnref-1",[230],{"type":25,"value":231},"1",{"type":25,"value":233},"，根據解答的說明，把資料夾的結構修改後，並新增一個 ",{"type":20,"tag":43,"props":235,"children":237},{"className":236},[],[238],{"type":25,"value":239},"campaign.vue",{"type":25,"value":241}," 頁面，問題就解決了。",{"type":20,"tag":38,"props":243,"children":245},{"code":244},".\n└── pages/\n    ├── campaign/\n    │   └── [id]/\n    │       └── settings.vue\n    ├── campaign.vue\n    └── index.vue\n",[246],{"type":20,"tag":43,"props":247,"children":248},{"__ignoreMap":7},[249],{"type":25,"value":244},{"type":20,"tag":38,"props":251,"children":254},{"code":252,"filename":253,"language":72,"meta":7,"className":73,"style":7},"\u003Ctemplate>\n  \u003CNuxtPage />\n\u003C/template>\n","page/campaign.vue",[255],{"type":20,"tag":43,"props":256,"children":257},{"__ignoreMap":7},[258,274,292],{"type":20,"tag":79,"props":259,"children":260},{"class":81,"line":82},[261,265,270],{"type":20,"tag":79,"props":262,"children":263},{"style":86},[264],{"type":25,"value":89},{"type":20,"tag":79,"props":266,"children":267},{"style":92},[268],{"type":25,"value":269},"template",{"type":20,"tag":79,"props":271,"children":272},{"style":86},[273],{"type":25,"value":117},{"type":20,"tag":79,"props":275,"children":276},{"class":81,"line":120},[277,282,287],{"type":20,"tag":79,"props":278,"children":279},{"style":86},[280],{"type":25,"value":281},"  \u003C",{"type":20,"tag":79,"props":283,"children":284},{"style":92},[285],{"type":25,"value":286},"NuxtPage",{"type":20,"tag":79,"props":288,"children":289},{"style":86},[290],{"type":25,"value":291}," />\n",{"type":20,"tag":79,"props":293,"children":294},{"class":81,"line":129},[295,299,303],{"type":20,"tag":79,"props":296,"children":297},{"style":86},[298],{"type":25,"value":135},{"type":20,"tag":79,"props":300,"children":301},{"style":92},[302],{"type":25,"value":269},{"type":20,"tag":79,"props":304,"children":305},{"style":86},[306],{"type":25,"value":117},{"type":20,"tag":27,"props":308,"children":310},{"id":309},"打包後的差異",[311],{"type":25,"value":309},{"type":20,"tag":21,"props":313,"children":314},{},[315,317,328,330,336],{"type":25,"value":316},"後來根據 Slack Overflow 解答下方的討論中，回頭去看了 Nuxt 的官方文件",{"type":20,"tag":220,"props":318,"children":319},{},[320],{"type":20,"tag":200,"props":321,"children":325},{"href":322,"ariaDescribedBy":323,"dataFootnoteRef":7,"id":324},"#user-content-fn-2",[227],"user-content-fnref-2",[326],{"type":25,"value":327},"2",{"type":25,"value":329},"，裡面有提到，如何讓 Nuxt 正確地把 nested routes 建立出來，後面為了確認到底這兩個設定在背後的差異為何，我到了 ",{"type":20,"tag":43,"props":331,"children":333},{"className":332},[],[334],{"type":25,"value":335},".nuxt/dist",{"type":25,"value":337}," 資料夾中去翻找，證實了這兩個設定的差異。",{"type":20,"tag":339,"props":340,"children":342},"h3",{"id":341},"有-nested-routes",[343],{"type":25,"value":344},"有 Nested Routes",{"type":20,"tag":21,"props":346,"children":347},{},[348],{"type":20,"tag":349,"props":350,"children":353},"img",{"alt":351,"src":352},"包含 page/campaign.vue","/img/20241230-with-children-route.png",[],{"type":20,"tag":339,"props":355,"children":357},{"id":356},"沒有-nested-routes",[358],{"type":25,"value":359},"沒有 Nested Routes",{"type":20,"tag":21,"props":361,"children":362},{},[363],{"type":20,"tag":349,"props":364,"children":367},{"alt":365,"src":366},"不包含 page/campaign.vue","/img/20241230-without-children-route.png",[],{"type":20,"tag":369,"props":370,"children":373},"section",{"className":371,"dataFootnotes":7},[372],"footnotes",[374,381],{"type":20,"tag":27,"props":375,"children":378},{"className":376,"id":227},[377],"sr-only",[379],{"type":25,"value":380},"Reference",{"type":20,"tag":382,"props":383,"children":384},"ol",{},[385,408],{"type":20,"tag":386,"props":387,"children":389},"li",{"id":388},"user-content-fn-1",[390,397,399],{"type":20,"tag":200,"props":391,"children":394},{"href":392,"rel":393},"https://stackoverflow.com/questions/74637529/router-link-active-nuxt-3-vuejs-on-nested-routes-not-applying-to-parent",[204],[395],{"type":25,"value":396},"javascript - router-link-active Nuxt 3 / VueJS on nested routes not applying to parent - Stack Overflow",{"type":25,"value":398}," ",{"type":20,"tag":200,"props":400,"children":405},{"href":401,"ariaLabel":402,"className":403,"dataFootnoteBackref":7},"#user-content-fnref-1","Back to reference 1",[404],"data-footnote-backref",[406],{"type":25,"value":407},"↩",{"type":20,"tag":386,"props":409,"children":411},{"id":410},"user-content-fn-2",[412,419,420],{"type":20,"tag":200,"props":413,"children":416},{"href":414,"rel":415},"https://nuxt.com/docs/guide/directory-structure/pages#nested-routes",[204],[417],{"type":25,"value":418},"pages/ · Nuxt Directory Structure",{"type":25,"value":398},{"type":20,"tag":200,"props":421,"children":425},{"href":422,"ariaLabel":423,"className":424,"dataFootnoteBackref":7},"#user-content-fnref-2","Back to reference 2",[404],[426],{"type":25,"value":407},{"type":20,"tag":428,"props":429,"children":430},"style",{},[431],{"type":25,"value":432},"html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}",{"title":7,"searchDepth":120,"depth":120,"links":434},[435,436,437,441],{"id":29,"depth":120,"text":29},{"id":191,"depth":120,"text":191},{"id":309,"depth":120,"text":309,"children":438},[439,440],{"id":341,"depth":129,"text":344},{"id":356,"depth":129,"text":359},{"id":227,"depth":120,"text":380},"markdown","content:post:20241230-nuxt-3-nested-routes.md","content","post/20241230-nuxt-3-nested-routes.md","md","2024-12-30T10:16:55.000Z","2024-12-31T05:30:45.000Z",{"_path":4,"_dir":5,"_draft":6,"_partial":6,"_locale":7,"title":8,"description":9,"tags":10,"readingTime":450,"body":451,"_type":442,"_id":443,"_source":444,"_file":445,"_extension":446,"createdAt":447,"updatedAt":448},{"text":12,"minutes":13,"time":14,"words":15},{"type":17,"children":452,"toc":759},[453,457,461,465,472,488,543,565,575,579,583,614,621,672,676,695,699,705,709,715,755],{"type":20,"tag":21,"props":454,"children":455},{},[456],{"type":25,"value":9},{"type":20,"tag":27,"props":458,"children":459},{"id":29},[460],{"type":25,"value":29},{"type":20,"tag":21,"props":462,"children":463},{},[464],{"type":25,"value":36},{"type":20,"tag":38,"props":466,"children":467},{"code":40},[468],{"type":20,"tag":43,"props":469,"children":470},{"__ignoreMap":7},[471],{"type":25,"value":40},{"type":20,"tag":21,"props":473,"children":474},{},[475,476,481,482,487],{"type":25,"value":51},{"type":20,"tag":43,"props":477,"children":479},{"className":478},[],[480],{"type":25,"value":57},{"type":25,"value":59},{"type":20,"tag":43,"props":483,"children":485},{"className":484},[],[486],{"type":25,"value":65},{"type":25,"value":67},{"type":20,"tag":38,"props":489,"children":490},{"code":70,"filename":71,"language":72,"meta":7,"className":73,"style":7},[491],{"type":20,"tag":43,"props":492,"children":493},{"__ignoreMap":7},[494,521,528],{"type":20,"tag":79,"props":495,"children":496},{"class":81,"line":82},[497,501,505,509,513,517],{"type":20,"tag":79,"props":498,"children":499},{"style":86},[500],{"type":25,"value":89},{"type":20,"tag":79,"props":502,"children":503},{"style":92},[504],{"type":25,"value":95},{"type":20,"tag":79,"props":506,"children":507},{"style":98},[508],{"type":25,"value":101},{"type":20,"tag":79,"props":510,"children":511},{"style":86},[512],{"type":25,"value":106},{"type":20,"tag":79,"props":514,"children":515},{"style":109},[516],{"type":25,"value":112},{"type":20,"tag":79,"props":518,"children":519},{"style":86},[520],{"type":25,"value":117},{"type":20,"tag":79,"props":522,"children":523},{"class":81,"line":120},[524],{"type":20,"tag":79,"props":525,"children":526},{"style":86},[527],{"type":25,"value":126},{"type":20,"tag":79,"props":529,"children":530},{"class":81,"line":129},[531,535,539],{"type":20,"tag":79,"props":532,"children":533},{"style":86},[534],{"type":25,"value":135},{"type":20,"tag":79,"props":536,"children":537},{"style":92},[538],{"type":25,"value":95},{"type":20,"tag":79,"props":540,"children":541},{"style":86},[542],{"type":25,"value":117},{"type":20,"tag":21,"props":544,"children":545},{},[546,547,552,553,558,559,564],{"type":25,"value":148},{"type":20,"tag":43,"props":548,"children":550},{"className":549},[],[551],{"type":25,"value":154},{"type":25,"value":156},{"type":20,"tag":43,"props":554,"children":556},{"className":555},[],[557],{"type":25,"value":65},{"type":25,"value":163},{"type":20,"tag":43,"props":560,"children":562},{"className":561},[],[563],{"type":25,"value":169},{"type":25,"value":171},{"type":20,"tag":21,"props":566,"children":567},{},[568,569,574],{"type":25,"value":176},{"type":20,"tag":43,"props":570,"children":572},{"className":571},[],[573],{"type":25,"value":169},{"type":25,"value":183},{"type":20,"tag":21,"props":576,"children":577},{},[578],{"type":25,"value":188},{"type":20,"tag":27,"props":580,"children":581},{"id":191},[582],{"type":25,"value":191},{"type":20,"tag":21,"props":584,"children":585},{},[586,587,592,593,598,599,607,608,613],{"type":25,"value":198},{"type":20,"tag":200,"props":588,"children":590},{"href":202,"rel":589},[204],[591],{"type":25,"value":207},{"type":25,"value":209},{"type":20,"tag":200,"props":594,"children":596},{"href":212,"rel":595},[204],[597],{"type":25,"value":216},{"type":25,"value":218},{"type":20,"tag":220,"props":600,"children":601},{},[602],{"type":20,"tag":200,"props":603,"children":605},{"href":225,"ariaDescribedBy":604,"dataFootnoteRef":7,"id":228},[227],[606],{"type":25,"value":231},{"type":25,"value":233},{"type":20,"tag":43,"props":609,"children":611},{"className":610},[],[612],{"type":25,"value":239},{"type":25,"value":241},{"type":20,"tag":38,"props":615,"children":616},{"code":244},[617],{"type":20,"tag":43,"props":618,"children":619},{"__ignoreMap":7},[620],{"type":25,"value":244},{"type":20,"tag":38,"props":622,"children":623},{"code":252,"filename":253,"language":72,"meta":7,"className":73,"style":7},[624],{"type":20,"tag":43,"props":625,"children":626},{"__ignoreMap":7},[627,642,657],{"type":20,"tag":79,"props":628,"children":629},{"class":81,"line":82},[630,634,638],{"type":20,"tag":79,"props":631,"children":632},{"style":86},[633],{"type":25,"value":89},{"type":20,"tag":79,"props":635,"children":636},{"style":92},[637],{"type":25,"value":269},{"type":20,"tag":79,"props":639,"children":640},{"style":86},[641],{"type":25,"value":117},{"type":20,"tag":79,"props":643,"children":644},{"class":81,"line":120},[645,649,653],{"type":20,"tag":79,"props":646,"children":647},{"style":86},[648],{"type":25,"value":281},{"type":20,"tag":79,"props":650,"children":651},{"style":92},[652],{"type":25,"value":286},{"type":20,"tag":79,"props":654,"children":655},{"style":86},[656],{"type":25,"value":291},{"type":20,"tag":79,"props":658,"children":659},{"class":81,"line":129},[660,664,668],{"type":20,"tag":79,"props":661,"children":662},{"style":86},[663],{"type":25,"value":135},{"type":20,"tag":79,"props":665,"children":666},{"style":92},[667],{"type":25,"value":269},{"type":20,"tag":79,"props":669,"children":670},{"style":86},[671],{"type":25,"value":117},{"type":20,"tag":27,"props":673,"children":674},{"id":309},[675],{"type":25,"value":309},{"type":20,"tag":21,"props":677,"children":678},{},[679,680,688,689,694],{"type":25,"value":316},{"type":20,"tag":220,"props":681,"children":682},{},[683],{"type":20,"tag":200,"props":684,"children":686},{"href":322,"ariaDescribedBy":685,"dataFootnoteRef":7,"id":324},[227],[687],{"type":25,"value":327},{"type":25,"value":329},{"type":20,"tag":43,"props":690,"children":692},{"className":691},[],[693],{"type":25,"value":335},{"type":25,"value":337},{"type":20,"tag":339,"props":696,"children":697},{"id":341},[698],{"type":25,"value":344},{"type":20,"tag":21,"props":700,"children":701},{},[702],{"type":20,"tag":349,"props":703,"children":704},{"alt":351,"src":352},[],{"type":20,"tag":339,"props":706,"children":707},{"id":356},[708],{"type":25,"value":359},{"type":20,"tag":21,"props":710,"children":711},{},[712],{"type":20,"tag":349,"props":713,"children":714},{"alt":365,"src":366},[],{"type":20,"tag":369,"props":716,"children":718},{"className":717,"dataFootnotes":7},[372],[719,724],{"type":20,"tag":27,"props":720,"children":722},{"className":721,"id":227},[377],[723],{"type":25,"value":380},{"type":20,"tag":382,"props":725,"children":726},{},[727,741],{"type":20,"tag":386,"props":728,"children":729},{"id":388},[730,735,736],{"type":20,"tag":200,"props":731,"children":733},{"href":392,"rel":732},[204],[734],{"type":25,"value":396},{"type":25,"value":398},{"type":20,"tag":200,"props":737,"children":739},{"href":401,"ariaLabel":402,"className":738,"dataFootnoteBackref":7},[404],[740],{"type":25,"value":407},{"type":20,"tag":386,"props":742,"children":743},{"id":410},[744,749,750],{"type":20,"tag":200,"props":745,"children":747},{"href":414,"rel":746},[204],[748],{"type":25,"value":418},{"type":25,"value":398},{"type":20,"tag":200,"props":751,"children":753},{"href":422,"ariaLabel":423,"className":752,"dataFootnoteBackref":7},[404],[754],{"type":25,"value":407},{"type":20,"tag":428,"props":756,"children":757},{},[758],{"type":25,"value":432},{"title":7,"searchDepth":120,"depth":120,"links":760},[761,762,763,767],{"id":29,"depth":120,"text":29},{"id":191,"depth":120,"text":191},{"id":309,"depth":120,"text":309,"children":764},[765,766],{"id":341,"depth":129,"text":344},{"id":356,"depth":129,"text":359},{"id":227,"depth":120,"text":380},1767695230634]