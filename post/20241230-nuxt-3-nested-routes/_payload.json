[{"data":1,"prerenderedAt":767},["Reactive",2],{"content-query-lgkBcI210R":3,"content-query-BaDhweNoVc":448},{"_path":4,"_dir":5,"_draft":6,"_partial":6,"_locale":7,"title":8,"description":9,"tags":10,"readingTime":11,"body":16,"_type":442,"_id":443,"_source":444,"_file":445,"_extension":446,"createdAt":447,"updatedAt":447},"/post/20241230-nuxt-3-nested-routes","post",false,"","Nuxt3 Nested Routes 與 active class","今天在處理公司專案的時候，遇到一個 Nuxt3 nested routes 小問題，剛好把它記錄下來，就當作這個 blog 2024 年最後一篇文章了 (遮臉)。","vue, nuxt, vue3, nuxt3, vue-router",{"text":12,"minutes":13,"time":14,"words":15},"2 min read",1.81,108600,362,{"type":17,"children":18,"toc":433},"root",[19,26,32,37,47,68,144,172,184,189,194,242,250,307,312,338,345,354,360,368,427],{"type":20,"tag":21,"props":22,"children":23},"element","p",{},[24],{"type":25,"value":9},"text",{"type":20,"tag":27,"props":28,"children":30},"h2",{"id":29},"問題描述",[31],{"type":25,"value":29},{"type":20,"tag":21,"props":33,"children":34},{},[35],{"type":25,"value":36},"公司的 Nuxt3 專案有以下的 Page 資料夾結構：",{"type":20,"tag":38,"props":39,"children":41},"pre",{"code":40},".\n└── pages/\n    ├── campaign/\n    │   └── [id]/\n    │       └── settings.vue\n    └── index.vue\n",[42],{"type":20,"tag":43,"props":44,"children":45},"code",{"__ignoreMap":7},[46],{"type":25,"value":40},{"type":20,"tag":21,"props":48,"children":49},{},[50,52,58,60,66],{"type":25,"value":51},"我在 ",{"type":20,"tag":43,"props":53,"children":55},{"className":54},[],[56],{"type":25,"value":57},"index.vue",{"type":25,"value":59}," 這一頁使用了 ",{"type":20,"tag":43,"props":61,"children":63},{"className":62},[],[64],{"type":25,"value":65},"\u003CNuxtLink>",{"type":25,"value":67},"，使用的 html 結構如下：",{"type":20,"tag":38,"props":69,"children":74},{"code":70,"filename":71,"language":72,"meta":7,"className":73,"style":7},"\u003CNuxtLink to=\"/campaign\">\n  Campaign\n\u003C/NuxtLink>\n","page/index.vue","vue","language-vue shiki shiki-themes one-dark-pro",[75],{"type":20,"tag":43,"props":76,"children":77},{"__ignoreMap":7},[78,118,127],{"type":20,"tag":79,"props":80,"children":83},"span",{"class":81,"line":82},"line",1,[84,90,96,102,107,113],{"type":20,"tag":79,"props":85,"children":87},{"style":86},"--shiki-default:#ABB2BF",[88],{"type":25,"value":89},"\u003C",{"type":20,"tag":79,"props":91,"children":93},{"style":92},"--shiki-default:#E06C75",[94],{"type":25,"value":95},"NuxtLink",{"type":20,"tag":79,"props":97,"children":99},{"style":98},"--shiki-default:#D19A66",[100],{"type":25,"value":101}," to",{"type":20,"tag":79,"props":103,"children":104},{"style":86},[105],{"type":25,"value":106},"=",{"type":20,"tag":79,"props":108,"children":110},{"style":109},"--shiki-default:#98C379",[111],{"type":25,"value":112},"\"/campaign\"",{"type":20,"tag":79,"props":114,"children":115},{"style":86},[116],{"type":25,"value":117},">\n",{"type":20,"tag":79,"props":119,"children":121},{"class":81,"line":120},2,[122],{"type":20,"tag":79,"props":123,"children":124},{"style":86},[125],{"type":25,"value":126},"  Campaign\n",{"type":20,"tag":79,"props":128,"children":130},{"class":81,"line":129},3,[131,136,140],{"type":20,"tag":79,"props":132,"children":133},{"style":86},[134],{"type":25,"value":135},"\u003C/",{"type":20,"tag":79,"props":137,"children":138},{"style":92},[139],{"type":25,"value":95},{"type":20,"tag":79,"props":141,"children":142},{"style":86},[143],{"type":25,"value":117},{"type":20,"tag":21,"props":145,"children":146},{},[147,149,155,157,162,164,170],{"type":25,"value":148},"並希望在頁面路由是 ",{"type":20,"tag":43,"props":150,"children":152},{"className":151},[],[153],{"type":25,"value":154},"/campaign/:id/settings",{"type":25,"value":156}," 的時候，",{"type":20,"tag":43,"props":158,"children":160},{"className":159},[],[161],{"type":25,"value":65},{"type":25,"value":163}," 的 ",{"type":20,"tag":43,"props":165,"children":167},{"className":166},[],[168],{"type":25,"value":169},"active class",{"type":25,"value":171}," 要顯示出來。",{"type":20,"tag":21,"props":173,"children":174},{},[175,177,182],{"type":25,"value":176},"但是，很顯然的，當我發了這邊文章就表示，他並沒有正常顯示 ",{"type":20,"tag":43,"props":178,"children":180},{"className":179},[],[181],{"type":25,"value":169},{"type":25,"value":183},"。",{"type":20,"tag":21,"props":185,"children":186},{},[187],{"type":25,"value":188},"很顯然，我一定是遺漏了什麼......。",{"type":20,"tag":27,"props":190,"children":192},{"id":191},"解決方法",[193],{"type":25,"value":191},{"type":20,"tag":21,"props":195,"children":196},{},[197,199,208,210,217,219,232,234,240],{"type":25,"value":198},"經過我各種 Google 搜尋 (我想說這個問題應該不用去勞煩 ",{"type":20,"tag":200,"props":201,"children":205},"a",{"href":202,"rel":203},"https://chat.openai.com",[204],"nofollow",[206],{"type":25,"value":207},"ChatGPT",{"type":25,"value":209}," 或是 ",{"type":20,"tag":200,"props":211,"children":214},{"href":212,"rel":213},"https://www.claude.ai",[204],[215],{"type":25,"value":216},"Claude",{"type":25,"value":218}," 了)，在 Stack Overflow 上查到了這篇文章",{"type":20,"tag":220,"props":221,"children":222},"sup",{},[223],{"type":20,"tag":200,"props":224,"children":229},{"href":225,"ariaDescribedBy":226,"dataFootnoteRef":7,"id":228},"#user-content-fn-1",[227],"footnote-label","user-content-fnref-1",[230],{"type":25,"value":231},"1",{"type":25,"value":233},"，根據解答的說明，把資料夾的結構修改後，並新增一個 ",{"type":20,"tag":43,"props":235,"children":237},{"className":236},[],[238],{"type":25,"value":239},"campaign.vue",{"type":25,"value":241}," 頁面，問題就解決了。",{"type":20,"tag":38,"props":243,"children":245},{"code":244},".\n└── pages/\n    ├── campaign/\n    │   └── [id]/\n    │       └── settings.vue\n    ├── campaign.vue\n    └── index.vue\n",[246],{"type":20,"tag":43,"props":247,"children":248},{"__ignoreMap":7},[249],{"type":25,"value":244},{"type":20,"tag":38,"props":251,"children":254},{"code":252,"filename":253,"language":72,"meta":7,"className":73,"style":7},"\u003Ctemplate>\n  \u003CNuxtPage />\n\u003C/template>\n","page/campaign.vue",[255],{"type":20,"tag":43,"props":256,"children":257},{"__ignoreMap":7},[258,274,292],{"type":20,"tag":79,"props":259,"children":260},{"class":81,"line":82},[261,265,270],{"type":20,"tag":79,"props":262,"children":263},{"style":86},[264],{"type":25,"value":89},{"type":20,"tag":79,"props":266,"children":267},{"style":92},[268],{"type":25,"value":269},"template",{"type":20,"tag":79,"props":271,"children":272},{"style":86},[273],{"type":25,"value":117},{"type":20,"tag":79,"props":275,"children":276},{"class":81,"line":120},[277,282,287],{"type":20,"tag":79,"props":278,"children":279},{"style":86},[280],{"type":25,"value":281},"  \u003C",{"type":20,"tag":79,"props":283,"children":284},{"style":92},[285],{"type":25,"value":286},"NuxtPage",{"type":20,"tag":79,"props":288,"children":289},{"style":86},[290],{"type":25,"value":291}," />\n",{"type":20,"tag":79,"props":293,"children":294},{"class":81,"line":129},[295,299,303],{"type":20,"tag":79,"props":296,"children":297},{"style":86},[298],{"type":25,"value":135},{"type":20,"tag":79,"props":300,"children":301},{"style":92},[302],{"type":25,"value":269},{"type":20,"tag":79,"props":304,"children":305},{"style":86},[306],{"type":25,"value":117},{"type":20,"tag":27,"props":308,"children":310},{"id":309},"打包後的差異",[311],{"type":25,"value":309},{"type":20,"tag":21,"props":313,"children":314},{},[315,317,328,330,336],{"type":25,"value":316},"後來根據 Slack Overflow 解答下方的討論中，回頭去看了 Nuxt 的官方文件",{"type":20,"tag":220,"props":318,"children":319},{},[320],{"type":20,"tag":200,"props":321,"children":325},{"href":322,"ariaDescribedBy":323,"dataFootnoteRef":7,"id":324},"#user-content-fn-2",[227],"user-content-fnref-2",[326],{"type":25,"value":327},"2",{"type":25,"value":329},"，裡面有提到，如何讓 Nuxt 正確地把 nested routes 建立出來，後面為了確認到底這兩個設定在背後的差異為何，我到了 ",{"type":20,"tag":43,"props":331,"children":333},{"className":332},[],[334],{"type":25,"value":335},".nuxt/dist",{"type":25,"value":337}," 資料夾中去翻找，證實了這兩個設定的差異。",{"type":20,"tag":339,"props":340,"children":342},"h3",{"id":341},"有-nested-routes",[343],{"type":25,"value":344},"有 Nested Routes",{"type":20,"tag":21,"props":346,"children":347},{},[348],{"type":20,"tag":349,"props":350,"children":353},"img",{"alt":351,"src":352},"包含 page/campaign.vue","/img/20241230-with-children-route.png",[],{"type":20,"tag":339,"props":355,"children":357},{"id":356},"沒有-nested-routes",[358],{"type":25,"value":359},"沒有 Nested Routes",{"type":20,"tag":21,"props":361,"children":362},{},[363],{"type":20,"tag":349,"props":364,"children":367},{"alt":365,"src":366},"不包含 page/campaign.vue","/img/20241230-without-children-route.png",[],{"type":20,"tag":369,"props":370,"children":373},"section",{"className":371,"dataFootnotes":7},[372],"footnotes",[374,381],{"type":20,"tag":27,"props":375,"children":378},{"className":376,"id":227},[377],"sr-only",[379],{"type":25,"value":380},"Reference",{"type":20,"tag":382,"props":383,"children":384},"ol",{},[385,408],{"type":20,"tag":386,"props":387,"children":389},"li",{"id":388},"user-content-fn-1",[390,397,399],{"type":20,"tag":200,"props":391,"children":394},{"href":392,"rel":393},"https://stackoverflow.com/questions/74637529/router-link-active-nuxt-3-vuejs-on-nested-routes-not-applying-to-parent",[204],[395],{"type":25,"value":396},"javascript - router-link-active Nuxt 3 / VueJS on nested routes not applying to parent - Stack Overflow",{"type":25,"value":398}," ",{"type":20,"tag":200,"props":400,"children":405},{"href":401,"ariaLabel":402,"className":403,"dataFootnoteBackref":7},"#user-content-fnref-1","Back to reference 1",[404],"data-footnote-backref",[406],{"type":25,"value":407},"↩",{"type":20,"tag":386,"props":409,"children":411},{"id":410},"user-content-fn-2",[412,419,420],{"type":20,"tag":200,"props":413,"children":416},{"href":414,"rel":415},"https://nuxt.com/docs/guide/directory-structure/pages#nested-routes",[204],[417],{"type":25,"value":418},"pages/ · Nuxt Directory Structure",{"type":25,"value":398},{"type":20,"tag":200,"props":421,"children":425},{"href":422,"ariaLabel":423,"className":424,"dataFootnoteBackref":7},"#user-content-fnref-2","Back to reference 2",[404],[426],{"type":25,"value":407},{"type":20,"tag":428,"props":429,"children":430},"style",{},[431],{"type":25,"value":432},"html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}",{"title":7,"searchDepth":120,"depth":120,"links":434},[435,436,437,441],{"id":29,"depth":120,"text":29},{"id":191,"depth":120,"text":191},{"id":309,"depth":120,"text":309,"children":438},[439,440],{"id":341,"depth":129,"text":344},{"id":356,"depth":129,"text":359},{"id":227,"depth":120,"text":380},"markdown","content:post:20241230-nuxt-3-nested-routes.md","content","post/20241230-nuxt-3-nested-routes.md","md","2024-12-30T10:16:55.000Z",{"_path":4,"_dir":5,"_draft":6,"_partial":6,"_locale":7,"title":8,"description":9,"tags":10,"readingTime":449,"body":450,"_type":442,"_id":443,"_source":444,"_file":445,"_extension":446,"createdAt":447,"updatedAt":447},{"text":12,"minutes":13,"time":14,"words":15},{"type":17,"children":451,"toc":758},[452,456,460,464,471,487,542,564,574,578,582,613,620,671,675,694,698,704,708,714,754],{"type":20,"tag":21,"props":453,"children":454},{},[455],{"type":25,"value":9},{"type":20,"tag":27,"props":457,"children":458},{"id":29},[459],{"type":25,"value":29},{"type":20,"tag":21,"props":461,"children":462},{},[463],{"type":25,"value":36},{"type":20,"tag":38,"props":465,"children":466},{"code":40},[467],{"type":20,"tag":43,"props":468,"children":469},{"__ignoreMap":7},[470],{"type":25,"value":40},{"type":20,"tag":21,"props":472,"children":473},{},[474,475,480,481,486],{"type":25,"value":51},{"type":20,"tag":43,"props":476,"children":478},{"className":477},[],[479],{"type":25,"value":57},{"type":25,"value":59},{"type":20,"tag":43,"props":482,"children":484},{"className":483},[],[485],{"type":25,"value":65},{"type":25,"value":67},{"type":20,"tag":38,"props":488,"children":489},{"code":70,"filename":71,"language":72,"meta":7,"className":73,"style":7},[490],{"type":20,"tag":43,"props":491,"children":492},{"__ignoreMap":7},[493,520,527],{"type":20,"tag":79,"props":494,"children":495},{"class":81,"line":82},[496,500,504,508,512,516],{"type":20,"tag":79,"props":497,"children":498},{"style":86},[499],{"type":25,"value":89},{"type":20,"tag":79,"props":501,"children":502},{"style":92},[503],{"type":25,"value":95},{"type":20,"tag":79,"props":505,"children":506},{"style":98},[507],{"type":25,"value":101},{"type":20,"tag":79,"props":509,"children":510},{"style":86},[511],{"type":25,"value":106},{"type":20,"tag":79,"props":513,"children":514},{"style":109},[515],{"type":25,"value":112},{"type":20,"tag":79,"props":517,"children":518},{"style":86},[519],{"type":25,"value":117},{"type":20,"tag":79,"props":521,"children":522},{"class":81,"line":120},[523],{"type":20,"tag":79,"props":524,"children":525},{"style":86},[526],{"type":25,"value":126},{"type":20,"tag":79,"props":528,"children":529},{"class":81,"line":129},[530,534,538],{"type":20,"tag":79,"props":531,"children":532},{"style":86},[533],{"type":25,"value":135},{"type":20,"tag":79,"props":535,"children":536},{"style":92},[537],{"type":25,"value":95},{"type":20,"tag":79,"props":539,"children":540},{"style":86},[541],{"type":25,"value":117},{"type":20,"tag":21,"props":543,"children":544},{},[545,546,551,552,557,558,563],{"type":25,"value":148},{"type":20,"tag":43,"props":547,"children":549},{"className":548},[],[550],{"type":25,"value":154},{"type":25,"value":156},{"type":20,"tag":43,"props":553,"children":555},{"className":554},[],[556],{"type":25,"value":65},{"type":25,"value":163},{"type":20,"tag":43,"props":559,"children":561},{"className":560},[],[562],{"type":25,"value":169},{"type":25,"value":171},{"type":20,"tag":21,"props":565,"children":566},{},[567,568,573],{"type":25,"value":176},{"type":20,"tag":43,"props":569,"children":571},{"className":570},[],[572],{"type":25,"value":169},{"type":25,"value":183},{"type":20,"tag":21,"props":575,"children":576},{},[577],{"type":25,"value":188},{"type":20,"tag":27,"props":579,"children":580},{"id":191},[581],{"type":25,"value":191},{"type":20,"tag":21,"props":583,"children":584},{},[585,586,591,592,597,598,606,607,612],{"type":25,"value":198},{"type":20,"tag":200,"props":587,"children":589},{"href":202,"rel":588},[204],[590],{"type":25,"value":207},{"type":25,"value":209},{"type":20,"tag":200,"props":593,"children":595},{"href":212,"rel":594},[204],[596],{"type":25,"value":216},{"type":25,"value":218},{"type":20,"tag":220,"props":599,"children":600},{},[601],{"type":20,"tag":200,"props":602,"children":604},{"href":225,"ariaDescribedBy":603,"dataFootnoteRef":7,"id":228},[227],[605],{"type":25,"value":231},{"type":25,"value":233},{"type":20,"tag":43,"props":608,"children":610},{"className":609},[],[611],{"type":25,"value":239},{"type":25,"value":241},{"type":20,"tag":38,"props":614,"children":615},{"code":244},[616],{"type":20,"tag":43,"props":617,"children":618},{"__ignoreMap":7},[619],{"type":25,"value":244},{"type":20,"tag":38,"props":621,"children":622},{"code":252,"filename":253,"language":72,"meta":7,"className":73,"style":7},[623],{"type":20,"tag":43,"props":624,"children":625},{"__ignoreMap":7},[626,641,656],{"type":20,"tag":79,"props":627,"children":628},{"class":81,"line":82},[629,633,637],{"type":20,"tag":79,"props":630,"children":631},{"style":86},[632],{"type":25,"value":89},{"type":20,"tag":79,"props":634,"children":635},{"style":92},[636],{"type":25,"value":269},{"type":20,"tag":79,"props":638,"children":639},{"style":86},[640],{"type":25,"value":117},{"type":20,"tag":79,"props":642,"children":643},{"class":81,"line":120},[644,648,652],{"type":20,"tag":79,"props":645,"children":646},{"style":86},[647],{"type":25,"value":281},{"type":20,"tag":79,"props":649,"children":650},{"style":92},[651],{"type":25,"value":286},{"type":20,"tag":79,"props":653,"children":654},{"style":86},[655],{"type":25,"value":291},{"type":20,"tag":79,"props":657,"children":658},{"class":81,"line":129},[659,663,667],{"type":20,"tag":79,"props":660,"children":661},{"style":86},[662],{"type":25,"value":135},{"type":20,"tag":79,"props":664,"children":665},{"style":92},[666],{"type":25,"value":269},{"type":20,"tag":79,"props":668,"children":669},{"style":86},[670],{"type":25,"value":117},{"type":20,"tag":27,"props":672,"children":673},{"id":309},[674],{"type":25,"value":309},{"type":20,"tag":21,"props":676,"children":677},{},[678,679,687,688,693],{"type":25,"value":316},{"type":20,"tag":220,"props":680,"children":681},{},[682],{"type":20,"tag":200,"props":683,"children":685},{"href":322,"ariaDescribedBy":684,"dataFootnoteRef":7,"id":324},[227],[686],{"type":25,"value":327},{"type":25,"value":329},{"type":20,"tag":43,"props":689,"children":691},{"className":690},[],[692],{"type":25,"value":335},{"type":25,"value":337},{"type":20,"tag":339,"props":695,"children":696},{"id":341},[697],{"type":25,"value":344},{"type":20,"tag":21,"props":699,"children":700},{},[701],{"type":20,"tag":349,"props":702,"children":703},{"alt":351,"src":352},[],{"type":20,"tag":339,"props":705,"children":706},{"id":356},[707],{"type":25,"value":359},{"type":20,"tag":21,"props":709,"children":710},{},[711],{"type":20,"tag":349,"props":712,"children":713},{"alt":365,"src":366},[],{"type":20,"tag":369,"props":715,"children":717},{"className":716,"dataFootnotes":7},[372],[718,723],{"type":20,"tag":27,"props":719,"children":721},{"className":720,"id":227},[377],[722],{"type":25,"value":380},{"type":20,"tag":382,"props":724,"children":725},{},[726,740],{"type":20,"tag":386,"props":727,"children":728},{"id":388},[729,734,735],{"type":20,"tag":200,"props":730,"children":732},{"href":392,"rel":731},[204],[733],{"type":25,"value":396},{"type":25,"value":398},{"type":20,"tag":200,"props":736,"children":738},{"href":401,"ariaLabel":402,"className":737,"dataFootnoteBackref":7},[404],[739],{"type":25,"value":407},{"type":20,"tag":386,"props":741,"children":742},{"id":410},[743,748,749],{"type":20,"tag":200,"props":744,"children":746},{"href":414,"rel":745},[204],[747],{"type":25,"value":418},{"type":25,"value":398},{"type":20,"tag":200,"props":750,"children":752},{"href":422,"ariaLabel":423,"className":751,"dataFootnoteBackref":7},[404],[753],{"type":25,"value":407},{"type":20,"tag":428,"props":755,"children":756},{},[757],{"type":25,"value":432},{"title":7,"searchDepth":120,"depth":120,"links":759},[760,761,762,766],{"id":29,"depth":120,"text":29},{"id":191,"depth":120,"text":191},{"id":309,"depth":120,"text":309,"children":763},[764,765],{"id":341,"depth":129,"text":344},{"id":356,"depth":129,"text":359},{"id":227,"depth":120,"text":380},1735553888999]