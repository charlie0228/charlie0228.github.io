{"_path":"/post/20240215-google-drive-download-part-migrate-in-macos","_dir":"post","_draft":false,"_partial":false,"_locale":"","title":"macOS 合併 Google Drive 壓縮下載","description":"前幾天從朋友分享的 Google Drive 連結，下載一大包檔案，因為檔案很大，超過 2GB，所以 Google 預設幫我分割檔案。因為之前都用 Windows 電腦，所以也沒發現什麼不妥，就很直覺的把檔案下載下來之後準備解壓縮。","tags":"mac, bash, google, google drive","readingTime":{"text":"4 min read","minutes":3.155,"time":189300,"words":631},"body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"前幾天從朋友分享的 Google Drive 連結，下載一大包檔案，因為檔案很大，超過 2GB，所以 Google 預設幫我分割檔案。因為之前都用 Windows 電腦，所以也沒發現什麼不妥，就很直覺的把檔案下載下來之後準備解壓縮。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"沒想到在 macOS 上解壓縮居然跟 Windows 上不一樣，因為之前都很直覺用 WinRAR 直接解開，並不會有資料夾覆蓋的問題，但是在 macOS 上，會多出很多不同的資料夾，檔案被分散開了，整理起來很不方便。於是開始線上到處搜尋，到處找解法，卻發現不知道如何下關鍵字，內容好像也很少，最後總算找到兩篇之後"},{"type":"element","tag":"sup","props":{},"children":[{"type":"element","tag":"a","props":{"href":"#user-content-fn-1","ariaDescribedBy":["footnote-label"],"dataFootnoteRef":"","id":"user-content-fnref-1"},"children":[{"type":"text","value":"1"}]}]},{"type":"text","value":" "},{"type":"element","tag":"sup","props":{},"children":[{"type":"element","tag":"a","props":{"href":"#user-content-fn-2","ariaDescribedBy":["footnote-label"],"dataFootnoteRef":"","id":"user-content-fnref-2"},"children":[{"type":"text","value":"2"}]}]},{"type":"text","value":"，為了怕以後忘記，就把這篇作為部落格重開的第一篇技術文章。"}]},{"type":"element","tag":"h2","props":{"id":"步驟"},"children":[{"type":"text","value":"步驟"}]},{"type":"element","tag":"h3","props":{"id":"建立資料夾"},"children":[{"type":"text","value":"建立資料夾"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"先建立一個資料夾，作為等等解壓縮後放結果的地方，這邊就命名為 "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"combined"}]}]},{"type":"element","tag":"pre","props":{"className":"language-bash shiki shiki-themes one-dark-pro","code":"mkdir combined\n","language":"bash","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#61AFEF"},"children":[{"type":"text","value":"mkdir"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#98C379"},"children":[{"type":"text","value":" combined\n"}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"unzip"},"children":[{"type":"text","value":"Unzip"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"透過 "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"unzip"}]},{"type":"text","value":" 指令，將 zip 檔解開至指定的資料夾"}]},{"type":"element","tag":"pre","props":{"className":"language-bash shiki shiki-themes one-dark-pro","code":"unzip drive-20231126T090225Z-001.zip -d combined\n","language":"bash","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#61AFEF"},"children":[{"type":"text","value":"unzip"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#98C379"},"children":[{"type":"text","value":" drive-20231126T090225Z-001.zip -d combined\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"這樣就可以順利解開囉！\n不過你會發現，咦？這樣只解開了一個啊，那我如果有幾十個檔案，不就要手動輸入幾十次指令？"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"這時候就可以使用 "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"for"}]},{"type":"text","value":" 指令，搭配萬用字元 "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"*"}]},{"type":"text","value":" 來進行多個檔案解壓縮，具體的指令如下："}]},{"type":"element","tag":"pre","props":{"className":"language-bash shiki shiki-themes one-dark-pro","code":"for archive in drive-20231126T090225Z-*.zip\ndo\n  unzip \"$archive\" -d combined\ndone\n","language":"bash","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C678DD"},"children":[{"type":"text","value":"for"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E06C75"},"children":[{"type":"text","value":" archive"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C678DD"},"children":[{"type":"text","value":" in"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#ABB2BF"},"children":[{"type":"text","value":" drive-20231126T090225Z-*.zip\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C678DD"},"children":[{"type":"text","value":"do\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#61AFEF"},"children":[{"type":"text","value":"  unzip"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#98C379"},"children":[{"type":"text","value":" \""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E06C75"},"children":[{"type":"text","value":"$archive"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#98C379"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D19A66"},"children":[{"type":"text","value":" -d"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#98C379"},"children":[{"type":"text","value":" combined\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C678DD"},"children":[{"type":"text","value":"done\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"通常到這邊就結束拉，不過事情總是沒那麼簡單，"},{"type":"element","tag":"del","props":{},"children":[{"type":"text","value":"俗話說得好，不出意外的話就要出意外了"}]},{"type":"text","value":"如果遇到壓縮檔中含有 non-ASCII 檔名 (e.g. 中文，日文等)，就會遇到 "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"Illegal byte sequence"}]},{"type":"text","value":" 錯誤。"}]},{"type":"element","tag":"pre","props":{"className":"language-bash shiki shiki-themes one-dark-pro","code":"checkdir error:  cannot create combined/�����?��+\n                 Illegal byte sequence\n                 unable to process �����?��+/�����������-�򦵣�/�����+��+�������+����Ѣަ� ��������������࿵�����?�뮵�ֵ��ަ���� (�����ի�).pdf.\ncheckdir error:  cannot create combined/�����?��+\n                 Illegal byte sequence\n                 unable to process �����?��+/�����������-�򦵣�/�+�����֦�֢���.pdf.\n","language":"bash","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#61AFEF"},"children":[{"type":"text","value":"checkdir"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#98C379"},"children":[{"type":"text","value":" error:  cannot create combined/�����?��+\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#61AFEF"},"children":[{"type":"text","value":"                 Illegal"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#98C379"},"children":[{"type":"text","value":" byte sequence\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#61AFEF"},"children":[{"type":"text","value":"                 unable"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#98C379"},"children":[{"type":"text","value":" to process �����?��+/�����������-�򦵣�/�����+��+�������+����Ѣަ� ��������������࿵�����?�뮵�ֵ��ަ���� "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#ABB2BF"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#61AFEF"},"children":[{"type":"text","value":"�����ի�"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#ABB2BF"},"children":[{"type":"text","value":")"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#98C379"},"children":[{"type":"text","value":".pdf.\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#61AFEF"},"children":[{"type":"text","value":"checkdir"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#98C379"},"children":[{"type":"text","value":" error:  cannot create combined/�����?��+\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#61AFEF"},"children":[{"type":"text","value":"                 Illegal"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#98C379"},"children":[{"type":"text","value":" byte sequence\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#61AFEF"},"children":[{"type":"text","value":"                 unable"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#98C379"},"children":[{"type":"text","value":" to process �����?��+/�����������-�򦵣�/�+�����֦�֢���.pdf.\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"那怎麼辦？這時候就要請出另一個指令，"},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"ditto"}]},{"type":"text","value":" 來協助了。"}]},{"type":"element","tag":"h3","props":{"id":"ditto"},"children":[{"type":"text","value":"Ditto"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"ditto"}]},{"type":"text","value":" 是 macOS 中的內建指令，根據 "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"man ditto"}]},{"type":"text","value":" 中的說明，這個指令除了可以解壓縮，合併之外，還可以進行檔案的複製 (跟 "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"cp"}]},{"type":"text","value":" 指令類似)"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"那前面遇到 non-ASCII 的問題，透過 "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"ditto"}]},{"type":"text","value":" 指令就可以處理："}]},{"type":"element","tag":"pre","props":{"className":"language-bash shiki shiki-themes one-dark-pro","code":"ditto -V -x -k --sequesterRsrc drive-20231126T090225Z-001.zip combined\n","language":"bash","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#61AFEF"},"children":[{"type":"text","value":"ditto"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D19A66"},"children":[{"type":"text","value":" -V"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D19A66"},"children":[{"type":"text","value":" -x"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D19A66"},"children":[{"type":"text","value":" -k"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D19A66"},"children":[{"type":"text","value":" --sequesterRsrc"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#98C379"},"children":[{"type":"text","value":" drive-20231126T090225Z-001.zip combined\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"結合 "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"for"}]},{"type":"text","value":" 之後，最後完整的指令如下："}]},{"type":"element","tag":"pre","props":{"className":"language-bash shiki shiki-themes one-dark-pro","code":"for archive in drive-20231126T090225Z-*.zip\ndo\n  ditto -V -x -k --sequesterRsrc \"$archive\" combined\ndone\n","language":"bash","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C678DD"},"children":[{"type":"text","value":"for"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E06C75"},"children":[{"type":"text","value":" archive"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#C678DD"},"children":[{"type":"text","value":" in"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#ABB2BF"},"children":[{"type":"text","value":" drive-20231126T090225Z-*.zip\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C678DD"},"children":[{"type":"text","value":"do\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#61AFEF"},"children":[{"type":"text","value":"  ditto"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D19A66"},"children":[{"type":"text","value":" -V"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D19A66"},"children":[{"type":"text","value":" -x"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D19A66"},"children":[{"type":"text","value":" -k"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D19A66"},"children":[{"type":"text","value":" --sequesterRsrc"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#98C379"},"children":[{"type":"text","value":" \""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E06C75"},"children":[{"type":"text","value":"$archive"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#98C379"},"children":[{"type":"text","value":"\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#98C379"},"children":[{"type":"text","value":" combined\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#C678DD"},"children":[{"type":"text","value":"done\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"執行之後，一切順利，檔案成功解壓縮，名稱也都正確，也沒有出現一堆多餘的資料夾。"}]},{"type":"element","tag":"section","props":{"className":["footnotes"],"dataFootnotes":""},"children":[{"type":"element","tag":"h2","props":{"className":["sr-only"],"id":"footnote-label"},"children":[{"type":"text","value":"Reference"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{"id":"user-content-fn-1"},"children":[{"type":"element","tag":"a","props":{"href":"https://blog.yangjerry.tw/2023/08/13/google-drive-download-part-migrate/","rel":["nofollow"]},"children":[{"type":"text","value":"macOS 合併 Google Drive 壓縮下載 - Jerry Yang's Blog"}]},{"type":"text","value":" "},{"type":"element","tag":"a","props":{"href":"#user-content-fnref-1","ariaLabel":"Back to reference 1","className":["data-footnote-backref"],"dataFootnoteBackref":""},"children":[{"type":"text","value":"↩"}]}]},{"type":"element","tag":"li","props":{"id":"user-content-fn-2"},"children":[{"type":"element","tag":"a","props":{"href":"https://stackoverflow.com/questions/68201952/merge-combine-multiple-downloaded-zip-files-from-google-drive-on-mac","rel":["nofollow"]},"children":[{"type":"text","value":"Merge/combine multiple downloaded ZIP-files from Google Drive on Mac [closed]"}]},{"type":"text","value":" "},{"type":"element","tag":"a","props":{"href":"#user-content-fnref-2","ariaLabel":"Back to reference 2","className":["data-footnote-backref"],"dataFootnoteBackref":""},"children":[{"type":"text","value":"↩"}]}]}]}]},{"type":"element","tag":"style","props":{},"children":[{"type":"text","value":"html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"步驟","depth":2,"text":"步驟","children":[{"id":"建立資料夾","depth":3,"text":"建立資料夾"},{"id":"unzip","depth":3,"text":"Unzip"},{"id":"ditto","depth":3,"text":"Ditto"}]},{"id":"footnote-label","depth":2,"text":"Reference"}]}},"_type":"markdown","_id":"content:post:20240215-google-drive-download-part-migrate-in-macos.md","_source":"content","_file":"post/20240215-google-drive-download-part-migrate-in-macos.md","_extension":"md","createdAt":"2024-02-15T10:37:14.000Z","updatedAt":"2024-03-04T07:46:02.000Z"}