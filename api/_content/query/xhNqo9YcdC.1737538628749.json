{"_path":"/post/20241230-nuxt-3-nested-routes","_dir":"post","_draft":false,"_partial":false,"_locale":"","title":"Nuxt3 Nested Routes 與 active class","description":"今天在處理公司專案的時候，遇到一個 Nuxt3 nested routes 小問題，剛好把它記錄下來，就當作這個 blog 2024 年最後一篇文章了 (遮臉)。","tags":"vue, nuxt, vue3, nuxt3, vue-router, 隨筆","readingTime":{"text":"2 min read","minutes":1.81,"time":108600,"words":362},"body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"今天在處理公司專案的時候，遇到一個 Nuxt3 nested routes 小問題，剛好把它記錄下來，就當作這個 blog 2024 年最後一篇文章了 (遮臉)。"}]},{"type":"element","tag":"h2","props":{"id":"問題描述"},"children":[{"type":"text","value":"問題描述"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"公司的 Nuxt3 專案有以下的 Page 資料夾結構："}]},{"type":"element","tag":"pre","props":{"code":".\n└── pages/\n    ├── campaign/\n    │   └── [id]/\n    │       └── settings.vue\n    └── index.vue\n"},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":".\n└── pages/\n    ├── campaign/\n    │   └── [id]/\n    │       └── settings.vue\n    └── index.vue\n"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"我在 "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"index.vue"}]},{"type":"text","value":" 這一頁使用了 "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"<NuxtLink>"}]},{"type":"text","value":"，使用的 html 結構如下："}]},{"type":"element","tag":"pre","props":{"code":"<NuxtLink to=\"/campaign\">\n  Campaign\n</NuxtLink>\n","filename":"page/index.vue","language":"vue","meta":"","className":"language-vue shiki shiki-themes one-dark-pro","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#ABB2BF"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E06C75"},"children":[{"type":"text","value":"NuxtLink"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D19A66"},"children":[{"type":"text","value":" to"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#ABB2BF"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#98C379"},"children":[{"type":"text","value":"\"/campaign\""}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#ABB2BF"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#ABB2BF"},"children":[{"type":"text","value":"  Campaign\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#ABB2BF"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E06C75"},"children":[{"type":"text","value":"NuxtLink"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#ABB2BF"},"children":[{"type":"text","value":">\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"並希望在頁面路由是 "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"/campaign/:id/settings"}]},{"type":"text","value":" 的時候，"},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"<NuxtLink>"}]},{"type":"text","value":" 的 "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"active class"}]},{"type":"text","value":" 要顯示出來。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"但是，很顯然的，當我發了這邊文章就表示，他並沒有正常顯示 "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"active class"}]},{"type":"text","value":"。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"很顯然，我一定是遺漏了什麼......。"}]},{"type":"element","tag":"h2","props":{"id":"解決方法"},"children":[{"type":"text","value":"解決方法"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"經過我各種 Google 搜尋 (我想說這個問題應該不用去勞煩 "},{"type":"element","tag":"a","props":{"href":"https://chat.openai.com","rel":["nofollow"]},"children":[{"type":"text","value":"ChatGPT"}]},{"type":"text","value":" 或是 "},{"type":"element","tag":"a","props":{"href":"https://www.claude.ai","rel":["nofollow"]},"children":[{"type":"text","value":"Claude"}]},{"type":"text","value":" 了)，在 Stack Overflow 上查到了這篇文章"},{"type":"element","tag":"sup","props":{},"children":[{"type":"element","tag":"a","props":{"href":"#user-content-fn-1","ariaDescribedBy":["footnote-label"],"dataFootnoteRef":"","id":"user-content-fnref-1"},"children":[{"type":"text","value":"1"}]}]},{"type":"text","value":"，根據解答的說明，把資料夾的結構修改後，並新增一個 "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"campaign.vue"}]},{"type":"text","value":" 頁面，問題就解決了。"}]},{"type":"element","tag":"pre","props":{"code":".\n└── pages/\n    ├── campaign/\n    │   └── [id]/\n    │       └── settings.vue\n    ├── campaign.vue\n    └── index.vue\n"},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":".\n└── pages/\n    ├── campaign/\n    │   └── [id]/\n    │       └── settings.vue\n    ├── campaign.vue\n    └── index.vue\n"}]}]},{"type":"element","tag":"pre","props":{"code":"<template>\n  <NuxtPage />\n</template>\n","filename":"page/campaign.vue","language":"vue","meta":"","className":"language-vue shiki shiki-themes one-dark-pro","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#ABB2BF"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E06C75"},"children":[{"type":"text","value":"template"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#ABB2BF"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#ABB2BF"},"children":[{"type":"text","value":"  <"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E06C75"},"children":[{"type":"text","value":"NuxtPage"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#ABB2BF"},"children":[{"type":"text","value":" />\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#ABB2BF"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#E06C75"},"children":[{"type":"text","value":"template"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#ABB2BF"},"children":[{"type":"text","value":">\n"}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"打包後的差異"},"children":[{"type":"text","value":"打包後的差異"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"後來根據 Slack Overflow 解答下方的討論中，回頭去看了 Nuxt 的官方文件"},{"type":"element","tag":"sup","props":{},"children":[{"type":"element","tag":"a","props":{"href":"#user-content-fn-2","ariaDescribedBy":["footnote-label"],"dataFootnoteRef":"","id":"user-content-fnref-2"},"children":[{"type":"text","value":"2"}]}]},{"type":"text","value":"，裡面有提到，如何讓 Nuxt 正確地把 nested routes 建立出來，後面為了確認到底這兩個設定在背後的差異為何，我到了 "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":".nuxt/dist"}]},{"type":"text","value":" 資料夾中去翻找，證實了這兩個設定的差異。"}]},{"type":"element","tag":"h3","props":{"id":"有-nested-routes"},"children":[{"type":"text","value":"有 Nested Routes"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"包含 page/campaign.vue","src":"/img/20241230-with-children-route.png"},"children":[]}]},{"type":"element","tag":"h3","props":{"id":"沒有-nested-routes"},"children":[{"type":"text","value":"沒有 Nested Routes"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"不包含 page/campaign.vue","src":"/img/20241230-without-children-route.png"},"children":[]}]},{"type":"element","tag":"section","props":{"className":["footnotes"],"dataFootnotes":""},"children":[{"type":"element","tag":"h2","props":{"className":["sr-only"],"id":"footnote-label"},"children":[{"type":"text","value":"Reference"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{"id":"user-content-fn-1"},"children":[{"type":"element","tag":"a","props":{"href":"https://stackoverflow.com/questions/74637529/router-link-active-nuxt-3-vuejs-on-nested-routes-not-applying-to-parent","rel":["nofollow"]},"children":[{"type":"text","value":"javascript - router-link-active Nuxt 3 / VueJS on nested routes not applying to parent - Stack Overflow"}]},{"type":"text","value":" "},{"type":"element","tag":"a","props":{"href":"#user-content-fnref-1","ariaLabel":"Back to reference 1","className":["data-footnote-backref"],"dataFootnoteBackref":""},"children":[{"type":"text","value":"↩"}]}]},{"type":"element","tag":"li","props":{"id":"user-content-fn-2"},"children":[{"type":"element","tag":"a","props":{"href":"https://nuxt.com/docs/guide/directory-structure/pages#nested-routes","rel":["nofollow"]},"children":[{"type":"text","value":"pages/ · Nuxt Directory Structure"}]},{"type":"text","value":" "},{"type":"element","tag":"a","props":{"href":"#user-content-fnref-2","ariaLabel":"Back to reference 2","className":["data-footnote-backref"],"dataFootnoteBackref":""},"children":[{"type":"text","value":"↩"}]}]}]}]},{"type":"element","tag":"style","props":{},"children":[{"type":"text","value":"html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"問題描述","depth":2,"text":"問題描述"},{"id":"解決方法","depth":2,"text":"解決方法"},{"id":"打包後的差異","depth":2,"text":"打包後的差異","children":[{"id":"有-nested-routes","depth":3,"text":"有 Nested Routes"},{"id":"沒有-nested-routes","depth":3,"text":"沒有 Nested Routes"}]},{"id":"footnote-label","depth":2,"text":"Reference"}]}},"_type":"markdown","_id":"content:post:20241230-nuxt-3-nested-routes.md","_source":"content","_file":"post/20241230-nuxt-3-nested-routes.md","_extension":"md","createdAt":"2024-12-30T10:16:55.000Z","updatedAt":"2024-12-31T05:30:45.000Z"}