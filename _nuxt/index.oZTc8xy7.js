import{aR as P,aS as k,e as L,r as g,a_ as R,H as C,T as M,ak as q,aV as G}from"./entry.WbkLwLdk.js";function x(e){return P()?(k(e),!0):!1}function b(e){return typeof e=="function"?e():L(e)}const T=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const N=e=>e!=null,V=Object.prototype.toString,B=e=>V.call(e)==="[object Object]",w=()=>{};function D(e){let t;function n(){return t||(t=e()),t}return n.reset=async()=>{const r=t;t=void 0,r&&await r},n}function F(e,t,n={}){const{immediate:r=!0}=n,a=g(!1);let o=null;function c(){o&&(clearTimeout(o),o=null)}function l(){a.value=!1,c()}function p(...f){c(),a.value=!0,o=setTimeout(()=>{a.value=!1,o=null,e(...f)},b(t))}return r&&(a.value=!0,T&&p()),x(l),{isPending:R(a),start:p,stop:l}}function S(e){var t;const n=b(e);return(t=n==null?void 0:n.$el)!=null?t:n}const W=T?window:void 0,j=T?window.navigator:void 0;function I(...e){let t,n,r,a;if(typeof e[0]=="string"||Array.isArray(e[0])?([n,r,a]=e,t=W):[t,n,r,a]=e,!t)return w;Array.isArray(n)||(n=[n]),Array.isArray(r)||(r=[r]);const o=[],c=()=>{o.forEach(s=>s()),o.length=0},l=(s,i,y,v)=>(s.addEventListener(i,y,v),()=>s.removeEventListener(i,y,v)),p=M(()=>[S(t),b(a)],([s,i])=>{if(c(),!s)return;const y=B(i)?{...i}:i;o.push(...n.flatMap(v=>r.map(d=>l(s,v,d,y))))},{immediate:!0,flush:"post"}),f=()=>{p(),c()};return x(f),f}function H(){const e=g(!1);return q()&&G(()=>{e.value=!0}),e}function _(e){const t=H();return C(()=>(t.value,!!e()))}function O(e,t={}){const{controls:n=!1,navigator:r=j}=t,a=_(()=>r&&"permissions"in r);let o;const c=typeof e=="string"?{name:e}:e,l=g(),p=()=>{o&&(l.value=o.state)},f=D(async()=>{if(a.value){if(!o)try{o=await r.permissions.query(c),I(o,"change",p),p()}catch{l.value="prompt"}return o}});return f(),n?{state:l,isSupported:a,query:f}:l}function z(e={}){const{navigator:t=j,read:n=!1,source:r,copiedDuring:a=1500,legacy:o=!1}=e,c=_(()=>t&&"clipboard"in t),l=O("clipboard-read"),p=O("clipboard-write"),f=C(()=>c.value||o),s=g(""),i=g(!1),y=F(()=>i.value=!1,a);function v(){c.value&&l.value!=="denied"?t.clipboard.readText().then(u=>{s.value=u}):s.value=h()}f.value&&n&&I(["copy","cut"],v);async function d(u=b(r)){f.value&&u!=null&&(c.value&&p.value!=="denied"?await t.clipboard.writeText(u):A(u),s.value=u,i.value=!0,y.start())}function A(u){const m=document.createElement("textarea");m.value=u??"",m.style.position="absolute",m.style.opacity="0",document.body.appendChild(m),m.select(),document.execCommand("copy"),m.remove()}function h(){var u,m,E;return(E=(m=(u=document==null?void 0:document.getSelection)==null?void 0:u.call(document))==null?void 0:m.toString())!=null?E:""}return{isSupported:f,text:s,copied:i,copy:d}}function J(e,t,n={}){const{root:r,rootMargin:a="0px",threshold:o=.1,window:c=W,immediate:l=!0}=n,p=_(()=>c&&"IntersectionObserver"in c),f=C(()=>{const d=b(e);return(Array.isArray(d)?d:[d]).map(S).filter(N)});let s=w;const i=g(l),y=p.value?M(()=>[f.value,S(r),i.value],([d,A])=>{if(s(),!i.value||!d.length)return;const h=new IntersectionObserver(t,{root:S(A),rootMargin:a,threshold:o});d.forEach(u=>u&&h.observe(u)),s=()=>{h.disconnect(),s=w}},{immediate:l,flush:"post"}):w,v=()=>{s(),y(),i.value=!1};return x(v),{isSupported:p,isActive:i,pause(){s(),i.value=!1},resume(){i.value=!0},stop:v}}export{J as a,z as u};
