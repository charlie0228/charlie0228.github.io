import{b2 as P,b3 as L,e as k,r as b,bb as q,j as C,l as M,am as G,v as N}from"./entry.W-iIX5Z4.js";function x(e){return P()?(L(e),!0):!1}function g(e){return typeof e=="function"?e():k(e)}const E=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const R=e=>e!=null,B=Object.prototype.toString,D=e=>B.call(e)==="[object Object]",w=()=>{};function F(e){let t;function n(){return t||(t=e()),t}return n.reset=async()=>{const r=t;t=void 0,r&&await r},n}function V(e,t,n={}){const{immediate:r=!0}=n,u=b(!1);let o=null;function c(){o&&(clearTimeout(o),o=null)}function l(){u.value=!1,c()}function p(...f){c(),u.value=!0,o=setTimeout(()=>{u.value=!1,o=null,e(...f)},g(t))}return r&&(u.value=!0,E&&p()),x(l),{isPending:q(u),start:p,stop:l}}function S(e){var t;const n=g(e);return(t=n==null?void 0:n.$el)!=null?t:n}const W=E?window:void 0,j=E?window.navigator:void 0;function I(...e){let t,n,r,u;if(typeof e[0]=="string"||Array.isArray(e[0])?([n,r,u]=e,t=W):[t,n,r,u]=e,!t)return w;Array.isArray(n)||(n=[n]),Array.isArray(r)||(r=[r]);const o=[],c=()=>{o.forEach(s=>s()),o.length=0},l=(s,i,y,v)=>(s.addEventListener(i,y,v),()=>s.removeEventListener(i,y,v)),p=M(()=>[S(t),g(u)],([s,i])=>{if(c(),!s)return;const y=D(i)?{...i}:i;o.push(...n.flatMap(v=>r.map(d=>l(s,v,d,y))))},{immediate:!0,flush:"post"}),f=()=>{p(),c()};return x(f),f}function $(){const e=b(!1);return G()&&N(()=>{e.value=!0}),e}function O(e){const t=$();return C(()=>(t.value,!!e()))}function _(e,t={}){const{controls:n=!1,navigator:r=j}=t,u=O(()=>r&&"permissions"in r);let o;const c=typeof e=="string"?{name:e}:e,l=b(),p=()=>{o&&(l.value=o.state)},f=F(async()=>{if(u.value){if(!o)try{o=await r.permissions.query(c),I(o,"change",p),p()}catch{l.value="prompt"}return o}});return f(),n?{state:l,isSupported:u,query:f}:l}function H(e={}){const{navigator:t=j,read:n=!1,source:r,copiedDuring:u=1500,legacy:o=!1}=e,c=O(()=>t&&"clipboard"in t),l=_("clipboard-read"),p=_("clipboard-write"),f=C(()=>c.value||o),s=b(""),i=b(!1),y=V(()=>i.value=!1,u);function v(){c.value&&l.value!=="denied"?t.clipboard.readText().then(a=>{s.value=a}):s.value=h()}f.value&&n&&I(["copy","cut"],v);async function d(a=g(r)){f.value&&a!=null&&(c.value&&p.value!=="denied"?await t.clipboard.writeText(a):A(a),s.value=a,i.value=!0,y.start())}function A(a){const m=document.createElement("textarea");m.value=a??"",m.style.position="absolute",m.style.opacity="0",document.body.appendChild(m),m.select(),document.execCommand("copy"),m.remove()}function h(){var a,m,T;return(T=(m=(a=document==null?void 0:document.getSelection)==null?void 0:a.call(document))==null?void 0:m.toString())!=null?T:""}return{isSupported:f,text:s,copied:i,copy:d}}function J(e,t,n={}){const{root:r,rootMargin:u="0px",threshold:o=.1,window:c=W,immediate:l=!0}=n,p=O(()=>c&&"IntersectionObserver"in c),f=C(()=>{const d=g(e);return(Array.isArray(d)?d:[d]).map(S).filter(R)});let s=w;const i=b(l),y=p.value?M(()=>[f.value,S(r),i.value],([d,A])=>{if(s(),!i.value||!d.length)return;const h=new IntersectionObserver(t,{root:S(A),rootMargin:u,threshold:o});d.forEach(a=>a&&h.observe(a)),s=()=>{h.disconnect(),s=w}},{immediate:l,flush:"post"}):w,v=()=>{s(),y(),i.value=!1};return x(v),{isSupported:p,isActive:i,pause(){s(),i.value=!1},resume(){i.value=!0},stop:v}}export{J as a,H as u};
