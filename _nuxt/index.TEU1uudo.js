import{r as H,h as J,i as Z,I as C,m as ee,j as ae,k as te,l as ne,n as le,q as se,s as ie,v as re,x as ue,y as oe,z as ve,A as ce,B as de,C as fe,D as ge,E as me,F as j,G as pe,H as f,J as y,K as be,L as w,a as v,V as I,M as S,N as q,O as G,d as ye,P as he,Q as _e,R as xe,S as ke,T as Pe,u as Le,o as P,U as B,W as D,X as Ve,e as L,c as Ae,Y as M,t as R,w as T,f as $,b as E,Z as K,_ as Ie}from"./entry.vw3tAz1s.js";import{u as Se}from"./dayjs.pnllSXNk.js";import{u as Be}from"./useDefaultQuery.9Yfyx6H9.js";import{u as Re}from"./query.3fjpYHku.js";import{_ as z}from"./lodash.1OC-RLuA.js";import{V as Ce}from"./VCard.kc6YOhoX.js";import{_ as we}from"./_plugin-vue_export-helper.x3n3nnut.js";import"./preview.CDXYA4Cq.js";import"./VImg.ju-a5aRN.js";function $e(){const e=H([]);J(()=>e.value=[]);function g(i,b){e.value[b]=i}return{refs:e,updateRef:g}}const Fe=Z({activeColor:String,start:{type:[Number,String],default:1},modelValue:{type:Number,default:e=>e.start},disabled:Boolean,length:{type:[Number,String],default:1,validator:e=>e%1===0},totalVisible:[Number,String],firstIcon:{type:C,default:"$first"},prevIcon:{type:C,default:"$prev"},nextIcon:{type:C,default:"$next"},lastIcon:{type:C,default:"$last"},ariaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.root"},pageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.page"},currentPageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.currentPage"},firstAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.first"},previousAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.previous"},nextAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.next"},lastAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.last"},ellipsis:{type:String,default:"..."},showFirstLastPage:Boolean,...ee(),...ae(),...te(),...ne(),...le(),...se(),...ie({tag:"nav"}),...re(),...ue({variant:"text"})},"VPagination"),Ne=oe()({name:"VPagination",props:Fe(),emits:{"update:modelValue":e=>!0,first:e=>!0,prev:e=>!0,next:e=>!0,last:e=>!0},setup(e,g){let{slots:i,emit:b}=g;const l=ve(e,"modelValue"),{t:m,n:h}=ce(),{isRtl:_}=de(),{themeClasses:F}=fe(e),{width:x}=ge(),k=me(-1);j(void 0,{scoped:!0});const{resizeRef:N}=pe(a=>{if(!a.length)return;const{target:n,contentRect:s}=a[0],c=n.querySelector(".v-pagination__list > *");if(!c)return;const d=s.width,A=c.offsetWidth+parseFloat(getComputedStyle(c).marginRight)*2;k.value=o(d,A)}),r=f(()=>parseInt(e.length,10)),t=f(()=>parseInt(e.start,10)),u=f(()=>e.totalVisible!=null?parseInt(e.totalVisible,10):k.value>=0?k.value:o(x.value,58));function o(a,n){const s=e.showFirstLastPage?5:3;return Math.max(0,Math.floor(+((a-n*s)/n).toFixed(2)))}const U=f(()=>{if(r.value<=0||isNaN(r.value)||r.value>Number.MAX_SAFE_INTEGER)return[];if(u.value<=0)return[];if(u.value===1)return[l.value];if(r.value<=u.value)return w(r.value,t.value);const a=u.value%2===0,n=a?u.value/2:Math.floor(u.value/2),s=a?n:n+1,c=r.value-n;if(s-l.value>=0)return[...w(Math.max(1,u.value-1),t.value),e.ellipsis,r.value];if(l.value-c>=(a?1:0)){const d=u.value-1,A=r.value-d+t.value;return[t.value,e.ellipsis,...w(d,A)]}else{const d=Math.max(1,u.value-3),A=d===1?l.value:l.value-Math.ceil(d/2)+t.value;return[t.value,e.ellipsis,...w(d,A),e.ellipsis,r.value]}});function V(a,n,s){a.preventDefault(),l.value=n,s&&b(s,n)}const{refs:W,updateRef:O}=$e();j({VPaginationBtn:{color:y(e,"color"),border:y(e,"border"),density:y(e,"density"),size:y(e,"size"),variant:y(e,"variant"),rounded:y(e,"rounded"),elevation:y(e,"elevation")}});const Q=f(()=>U.value.map((a,n)=>{const s=c=>O(c,n);if(typeof a=="string")return{isActive:!1,key:`ellipsis-${n}`,page:a,props:{ref:s,ellipsis:!0,icon:!0,disabled:!0}};{const c=a===l.value;return{isActive:c,key:a,page:h(a),props:{ref:s,ellipsis:!1,icon:!0,disabled:!!e.disabled||+e.length<2,color:c?e.activeColor:e.color,"aria-current":c,"aria-label":m(c?e.currentPageAriaLabel:e.pageAriaLabel,a),onClick:d=>V(d,a)}}}})),p=f(()=>{const a=!!e.disabled||l.value<=t.value,n=!!e.disabled||l.value>=t.value+r.value-1;return{first:e.showFirstLastPage?{icon:_.value?e.lastIcon:e.firstIcon,onClick:s=>V(s,t.value,"first"),disabled:a,"aria-label":m(e.firstAriaLabel),"aria-disabled":a}:void 0,prev:{icon:_.value?e.nextIcon:e.prevIcon,onClick:s=>V(s,l.value-1,"prev"),disabled:a,"aria-label":m(e.previousAriaLabel),"aria-disabled":a},next:{icon:_.value?e.prevIcon:e.nextIcon,onClick:s=>V(s,l.value+1,"next"),disabled:n,"aria-label":m(e.nextAriaLabel),"aria-disabled":n},last:e.showFirstLastPage?{icon:_.value?e.firstIcon:e.lastIcon,onClick:s=>V(s,t.value+r.value-1,"last"),disabled:n,"aria-label":m(e.lastAriaLabel),"aria-disabled":n}:void 0}});function Y(){var n;const a=l.value-t.value;(n=W.value[a])==null||n.$el.focus()}function X(a){a.key===q.left&&!e.disabled&&l.value>+e.start?(l.value=l.value-1,G(Y)):a.key===q.right&&!e.disabled&&l.value<t.value+r.value-1&&(l.value=l.value+1,G(Y))}return be(()=>v(e.tag,{ref:N,class:["v-pagination",F.value,e.class],style:e.style,role:"navigation","aria-label":m(e.ariaLabel),onKeydown:X,"data-test":"v-pagination-root"},{default:()=>[v("ul",{class:"v-pagination__list"},[e.showFirstLastPage&&v("li",{key:"first",class:"v-pagination__first","data-test":"v-pagination-first"},[i.first?i.first(p.value.first):v(I,S({_as:"VPaginationBtn"},p.value.first),null)]),v("li",{key:"prev",class:"v-pagination__prev","data-test":"v-pagination-prev"},[i.prev?i.prev(p.value.prev):v(I,S({_as:"VPaginationBtn"},p.value.prev),null)]),Q.value.map((a,n)=>v("li",{key:a.key,class:["v-pagination__item",{"v-pagination__item--is-active":a.isActive}],"data-test":"v-pagination-item"},[i.item?i.item(a):v(I,S({_as:"VPaginationBtn"},a.props),{default:()=>[a.page]})])),v("li",{key:"next",class:"v-pagination__next","data-test":"v-pagination-next"},[i.next?i.next(p.value.next):v(I,S({_as:"VPaginationBtn"},p.value.next),null)]),e.showFirstLastPage&&v("li",{key:"last",class:"v-pagination__last","data-test":"v-pagination-last"},[i.last?i.last(p.value.last):v(I,S({_as:"VPaginationBtn"},p.value.last),null)])])]})),{}}}),De={key:0,class:"marked-year text-h2 font-weight-black text-blue-lighten-4"},Me={key:0,class:"text-red"},Te={class:"d-flex pt-1 text-caption"},Ee={class:"d-flex",title:"發布日期"},ze={class:"d-flex ml-3",title:"最後更新日期"},Ye=ye({__name:"index",async setup(e){let g,i;const b=he(),l=_e(),m=Se(),h=f(()=>b.params.page?Number.parseInt(b.params.page):1),{queryArticles:_}=Be(),{data:F}=([g,i]=xe(()=>Re(`page=${h}`,_)),g=await g,i(),g),x=z.chunk(F.value,ke),k=f(()=>x[h.value-1]||[]),N=f(()=>z.chain(k.value).groupBy(t=>t.year).mapValues(t=>z.chain(t).sortBy("timestamp").last().value().path).value());function r(t,u="YYYY-MM-DD"){return m(t).format(u)}return Pe(()=>b.params.page,t=>{if(t==="1"||h.value>x.length)return l.push("/")},{immediate:!0}),Le({title:""}),(t,u)=>(P(),B(D,null,[(P(!0),B(D,null,Ve(L(k),o=>(P(),B(D,{key:o.path},[L(N)[o.year]===o.path?(P(),B("div",De,R(o.year),1)):M("",!0),v(Ce,{class:"mb-4",variant:"plain",ripple:!1,to:o.path},{title:T(()=>[o.draft?(P(),B("span",Me,"[草稿] ")):M("",!0),$(" "+R(o.title),1)]),subtitle:T(()=>[E("div",Te,[E("span",Ee,[v(K,{icon:"mdi-calendar-blank mr-1"}),$(" "+R(r(o.createdAt)),1)]),E("span",ze,[v(K,{icon:"mdi-update mr-1"}),$(" "+R(r(o.updatedAt)),1)])])]),text:T(()=>[$(R(o.description),1)]),_:2},1032,["to"])],64))),128)),L(x).length>1?(P(),Ae(Ne,{key:0,rounded:"","model-value":L(h),length:L(x).length,"onUpdate:modelValue":u[0]||(u[0]=o=>("navigateTo"in t?t.navigateTo:L(Ie))(`/page/${o}`))},null,8,["model-value","length"])):M("",!0)],64))}}),He=we(Ye,[["__scopeId","data-v-79a9b63f"]]);export{He as default};
