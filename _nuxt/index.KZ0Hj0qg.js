import{V as w,_ as B,a as T}from"./VPagination.Mo1MZ_iw.js";import{d as $,h as b,i as E,j as _,k as I,A as N,l as P,u as R,o as n,m as u,e,a as d,V as D,f as j,t as V,q as g,F as h,n as q,w as F,c as L,s as S}from"./entry.W-iIX5Z4.js";import{u as G}from"./useDefaultQuery.EeHsbTGE.js";import{u as M}from"./query.6jnD6sI_.js";import{_ as v}from"./lodash.tXEAdh1D.js";import{_ as O}from"./_plugin-vue_export-helper.x3n3nnut.js";import"./index.ycaPxcKG.js";import"./VChip.rVTDyXtD.js";import"./VCard.EEO4BU5Y.js";import"./VImg.zH3iix3Z.js";import"./preview.i0qUx_Ly.js";const Q={key:0,class:"text-h6 px-1 mb-3"},U={key:0,class:"marked-year text-h2 font-weight-black text-blue-lighten-4"},Y=$({__name:"index",async setup(z){let l,f;const o=b(),y=E(),s=_(()=>o.params.tag),i=_(()=>o.params.page?Number.parseInt(o.params.page):1),{queryArticles:A}=G(),{data:k}=([l,f]=I(()=>M(`tag=${s.value}&page=${i.value}`,()=>A(s.value))),l=await l,f(),l),m=v.chunk(k.value,N),x=_(()=>m[i.value-1]||[]),C=_(()=>v.chain(x.value).groupBy(t=>t.year).mapValues(t=>v.chain(t).sortBy("timestamp").last().value().path).value());return P([()=>o.params.tag,()=>o.params.page],t=>{var c;const[r,p]=t;if(r===void 0||((c=k.value)==null?void 0:c.length)===0)return y.push("/");if(p===void 0||p==="1"||i.value>m.length)return y.push(`/tag/${s.value}`)},{immediate:!0}),R({title:""}),(t,r)=>{const p=T,c=B;return n(),u(h,null,[e(s)?(n(),u("div",Q,[d(D,{icon:"mdi-tag-search-outline mr-1"}),j(" "+V(e(s).split("-").join(" ")),1)])):g("",!0),(n(!0),u(h,null,q(e(x),a=>(n(),u(h,{key:a.path},[e(C)[a.year]===a.path?(n(),u("div",U,V(a.year),1)):g("",!0),d(p,{article:a},null,8,["article"])],64))),128)),d(c,null,{default:F(()=>[e(m).length>1?(n(),L(w,{key:0,rounded:"","model-value":e(i),length:e(m).length,"onUpdate:modelValue":r[0]||(r[0]=a=>("navigateTo"in t?t.navigateTo:e(S))(`/tag/${e(s)}/page/${a}`))},null,8,["model-value","length"])):g("",!0)]),_:1})],64)}}}),oe=O(Y,[["__scopeId","data-v-2d96e4cf"]]);export{oe as default};
