import{V as S,_ as $,a as E}from"./VPagination.OkuEiSgJ.js";import{d as N,h as P,i as R,j as d,k as T,A as D,l as j,u as q,o as r,m as _,b as B,t as w,e as t,F as g,n as F,a as A,w as L,c as G,q as C,s as M,p as O,g as Q}from"./entry.SC3u8evS.js";import{u as U}from"./useDefaultQuery.r7WLFFKg.js";import{u as Y}from"./query.Z-M_WIF1.js";import{_ as h}from"./lodash.0QmMlxYN.js";import{_ as z}from"./_plugin-vue_export-helper.x3n3nnut.js";import"./index.FLmw4HwK.js";import"./VChip.O4V7bYp9.js";import"./VCard.TEoutRn_.js";import"./VImg.UUngkL8d.js";import"./preview.xGNhMJHP.js";const H=u=>(O("data-v-a4dfeedc"),u=u(),Q(),u),J={class:"text-h6 px-1 mb-3"},K=H(()=>B("hr",{class:"mt-2"},null,-1)),W={key:0,class:"marked-year text-h2 font-weight-black text-blue-lighten-4"},X=N({__name:"index",async setup(u){let l,v;const s=P(),f=R(),o=d(()=>s.params.tag),p=d(()=>s.params.page?Number.parseInt(s.params.page):1),{queryArticles:I}=U(),{data:y}=([l,v]=T(()=>Y(`tag=${o.value}&page=${p.value}`,()=>I(o.value))),l=await l,v(),l),c=h.chunk(y.value,D),k=d(()=>c[p.value-1]||[]),b=d(()=>h.chain(k.value).groupBy(e=>e.year).mapValues(e=>h.chain(e).sortBy("timestamp").last().value().path).value());return j([()=>s.params.tag,()=>s.params.page],e=>{var m;const[n,i]=e;if(n===void 0||((m=y.value)==null?void 0:m.length)===0)return f.push("/");if(i===void 0||i==="1"||p.value>c.length)return f.push(`/tag/${o.value}`)},{immediate:!0}),q({title:""}),(e,n)=>{var x,V;const i=E,m=$;return r(),_(g,null,[B("div",J," 標籤："+w((V=(x=t(o))==null?void 0:x.split("-"))==null?void 0:V.join(" ")),1),K,(r(!0),_(g,null,F(t(k),a=>(r(),_(g,{key:a.path},[t(b)[a.year]===a.path?(r(),_("div",W,w(a.year),1)):C("",!0),A(i,{article:a},null,8,["article"])],64))),128)),A(m,null,{default:L(()=>[t(c).length>1?(r(),G(S,{key:0,rounded:"","model-value":t(p),length:t(c).length,"onUpdate:modelValue":n[0]||(n[0]=a=>("navigateTo"in e?e.navigateTo:t(M))(`/tag/${t(o)}/page/${a}`))},null,8,["model-value","length"])):C("",!0)]),_:1})],64)}}}),ce=z(X,[["__scopeId","data-v-a4dfeedc"]]);export{ce as default};
